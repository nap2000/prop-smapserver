!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={maps:[{tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:"",repeatOrdinals:!1,validateContinuously:!1,validatePage:!0,arcGis:{jsUrl:"",webMapId:"",hasZ:!0,basemaps:["streets"]}}},{}],2:[function(a,b,c){var d=a("jquery");window.jQuery=d;var e=(a("./src/js/support"),a("./webform/file-storage")),f=a("./webform/store"),g=a("./webform/controller-webform");window.enketo=g,"undefined"!=typeof surveyData&&g.init("form.or:eq(0)",{recordStore:f,fileStore:e,submitInterval:3e5})},{"./src/js/support":37,"./webform/controller-webform":63,"./webform/file-storage":64,"./webform/store":68,jquery:22}],3:[function(a,b,c){!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof c?a("jquery"):jQuery)}(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(a){return function(){return this[a].apply(this,arguments)}}function g(a){return a&&!isNaN(a.getTime())}function h(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function i(b){var c={};if(q[b]||(b=b.split("-")[0],q[b])){var d=q[b];return a.each(p,function(a,b){b in d&&(c[b]=d[b])}),c}}var j=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;c<d;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new j;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),k=function(b,c){a(b).data("datepicker",this),this._process_options(c),this.dates=new j,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=a(b),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=a(r.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};k.prototype={constructor:k,_resolveViewName:function(a,c){return 0===a||"days"===a||"month"===a?0:1===a||"months"===a||"year"===a?1:2===a||"years"===a||"decade"===a?2:3===a||"decades"===a||"century"===a?3:4===a||"centuries"===a||"millennium"===a?4:c!==b&&c},_check_template:function(c){try{if(c===b||""===c)return!1;if((c.match(/[<>]/g)||[]).length<=0)return!0;var d=a(c);return d.length>0}catch(a){return!1}},_process_options:function(b){this._o=a.extend({},this._o,b);var e=this.o=a.extend({},this._o),f=e.language;q[f]||(f=f.split("-")[0],q[f]||(f=o.language)),e.language=f,e.startView=this._resolveViewName(e.startView,0),e.minViewMode=this._resolveViewName(e.minViewMode,0),e.maxViewMode=this._resolveViewName(e.maxViewMode,4),e.startView=Math.min(e.startView,e.maxViewMode),e.startView=Math.max(e.startView,e.minViewMode),e.multidate!==!0&&(e.multidate=Number(e.multidate)||!1,e.multidate!==!1&&(e.multidate=Math.max(0,e.multidate))),e.multidateSeparator=String(e.multidateSeparator),e.weekStart%=7,e.weekEnd=(e.weekStart+6)%7;var g=r.parseFormat(e.format);e.startDate!==-(1/0)&&(e.startDate?e.startDate instanceof Date?e.startDate=this._local_to_utc(this._zero_time(e.startDate)):e.startDate=r.parseDate(e.startDate,g,e.language,e.assumeNearbyYear):e.startDate=-(1/0)),e.endDate!==1/0&&(e.endDate?e.endDate instanceof Date?e.endDate=this._local_to_utc(this._zero_time(e.endDate)):e.endDate=r.parseDate(e.endDate,g,e.language,e.assumeNearbyYear):e.endDate=1/0),e.daysOfWeekDisabled=e.daysOfWeekDisabled||[],a.isArray(e.daysOfWeekDisabled)||(e.daysOfWeekDisabled=e.daysOfWeekDisabled.split(/[,\s]*/)),e.daysOfWeekDisabled=a.map(e.daysOfWeekDisabled,function(a){return parseInt(a,10)}),e.daysOfWeekHighlighted=e.daysOfWeekHighlighted||[],a.isArray(e.daysOfWeekHighlighted)||(e.daysOfWeekHighlighted=e.daysOfWeekHighlighted.split(/[,\s]*/)),e.daysOfWeekHighlighted=a.map(e.daysOfWeekHighlighted,function(a){return parseInt(a,10)}),e.datesDisabled=e.datesDisabled||[],a.isArray(e.datesDisabled)||(e.datesDisabled=[e.datesDisabled]),e.datesDisabled=a.map(e.datesDisabled,function(a){return r.parseDate(a,g,e.language,e.assumeNearbyYear)});var h=String(e.orientation).toLowerCase().split(/\s+/g),i=e.orientation.toLowerCase();if(h=a.grep(h,function(a){return/^auto|left|right|top|bottom$/.test(a)}),e.orientation={x:"auto",y:"auto"},i&&"auto"!==i)if(1===h.length)switch(h[0]){case"top":case"bottom":e.orientation.y=h[0];break;case"left":case"right":e.orientation.x=h[0]}else i=a.grep(h,function(a){return/^left|right$/.test(a)}),e.orientation.x=i[0]||"auto",i=a.grep(h,function(a){return/^top|bottom$/.test(a)}),e.orientation.y=i[0]||"auto";else;if(e.defaultViewDate){var j=e.defaultViewDate.year||(new Date).getFullYear(),k=e.defaultViewDate.month||0,l=e.defaultViewDate.day||1;e.defaultViewDate=c(j,k,l)}else e.defaultViewDate=d()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){var b={keyup:a.proxy(function(b){a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};this.o.showOnFocus===!0&&(b.focus=a.proxy(this.show,this)),this.isInput?this._events=[[this.element,b]]:this.component&&this.hasInput?this._events=[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:this._events=[[this.element,{click:a.proxy(this.show,this),keydown:a.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return r.formatDate(c,b,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&a.inArray("text/plain",b.originalEvent.clipboardData.types)!==-1)c=b.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;c=window.clipboardData.getData("Text")}this.setDate(c),this.update(),b.preventDefault()},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return"undefined"!=typeof a?new Date(a):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),remove:f("destroy"),setValue:function(){var a=this.getFormattedDate();return this.inputField.val(a),this},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return r.formatDate(a,c,d)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a){return this._process_options({startDate:a}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){return this._process_options({endDate:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(a){return this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(a){return this._process_options({daysOfWeekHighlighted:a}),this.update(),this},setDatesDisabled:function(a){this._process_options({datesDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=a(this.o.container),f=e.width(),g="body"===this.o.container?a(document).scrollTop():e.scrollTop(),h=e.offset(),i=[];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+this.o.zIndexOffset,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-h.left,o=k.top-h.top;"body"!==this.o.container&&(o+=g),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=b-m)):k.left<0?(this.picker.addClass("datepicker-orient-left"),n-=k.left-d):n+b>f?(this.picker.addClass("datepicker-orient-right"),n+=m-b):this.picker.addClass("datepicker-orient-left");var p,q=this.o.orientation.y;if("auto"===q&&(p=-g+o-c,q=p<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+q),"top"===q?o-=c+parseInt(this.picker.css("padding-top")):o+=l,this.o.rtl){var r=f-(n+m);this.picker.css({top:o,right:r,zIndex:j})}else this.picker.css({top:o,left:n,zIndex:j});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;return arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return r.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),c=a.grep(c,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var b=this.o.weekStart,c="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(a,b){return parseInt(b)+1}),c+='<th class="cw">&#160;</th>');b<this.o.weekStart+7;)c+='<th class="dow',a.inArray(b,this.o.daysOfWeekDisabled)>-1&&(c+=" disabled"),c+='">'+q[this.o.language].daysMin[b++%7]+"</th>";c+="</tr>",this.picker.find(".datepicker-days thead").append(c)},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),b="",c=0;c<12;){var d=a&&a.getMonth()===c?" focused":"";b+='<span class="month'+d+'">'+q[this.o.language].monthsShort[c++]+"</span>"}this.picker.find(".datepicker-months td").html(b)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push("today"),this.dates.contains(b)!==-1&&c.push("active"),this.dateWithinRange(b)||c.push("disabled"),this.dateIsDisabled(b)&&c.push("disabled","disabled-date"),a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&c.push("highlighted"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),a.inArray(b.valueOf(),this.range)!==-1&&c.push("selected"),b.valueOf()===this.range[0]&&c.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&c.push("range-end")),c},_fill_yearsView:function(c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u;for(k="",l=this.picker.find(c),m=parseInt(g/e,10)*e,o=parseInt(h/f,10)*f,p=parseInt(i/f,10)*f,n=a.map(this.dates,function(a){return parseInt(a.getUTCFullYear()/f,10)*f}),l.find(".datepicker-switch").text(m+"-"+(m+9*f)),q=m-f,r=-1;r<11;r+=1)s=[d],t=null,r===-1?s.push("old"):10===r&&s.push("new"),a.inArray(q,n)!==-1&&s.push("active"),(q<o||q>p)&&s.push("disabled"),q===this.viewDate.getFullYear()&&s.push("focused"),j!==a.noop&&(u=j(new Date(q,0,1)),u===b?u={}:"boolean"==typeof u?u={enabled:u}:"string"==typeof u&&(u={classes:u}),u.enabled===!1&&s.push("disabled"),u.classes&&(s=s.concat(u.classes.split(/\s+/))),u.tooltip&&(t=u.tooltip)),k+='<span class="'+s.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+q+"</span>",q+=f;l.find("td").html(k)},fill:function(){var d,e,f=new Date(this.viewDate),g=f.getUTCFullYear(),h=f.getUTCMonth(),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),j=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),k=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,m=q[this.o.language].today||q.en.today||"",n=q[this.o.language].clear||q.en.clear||"",o=q[this.o.language].titleFormat||q.en.titleFormat;if(!isNaN(g)&&!isNaN(h)){this.picker.find(".datepicker-days .datepicker-switch").text(r.formatDate(f,o,this.o.language)),this.picker.find("tfoot .today").text(m).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(n).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var p=c(g,h-1,28),s=r.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(s),p.setUTCDate(s-(p.getUTCDay()-this.o.weekStart+7)%7);var t=new Date(p);p.getUTCFullYear()<100&&t.setUTCFullYear(p.getUTCFullYear()),t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];p.valueOf()<t;){if(p.getUTCDay()===this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),x=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),y=new Date(Number(y=c(x.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),z=(x-y)/864e5/7+1;v.push('<td class="cw">'+z+"</td>")}u=this.getClassNames(p),u.push("day"),this.o.beforeShowDay!==a.noop&&(e=this.o.beforeShowDay(this._utc_to_local(p)),e===b?e={}:"boolean"==typeof e?e={enabled:e}:"string"==typeof e&&(e={classes:e}),e.enabled===!1&&u.push("disabled"),e.classes&&(u=u.concat(e.classes.split(/\s+/))),e.tooltip&&(d=e.tooltip)),u=a.isFunction(a.uniqueSort)?a.uniqueSort(u):a.unique(u),v.push('<td class="'+u.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+p.getUTCDate()+"</td>"),d=null,p.getUTCDay()===this.o.weekEnd&&v.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var A=q[this.o.language].monthsTitle||q.en.monthsTitle||"Months",B=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?A:g).end().find("span").removeClass("active");if(a.each(this.dates,function(a,b){b.getUTCFullYear()===g&&B.eq(b.getUTCMonth()).addClass("active")}),(g<i||g>k)&&B.addClass("disabled"),g===i&&B.slice(0,j).addClass("disabled"),g===k&&B.slice(l+1).addClass("disabled"),this.o.beforeShowMonth!==a.noop){var C=this;a.each(B,function(c,d){var e=new Date(g,c,1),f=C.o.beforeShowMonth(e);f===b?f={}:"boolean"==typeof f?f={enabled:f}:"string"==typeof f&&(f={classes:f}),f.enabled!==!1||a(d).hasClass("disabled")||a(d).addClass("disabled"),f.classes&&a(d).addClass(f.classes),f.tooltip&&a(d).prop("title",f.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,g,i,k,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,g,i,k,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,g,i,k,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault(),b.stopPropagation();var e,f,g,h,i,j,k;e=a(b.target),e.hasClass("datepicker-switch")&&this.showMode(1);var l=e.closest(".prev, .next");l.length>0&&(f=r.modes[this.viewMode].navStep*(l.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,f),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,f),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),e.hasClass("today")&&!e.hasClass("day")&&(this.showMode(-2),this._setDate(d(),"linked"===this.o.todayBtn?null:"view")),e.hasClass("clear")&&this.clearDates(),e.hasClass("disabled")||(e.hasClass("day")&&(g=parseInt(e.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),e.hasClass("old")&&(0===i?(i=11,h-=1,j=!0,k=!0):(i-=1,j=!0)),e.hasClass("new")&&(11===i?(i=0,h+=1,j=!0,k=!0):(i+=1,j=!0)),this._setDate(c(h,i,g)),k&&this._trigger("changeYear",this.viewDate),j&&this._trigger("changeMonth",this.viewDate)),e.hasClass("month")&&(this.viewDate.setUTCDate(1),g=1,i=e.parent().find("span").index(e),h=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(i),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(c(h,i,g)),this.showMode()):this.showMode(-1),this.fill()),(e.hasClass("year")||e.hasClass("decade")||e.hasClass("century"))&&(this.viewDate.setUTCDate(1),g=1,i=0,h=parseInt(e.text(),10)||0,this.viewDate.setUTCFullYear(h),e.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(c(h,i,g))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),b!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b):this.o.multidate===!1?(this.dates.clear(),this.dates.push(a)):this.dates.push(a),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),b&&"view"===b||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);return c.setUTCDate(a.getUTCDate()+b),c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!g(a))return this.o.defaultViewDate;if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),h=e.getUTCMonth(),i=Math.abs(b);if(b=b>0?1:-1,1===i)d=b===-1?function(){return e.getUTCMonth()===h}:function(){return e.getUTCMonth()!==c},c=h+b,e.setUTCMonth(c),(c<0||c>11)&&(c=(c+12)%12);else{for(var j=0;j<i;j++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!==e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{if(a=this[c](a,b),!this.dateWithinRange(a))return!1;c="moveDay"}while(this.dateIsDisabled(a));return a},weekOfDateIsDisabled:function(b){return a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length>0},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(!this.picker.is(":visible"))return void(40!==a.keyCode&&27!==a.keyCode||(this.show(),a.stopPropagation()));var b,c,d=!1,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault(),a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;b=37===a.keyCode||38===a.keyCode?-1:1,0===this.viewMode?a.ctrlKey?(c=this.moveAvailableDate(e,b,"moveYear"),c&&this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveAvailableDate(e,b,"moveMonth"),c&&this._trigger("changeMonth",this.viewDate)):37===a.keyCode||39===a.keyCode?c=this.moveAvailableDate(e,b,"moveDay"):this.weekOfDateIsDisabled(e)||(c=this.moveAvailableDate(e,b,"moveWeek")):1===this.viewMode?(38!==a.keyCode&&40!==a.keyCode||(b*=4),c=this.moveAvailableDate(e,b,"moveMonth")):2===this.viewMode&&(38!==a.keyCode&&40!==a.keyCode||(b*=4),c=this.moveAvailableDate(e,b,"moveYear")),c&&(this.focusDate=this.viewDate=c,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(e),d=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}d&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+a))),this.picker.children("div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var l=function(b,c){a(b).data("datepicker",this),this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,n.call(a(this.inputs),c).on("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker");if("undefined"!=typeof c){var d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=e-1,g=e+1,h=this.inputs.length;if(e!==-1){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[f])for(;f>=0&&d<this.dates[f];)this.pickers[f--].setUTCDate(d);else if(d>this.dates[g])for(;g<h&&d>this.dates[g];)this.pickers[g++].setUTCDate(d);this.updateDates(),delete this.updating}}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var m=a.fn.datepicker,n=function(c){var d=Array.apply(null,arguments);d.shift();var e;if(this.each(function(){var b=a(this),f=b.data("datepicker"),g="object"==typeof c&&c;if(!f){var j=h(this,"date"),m=a.extend({},o,j,g),n=i(m.language),p=a.extend({},o,n,j,g);b.hasClass("input-daterange")||p.inputs?(a.extend(p,{inputs:p.inputs||b.find("input").toArray()}),f=new l(this,p)):f=new k(this,p),b.data("datepicker",f)}"string"==typeof c&&"function"==typeof f[c]&&(e=f[c].apply(f,d))}),e===b||e instanceof k||e instanceof l)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+c+" function)");return e};a.fn.datepicker=n;var o=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},p=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=k;var q=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},r={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,r.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(a){if("function"==typeof a.toValue&&"function"==typeof a.toDisplay)return a;var b=a.replace(this.validParts,"\0").split("\0"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(e,f,g,h){function i(a,b){return b===!0&&(b=10),a<100&&(a+=2e3,a>(new Date).getFullYear()+b&&(a-=100)),a}function j(){var a=this.slice(0,s[n].length),b=s[n].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!e)return b;if(e instanceof Date)return e;if("string"==typeof f&&(f=r.parseFormat(f)),f.toValue)return f.toValue(e,f,g);var l,m,n,o,p=/([\-+]\d+)([dmwy])/,s=e.match(/([\-+]\d+)([dmwy])/g),t={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},u={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}if("undefined"!=typeof u[e]&&(e=u[e],
s=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e))){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}s=e&&e.match(this.nonpunctuation)||[],e=new Date;var v,w,x={},y=["yyyy","yy","M","MM","m","mm","d","dd"],z={yyyy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},yy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;b<0;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};z.M=z.MM=z.mm=z.m,z.dd=z.d,e=d();var A=f.parts.slice();if(s.length!==A.length&&(A=a(A).filter(function(b,c){return a.inArray(c,y)!==-1}).toArray()),s.length===A.length){var B;for(n=0,B=A.length;n<B;n++){if(v=parseInt(s[n],10),l=A[n],isNaN(v))switch(l){case"MM":w=a(q[g].months).filter(j),v=a.inArray(w[0],q[g].months)+1;break;case"M":w=a(q[g].monthsShort).filter(j),v=a.inArray(w[0],q[g].monthsShort)+1}x[l]=v}var C,D;for(n=0;n<y.length;n++)D=y[n],D in x&&!isNaN(x[D])&&(C=new Date(e),z[D](C,x[D]),isNaN(C)||(e=C))}return e},formatDate:function(b,c,d){if(!b)return"";if("string"==typeof c&&(c=r.parseFormat(c)),c.toDisplay)return c.toDisplay(b,c,d);var e={d:b.getUTCDate(),D:q[d].daysShort[b.getUTCDay()],DD:q[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:q[d].monthsShort[b.getUTCMonth()],MM:q[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;g<=h;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};r.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=r,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=m,this},a.fn.datepicker.version="1.6.4",a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),n.call(c,"show"))}),a(function(){n.call(a('[data-provide="datepicker-inline"]'))})})},{jquery:22}],4:[function(a,b,c){!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof c?a("jquery"):jQuery)}(function(a,b){function c(b,c){if(h[b]){var e=d(this),f=h[b].apply(e,c);return"undefined"==typeof f?a(this):f}throw new Error("method '"+b+"()' does not exist for slider.")}function d(b){var c=a(b).data("slider");if(c&&c instanceof g)return c;throw new Error(f.callingContextNotSliderInstance)}function e(b){var c=a(this);return c.each(function(){var c=a(this),d=c.data("slider"),e="object"==typeof b&&b;d&&!e&&(e={},a.each(a.fn.slider.defaults,function(a){e[a]=d[a]})),c.data("slider",new g(this,a.extend({},a.fn.slider.defaults,e)))}),c}var f={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},g=function(c,d){var e=this.element=a(c).hide(),f=a(c)[0].style.width,g=!1,h=this.element.next(".widget");switch(h.hasClass("slider")===!0?(g=!0,this.widget=h):this.widget=a('<div class="widget"><div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div></div>').insertAfter(this.element),this.picker=this.widget.find(".slider"),this.id=this.element.data("slider-id")||d.id,this.id&&(this.widget[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0),g===!0&&(this.widget.removeClass("slider-horizontal"),this.widget.removeClass("slider-vertical")),this.orientation=this.element.data("slider-orientation")||d.orientation,this.orientation){case"vertical":this.widget.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight";break;default:this.widget.addClass("slider-horizontal").css("width",f),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"}var i=this;switch(a.each(["min","max","step","precision","value","reversed","handle"],function(a,b){"undefined"!=typeof e.data("slider-"+b)?i[b]=e.data("slider-"+b):"undefined"!=typeof d[b]?i[b]=d[b]:"undefined"!=typeof e.prop(b)?i[b]=e.prop(b):i[b]=0}),this.value instanceof Array?g&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||d.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,g===!0&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=d.formater,this.setValue(this.value),this.handle1.on({keydown:a.proxy(this.keydown,this,0)}),this.handle2.on({keydown:a.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:a.proxy(this.mousedown,this)}),this.picker.on({mousedown:a.proxy(this.mousedown,this)}),this.enabled=d.enabled&&(this.element.data("slider-enabled")===b||this.element.data("slider-enabled")===!0),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||d.natural_arrow_keys};g.prototype={constructor:g,over:!1,inDrag:!1,layout:function(){var a;a=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=a[0]+"%",this.handle2Stype[this.stylePos]=a[1]+"%","vertical"===this.orientation?(this.selectionElStyle.top=Math.min(a[0],a[1])+"%",this.selectionElStyle.height=Math.abs(a[0]-a[1])+"%"):(this.selectionElStyle.left=Math.min(a[0],a[1])+"%",this.selectionElStyle.width=Math.abs(a[0]-a[1])+"%")},mousedown:function(b){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===b.type&&(b=b.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var c=this.getPercentage(b);if(this.range){var d=Math.abs(this.percentage[0]-c),e=Math.abs(this.percentage[1]-c);this.dragged=d<e?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-c:c,this.layout(),this.touchCapable&&a(document).on({touchmove:a.proxy(this.mousemove,this),touchend:a.proxy(this.mouseup,this)}),a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}),this.inDrag=!0;var f=this.calculateValue();return this.element.trigger({type:"slideStart",value:f}).data("value",f).prop("value",f),this.setValue(f),!0},triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},keydown:function(a,b){if(!this.isEnabled())return!1;var c;switch(b.which){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(c*=-1);var d=c*this.percentage[2],e=this.percentage[a]+d;e>100?e=100:e<0&&(e=0),this.dragged=a,this.adjustPercentageForRangeSliders(e),this.percentage[this.dragged]=e,this.layout();var f=this.calculateValue();return this.element.trigger({type:"slideStart",value:f}).data("value",f).prop("value",f),this.setValue(f,!0),this.element.trigger({type:"slideStop",value:f}).data("value",f).prop("value",f),!1}},mousemove:function(a){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===a.type&&(a=a.originalEvent);var b=this.getPercentage(a);this.adjustPercentageForRangeSliders(b),this.percentage[this.dragged]=this.reversed?100-b:b,this.layout();var c=this.calculateValue();return this.setValue(c,!0),!1},adjustPercentageForRangeSliders:function(a){this.range&&(0===this.dragged&&this.percentage[1]<a?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>a&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&a(document).off({touchmove:this.mousemove,touchend:this.mouseup}),a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1;var b=this.calculateValue();return this.layout(),this.element.data("value",b).prop("value",b).trigger({type:"slideStop",value:b}),!1},calculateValue:function(){var a;return this.range?(a=[this.min,this.max],0!==this.percentage[0]&&(a[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),a[0]=this.applyPrecision(a[0])),100!==this.percentage[1]&&(a[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),a[1]=this.applyPrecision(a[1])),this.value=a):(a=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,a<this.min?a=this.min:a>this.max&&(a=this.max),a=parseFloat(a),a=this.applyPrecision(a),this.value=[a,this.value[1]]),a},applyPrecision:function(a){var b=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(a,b)},getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=100*(a[this.mousePos]-this.offset[this.stylePos])/this.size;return b=Math.round(b/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,b))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(a,b){if(a||(a=0),this.value=this.validateInputValue(a),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.diff>0?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout(),b===!0){var c=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:c}).data("value",c).prop("value",c)}},validateInputValue:function(b){if("number"==typeof b)return b;if(b instanceof Array)return a.each(b,function(a,b){if("number"!=typeof b)throw new Error(f.formatInvalidInputErrorMsg(b))}),b;throw new Error(f.formatInvalidInputErrorMsg(b))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show(),this.picker.off().remove(),a(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(a,b){this[a]=b},getAttribute:function(a){return this[a]}};var h={getValue:g.prototype.getValue,setValue:g.prototype.setValue,setAttribute:g.prototype.setAttribute,getAttribute:g.prototype.getAttribute,destroy:g.prototype.destroy,disable:g.prototype.disable,enable:g.prototype.enable,toggle:g.prototype.toggle,isEnabled:g.prototype.isEnabled};a.fn.slider=function(a){if("string"==typeof a&&"refresh"!==a){var b=Array.prototype.slice.call(arguments,1);return c.call(this,a,b)}return e.call(this,a)},a.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(a){return a}},a.fn.slider.Constructor=g})},{jquery:22}],5:[function(a,b,c){!function(a,b,c){"use strict";var d=function(b,c){this.widget="",this.$element=a(b),this.defaultTime=c.defaultTime,this.disableFocus=c.disableFocus,this.disableMousewheel=c.disableMousewheel,this.isOpen=c.isOpen,this.minuteStep=c.minuteStep,this.modalBackdrop=c.modalBackdrop,this.orientation=c.orientation,this.secondStep=c.secondStep,this.snapToStep=c.snapToStep,this.showInputs=c.showInputs,this.showMeridian=c.showMeridian,this.showSeconds=c.showSeconds,this.template=c.template,this.appendWidgetTo=c.appendWidgetTo,this.showWidgetOnAddonClick=c.showWidgetOnAddonClick,this.icons=c.icons,this.maxHours=c.maxHours,this.explicitMode=c.explicitMode,this.handleDocumentClick=function(a){var b=a.data.scope;b.$element.parent().find(a.target).length||b.$widget.is(a.target)||b.$widget.find(a.target).length||b.hideWidget()},this._init()};d.prototype={constructor:d,_init:function(){var b=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("bootstrap-timepicker")?(this.$element.parent(".input-group.bootstrap-timepicker").find(".input-group-addon").on({"click.timepicker":a.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}),this.template!==!1?this.$widget=a(this.getTemplate()).on("click",a.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b),"keyup.timepicker":a.proxy(b.widgetKeyup,b)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(a){var b;b=a?this.minute-a:this.minute-this.minuteStep,b<0?(this.decrementHour(),this.minute=b+60):this.minute=b},decrementSecond:function(){var a=this.second-this.secondStep;a<0?(this.decrementMinute(!0),this.second=a+60):this.second=a},elementKeydown:function(a){switch(a.which){case 9:if(a.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}a.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:a.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),d=c.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-d}},getTemplate:function(){var a,b,c,d,e,f;switch(this.showInputs?(b='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',c='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',d='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',e='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"></span></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"></span></a></td>':"")+"</tr></table>",this.template){case"modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;</a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"</div>"}return a},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(0,1):a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(2,4):a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="meridian",a.setSelectionRange&&(this.showSeconds?setTimeout(function(){b.hour<10?a.setSelectionRange(8,10):a.setSelectionRange(9,11)},0):setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return this.hour===this.maxHours-1?void(this.hour=0):void this.hour++},incrementMinute:function(a){var b;b=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep,b>59?(this.incrementHour(),this.minute=b-60):this.minute=b},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a},mousewheel:function(b){if(!this.disableMousewheel){b.preventDefault(),b.stopPropagation();var c=b.originalEvent.wheelDelta||-b.originalEvent.detail,d=null;switch("mousewheel"===b.type?d=b.originalEvent.wheelDelta*-1:"DOMMouseScroll"===b.type&&(d=40*b.originalEvent.detail),d&&(b.preventDefault(),a(this).scrollTop(d+a(this).scrollTop())),this.highlightedUnit){case"minute":c>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":c>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:c>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(a,b){return a%b===0?a:Math.round(a%b/b)?(a+(b-a%b))%60:a-a%b},place:function(){if(!this.isInline){var c=this.$widget.outerWidth(),d=this.$widget.outerHeight(),e=10,f=a(b).width(),g=a(b).height(),h=a(b).scrollTop(),i=parseInt(this.$element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"),10)+10,j=this.component?this.component.parent().offset():this.$element.offset(),k=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),m=j.left,n=j.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(m-=c-l)):(this.$widget.addClass("timepicker-orient-left"),j.left<0?m-=j.left-e:j.left+c>f&&(m=f-c-e));var o,p,q=this.orientation.y;"auto"===q&&(o=-h+j.top-d,p=h+g-(j.top+k+d),q=Math.max(o,p)===p?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+q),"top"===q?n+=k:n-=d+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:n,left:m,zIndex:i})}},remove:function(){a("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date,c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),f="AM";0!==e&&(e=Math.ceil(b.getSeconds()/this.secondStep)*this.secondStep,60===e&&(d+=1,e=0)),0!==d&&(d=Math.ceil(b.getMinutes()/this.minuteStep)*this.minuteStep,60===d&&(c+=1,d=0)),this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="PM"):f="AM"),this.hour=c,this.minute=d,this.second=e,this.meridian=f,this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a,b){if(!a)return void this.clear();var c,d,e,f,g,h;if("object"==typeof a&&a.getMonth)e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),this.showMeridian&&(h="AM",e>12&&(h="PM",e%=12),12===e&&(h="PM"));else{if(c=(/a/i.test(a)?1:0)+(/p/i.test(a)?2:0),c>2)return void this.clear();if(d=a.replace(/[^0-9\:]/g,"").split(":"),e=d[0]?d[0].toString():d.toString(),this.explicitMode&&e.length>2&&e.length%2!==0)return void this.clear();f=d[1]?d[1].toString():"",g=d[2]?d[2].toString():"",e.length>4&&(g=e.slice(-2),e=e.slice(0,-2)),e.length>2&&(f=e.slice(-2),e=e.slice(0,-2)),f.length>2&&(g=f.slice(-2),f=f.slice(0,-2)),e=parseInt(e,10),f=parseInt(f,10),g=parseInt(g,10),isNaN(e)&&(e=0),isNaN(f)&&(f=0),isNaN(g)&&(g=0),g>59&&(g=59),f>59&&(f=59),e>=this.maxHours&&(e=this.maxHours-1),this.showMeridian?(e>12&&(c=2,e-=12),c||(c=1),0===e&&(e=12),h=1===c?"AM":"PM"):e<12&&2===c?e+=12:e>=this.maxHours?e=this.maxHours-1:(e<0||12===e&&1===c)&&(e=0)}this.hour=e,this.snapToStep?(this.minute=this.changeToNearestStep(f,this.minuteStep),this.second=this.changeToNearestStep(g,this.secondStep)):(this.minute=f,this.second=g),this.meridian=h,this.update(b)},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.$widget.appendTo(this.appendWidgetTo),a(c).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(a){this.updateElement(),a||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var a=this.hour,b=1===this.minute.toString().length?"0"+this.minute:this.minute,c=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var a=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(a,!0)}},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("a").data("action");d&&this[d](),this.update(),c.is("input")&&c.get(0).setSelectionRange(0,2)},widgetKeydown:function(b){var c=a(b.target),d=c.attr("class").replace("bootstrap-timepicker-","");switch(b.which){case 9:if(b.shiftKey){if("hour"===d)return this.hideWidget()}else if(this.showMeridian&&"meridian"===d||this.showSeconds&&"second"===d||!this.showMeridian&&!this.showSeconds&&"minute"===d)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(b.preventDefault(),d){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2);break;case 40:switch(b.preventDefault(),d){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2)}},widgetKeyup:function(a){(65===a.which||77===a.which||80===a.which||46===a.which||8===a.which||a.which>=48&&a.which<=57||a.which>=96&&a.which<=105)&&this.updateFromWidgetInputs()}},a.fn.timepicker=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var e=a(this),f=e.data("timepicker"),g="object"==typeof b&&b;f||e.data("timepicker",f=new d(this,a.extend({},a.fn.timepicker.defaults,g,a(this).data()))),"string"==typeof b&&f[b].apply(f,c)})},a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},a.fn.timepicker.Constructor=d,a(c).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(b){
var c=a(this);c.data("timepicker")||(b.preventDefault(),c.timepicker())})}(jQuery,window,document)},{}],6:[function(a,b,c){a("../../js/transition.js"),a("../../js/alert.js"),a("../../js/button.js"),a("../../js/carousel.js"),a("../../js/collapse.js"),a("../../js/dropdown.js"),a("../../js/modal.js"),a("../../js/tooltip.js"),a("../../js/popover.js"),a("../../js/scrollspy.js"),a("../../js/tab.js"),a("../../js/affix.js")},{"../../js/affix.js":7,"../../js/alert.js":8,"../../js/button.js":9,"../../js/carousel.js":10,"../../js/collapse.js":11,"../../js/dropdown.js":12,"../../js/modal.js":13,"../../js/popover.js":14,"../../js/scrollspy.js":15,"../../js/tab.js":16,"../../js/tooltip.js":17,"../../js/transition.js":18}],7:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery)},{}],8:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery)},{}],9:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery)},{}],10:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery)},{}],11:[function(a,b,c){+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery)},{}],12:[function(a,b,c){+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery)},{}],13:[function(a,b,c){+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery)},{}],14:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery)},{}],15:[function(a,b,c){+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery)},{}],16:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery)},{}],17:[function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);
var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery)},{}],18:[function(a,b,c){+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery)},{}],19:[function(a,b,c){var d=function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=[],t="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",x="http://www.w3.org/1999/xhtml",y=function(a){return a.ownerDocument},z=function(a){var b=[],c=function(a,b){var c,d,e=[];for(d=0;d<a.length;d++)c=a.item(d),!1!==S(c.nodeType,b)&&e.push(c);return e};switch(a.nodeType){case 1:b=c(a.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:b=c(a.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+a.nodeType)}return b},A=function(a){var b,c,d=[];for(b=z(a),c=0;c<b.length;c++)d.push(b[c]),d.push.apply(d,A(b[c]));return d},B=function(a){var b;switch(a.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return a.parentNode;case 2:return a.ownerElement?a.ownerElement:b=O(a.ownerDocument,!0,function(b,c){if(c===a)return!0});case 13:return a.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+a.type)}},C=function(a){for(var b,c=[];b=B(a);)c.push(b),a=b;return c},D=function(a){return F(a,"nextSibling")},E=function(a){return F(a,"previousSibling")},F=function(a,b){for(var c,d=[];c=a[b];){switch(c.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:d.push(c)}a=c}return d},G=function(a){var b,c,d,e,f=[];for(b=C(a),b.unshift(a),c=0;c<b.length;c++)for(d=D(b[c]),e=0;e<d.length;e++)f.push(d[e]),f.push.apply(f,A(d[e]));return f},H=function(a){var b,c,d,e,f=[];for(b=C(a),b.unshift(a),c=0;c<b.length;c++)for(d=E(b[c]),e=0;e<d.length;e++)f.push.apply(f,A(d[e]).reverse()),f.push(d[e]);return f},y=function(a){switch(a.nodeType){case 9:return a;default:return a.ownerDocument}},I=function(a){var b,c=[];if(1===a.nodeType)for(b=0;b<a.attributes.length;b++)a.attributes[b].specified&&c.push(a.attributes[b]);return c.length>1&&c[0].compareDocumentPosition&&c.sort(function(a,b){var c=a.compareDocumentPosition(b);return 2==(2&c)?1:4==(4&c)?-1:0}),c},J=function(a){var b,c=I(a),d=[];for(b=0;b<c.length;b++)!1===M(c[b])&&d.push(c[b]);return d},K=function(a,b){var c,d,e,f,g=b||[];if(1===a.nodeType){if(a.ownerDocument.documentElement===a&&"object"==typeof a.ownerDocument.namespaces)for(d=a.ownerDocument.namespaces.length-1;d>=0;d--)f=a.ownerDocument.namespaces.item(d),L.call(this,g,f.name,f.urn,a);for(c=I(a),d=c.length-1;d>=0;d--)!1!==(e=M(c[d]))&&(1!==e.length?L.call(this,g,e[1],c[d].nodeValue,a):L.call(this,g,"",c[d].nodeValue,a));if(K.call(this,a.parentNode,g),void 0===b&&(L.call(this,g,"xml",t,a),g[0]&&""===g[0].prefix&&""===g[0].namespaceURI&&g.shift()),void 0===b)for(d=0;d<g.length;d++)g[d].ownerElement!==a&&(g[d]=Y(g[d].prefix,g[d].nodeValue,a))}return g},L=function(a,b,c,d){var e,f;for(this.opts["case-sensitive"]||(b=b.toLowerCase()),e=0;e<a.length;e++)if(a[e].prefix===b)return!1;return f=Y(b,c,d),""===b&&null!==c?a.unshift(f):a.push(f),!0},M=function(a){var b=a.nodeName.split(":");return"xmlns"===b[0]&&b},N=function(a,b){var c,d,e,f,g,h;if(1===a.nodeType)for(e=b?[b]:J(a),f=K.call(this,a),c=0;c<e.length;c++){for(h=e[c].nodeName.split(":"),1===h.length&&(h[1]=h[0],h[0]=""),g=null,d=0;d<f.length;d++)if(f[d].prefix===h[0]){g=f[d].namespaceURI;break}if(null===g&&(g=""),this.opts["unique-ids"][g]===h[1])return e[c]}return null},O=function(a,b,c){var d,e,f,g,h=[];for(f=a.getElementsByTagName("*"),d=0;d<f.length;d++)if(g=f.item(d),1==g.nodeType)for(e=0;e<g.attributes.length;e++)if(g.attributes[e].specified&&c(g,g.attributes[e])===!0){if(b)return g;h.push(g);break}return b?null:h},P=function(a){var b,c,d,e;switch(a.nodeType){case 1:for("undefined"==typeof a.scopeName||document.addEventListener?(b=a.nodeName.split(":"),e=1==b.length?{prefix:"",name:b[0]}:{prefix:b[0],name:b[1]}):e={prefix:"HTML"==a.scopeName?"":a.scopeName,name:a.nodeName},this.opts["case-sensitive"]||(e.prefix=e.prefix.toLowerCase(),e.name=e.name.toLowerCase()),c=K.call(this,a),d=0;d<c.length;d++)if(c[d].prefix===e.prefix)return e.ns=c[d].namespaceURI,e;if(""===e.prefix)return e.ns=null,e;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+e.prefix+'" on element: '+a.nodeName);case 2:if(b=a.nodeName.split(":"),1==b.length)return{prefix:"",ns:null,name:b[0]};for(e={prefix:b[0],name:b[1]},this.opts["case-sensitive"]||(e.prefix=e.prefix.toLowerCase(),e.name=e.name.toLowerCase()),c=K.call(this,B(a)),d=0;d<c.length;d++)if(c[d].prefix===e.prefix)return e.ns=c[d].namespaceURI,e;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+e.prefix+'" on attribute: '+a.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?a.prefix.toLowerCase():a.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?a.target.toLowerCase():a.target};default:return!1}},Q=function(a){var b,c,d="";switch(a.nodeType){case 9:case 1:for(c=i(new l(a,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]}),c.sortDocumentOrder(),b=0;b<c.value.length;b++)d+=c.value[b].data;return d;case 2:return a.nodeValue;case 13:return a.namespaceURI;case 7:case 8:case 3:case 4:return a.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+a.nodeType)}},R=function(a,b,c){var d=new Error(c);return d.name=b,d.code=a,d},S=function(a,b){for(var c=b.length;c--;)if(b[c]===a)return c;return!1},T=function(a,b,c,d){var e,f,g,h,i;if(a instanceof q)if(b instanceof q){for(h=b.stringValues(),g=a.stringValues(),e=0;e<g.length;e++)for(f=0;f<h.length;f++)if(i=T(g[e],h[f],c,d),i.toBoolean())return i}else if(b instanceof p){for(g=a.stringValues(),e=0;e<g.length;e++)if(i=T(new p(g[e].toNumber()),b,c,d),i.toBoolean())return i}else if(b instanceof DateType||b instanceof o&&b.isDateString()){for(b instanceof o&&(b=new DateType(b)),g=a.stringValues(),e=0;e<g.length;e++)if(i=T(new DateType(g[e].toDate()),b,c,d),i.toBoolean())return i}else{if(!(b instanceof o))return T(new n(a.toBoolean()),b,c,d);for(g=a.stringValues(),e=0;e<g.length;e++)if(i=T(g[e],b,c,d),i.toBoolean())return i}else if(b instanceof q)if(a instanceof p){for(h=b.stringValues(),e=0;e<h.length;e++)if(i=T(a,new p(h[e].toNumber()),c,d),i.toBoolean())return i}else if(a instanceof DateType||a instanceof o&&a.isDateString()){for(a instanceof o&&(a=new DateType(a)),h=b.stringValues(),e=0;e<h.length;e++)if(i=T(a,new DateType(h[e].toDate()),c,d),i.toBoolean())return i}else{if(!(a instanceof o))return T(a,new n(b.toBoolean()),c,d);for(h=b.stringValues(),e=0;e<h.length;e++)if(i=T(a,h[e],c,d),i.toBoolean())return i}else switch(c){case"=":case"!=":return new n(a instanceof n||b instanceof n?d(a.toBoolean(),b.toBoolean()):a instanceof p||b instanceof p?d(a.toNumber(),b.toNumber()):d(a.toString(),b.toString()));default:return new n(d(a.toNumber(),b.toNumber()))}return new n(!1)},U=function(a){switch(a.nodeType){case 2:case 3:case 4:case 7:case 8:return B(a);case 1:case 9:return a;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+a.nodeType)}},V=function(a,b){var c,d,e;if(13==a.nodeType&&13==b.nodeType&&a.ownerElement==b.ownerElement){if(a===b)return 0;for(d=K.call(r,a.ownerElement),e=0;e<d.length;e++){if(d[e]===a){c=4;break}if(d[e]===b){c=2;break}}}else 13==a.nodeType&&(a=a.ownerElement),13==b.nodeType&&(b=b.ownerElement),c=W(a,b);return c},W=function(a,b){var c,d,e,f,g,h=function(a,b,c,d,e,f,g,h,i){return 0===e||(e&f)===f?h+f:(e&g)===g?i:e};if(a.compareDocumentPosition)return a.compareDocumentPosition(b);if(a===b)return 0;if(c=U(a),d=U(b),9===c.nodeType)if(9===d.nodeType){if(c!==d)return 1;e=0}else{if(c!==d.ownerDocument)return 1;e=20}else if(9===d.nodeType){if(d!==c.ownerDocument)return 1;e=10}else{if(c.ownerDocument!==d.ownerDocument)return 1;if(!c.contains||"undefined"==typeof c.sourceIndex||!d.contains||"undefined"==typeof d.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');e=(c!=d&&c.contains(d)&&16)+(c!=d&&d.contains(c)&&8)+(c.sourceIndex>=0&&d.sourceIndex>=0?(c.sourceIndex<d.sourceIndex&&4)+(c.sourceIndex>d.sourceIndex&&2):1)+0}if(a===c&&b===d)return e;if(a===c)return h(a,c,b,d,e,16,8,4,2);if(b===d)return h(b,d,a,c,e,8,16,2,4);if(16===(16&e))return 4;if(8===(8&e))return 2;if(0===e){for(f=0;f<c.attributes.length;f++)if(g=c.attributes[f],g.specified){if(g===b)return 2;if(g===a)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return e},X=function(a){if(!a)throw R(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=a.nodeType&&1!=a.nodeType&&2!=a.nodeType&&3!=a.nodeType&&4!=a.nodeType&&8!=a.nodeType&&7!=a.nodeType&&13!=a.nodeType)throw R(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+a.nodeType+")");if(2==a.nodeType&&!a.specified)throw R(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},Y=function(a,b,c){var d,e;for(d=0;d<s.length;d++)if(e=s[d],e.prefix===a&&e.nodeValue===b&&e.ownerElement===c)return e;return e=new g(a,b,c),s.push(e),e};return m=function(a,b,c){this.value=a,this.type=b,this.supports=c},m.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(a){return!1!==S(a,this.supports)}},n=function(a){m.call(this,a,"boolean",["boolean","string","number","date"])},n.prototype=new m,n.constructor=n,n.prototype.toBoolean=function(){return this.value},n.prototype.toString=function(){return this.value===!0?"true":"false"},n.prototype.toNumber=function(){return this.value?1:0},n.prototype.toDate=function(){return null},q=function(a,b){m.call(this,a,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=b||"unsorted"},q.prototype=new m,q.constructor=q,q.prototype.toBoolean=function(){return this.value.length>0},q.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),Q(this.value[0]))},q.prototype.toNumber=function(){return new o(this.toString()).toNumber()},q.prototype.toNodeSet=function(){return this.value},q.prototype.toDate=function(){return new o(this.toString()).toDate()},q.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(a,b){var c=V(a,b);if(4==(4&c))return-1;if(2==(2&c))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+c)})}this.docOrder="document-order"},q.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},q.prototype.append=function(a){var b,c=0,d=0;if(!a instanceof q)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),a.sortDocumentOrder();c<this.value.length&&d<a.value.length;)if(b=V(this.value[c],a.value[d]),0==b)d++;else if(4==(4&b))c++;else{if(2!=(2&b))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+b+")");this.value.splice(c,0,a.value[d]),c++,d++}for(;d<a.value.length;d++)this.value.push(a.value[d]);this.docOrder="document-order"},q.prototype.stringValues=function(){var a,b,c=[];for(a=0;a<this.value.length;a++)b=new o(Q(this.value[a])),b.isDateString()&&(b=new DateType(b.value)),c.push(b);return c},o=function(a){m.call(this,a,"string",["boolean","string","number","date"])},o.prototype=new m,o.constructor=o,o.prototype.toBoolean=function(){return this.value.length>0},o.prototype.toString=function(){return this.value},o.prototype.toNumber=function(){var a;return this.isDateString(this.value)?new DateType(this.value).toNumber():(a=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/),null!==a?parseFloat(a[1]):(a=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/),null!==a?parseFloat(a[1]):Number.NaN))},o.prototype.toDate=function(){return new Date(this.value)},o.prototype.isDateString=function(){return!!isNaN(this.value)&&(!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value))},p=function(a){m.call(this,a,"number",["boolean","string","number","date"])},p.prototype=new m,p.constructor=p,p.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},p.prototype.toString=function(){return this.value.toString()},p.prototype.toNumber=function(){return this.value},p.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(a){m.call(this,a,"date",["date","string","number","boolean"])},DateType.prototype=new m,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toUTCString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},a=function(b,c){var d;switch(this.code=b,this.code){case a.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case a.TYPE_ERR:this.name="TYPE_ERR";break;default:throw d=new Error("Unsupported XPathException code: "+this.code),d.name="XPathExceptionInternalError",d}this.message=c||""},a.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},a.INVALID_EXPRESSION_ERR=51,a.TYPE_ERR=52,b=function(a){var b,c,d;for(b in a){d=!1;for(c in this.opts)if(b===c){this.opts[b]=a[b],d=!0;break}if(!d)throw new Error("Unsupported option: "+b)}this.opts["unique-ids"][t]="id",this.opts["unique-ids"][x]="id"},b.prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(b,e){var f,g,h,i,j={};try{f=d._parser.parse(b)}catch(b){throw g="The expression is not a legal expression.",g+=b instanceof d._parser.SyntaxError?" (line: "+b.line+", character: "+b.column+")":" ("+b.message+")",new a(a.INVALID_EXPRESSION_ERR,g)}if(f.nsPrefixes.length>0){if("object"!=typeof e||"undefined"==typeof e.lookupNamespaceURI)throw new a(a.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(h=0;h<f.nsPrefixes.length;h++)if(i=f.nsPrefixes[h],j[i]=e.lookupNamespaceURI(i),null===j[i])throw R(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+i+'" in the context of the given resolver.')}return new c(f,j,this.opts)},createNSResolver:function(a){return new e(a)},evaluate:function(a,b,c,d,e){var a=this.createExpression(a,c);return a.evaluate(b,d,e)}},c=function(a,b,c){this.parsedExpression=a,this.namespaceMapping=b,this.opts=c||{}},c.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(a,b,c){var d;return r=this,X(a),d=new l(a,1,1,{},k,this.namespaceMapping,this.opts),f.factory(d,b,i(d,this.parsedExpression.tree))}},l=function(a,b,c,d,e,f,g){this.node=a,this.pos=b,this.size=c,this.vars=d,this.fns=e,this.nsMap=f,this.opts=g||{}},l.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(a,b,c){return new l(a||this.node,"undefined"!=typeof b?b:this.pos,"undefined"!=typeof c?c:this.size,this.vars,this.fns,this.nsMap,this.opts)}},e=function(a){X(a),this.node=a},e.prototype={node:null,lookupNamespaceURI:function(a){var b,c,d,e=this.node;switch(a){case"xml":return t;case"xmlns":return u;default:switch(this.node.nodeType){case 9:e=e.documentElement;break;case 1:break;default:e=B(e)}if(null!=e&&1==e.nodeType){if(""==a){if(c=e.getAttribute("xmlns"),null!==c)return c}else{if(e.ownerDocument.documentElement===e&&"object"==typeof e.ownerDocument.namespaces)for(b=0;b<e.ownerDocument.namespaces.length;b++)if(c=e.ownerDocument.namespaces.item(b),c.name==a)return c.urn;for(b=0;b<e.attributes.length;b++)if(e.attributes[b].specified&&"xmlns:"+a==e.attributes[b].nodeName)return e.attributes[b].nodeValue}if(e.ownerDocument.documentElement!==e&&e.parentNode)return d=this.node,this.node=e.parentNode,c=this.lookupNamespaceURI(a),this.node=d,c}return null}}},j={"/":function(a,b){var c,d,e,f,g;if(null===a)d=new q([y(this.node)],"document-order");else if(d=i(this,a),!d instanceof q)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+d.type+")");if(null===b)f=d;else for(f=new q([],"document-order"),c=0;c<d.value.length;c++){if(g=this.clone(d.value[c]),e=i(g,b),!e instanceof q)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+e.type+")");f.append(e)}return f},step:function(a,b){var c,d,e,f,g,h,j;switch(a){case"child":c=new q(z(this.node),"document-order");break;case"descendant":c=new q(A(this.node),"document-order");break;case"parent":e=B(this.node),c=new q(e?[e]:[],"document-order");break;case"ancestor":c=new q(C(this.node),"reverse-document-order");break;case"following-sibling":c=new q(D(this.node),"document-order");break;case"preceding-sibling":c=new q(E(this.node),"reverse-document-order");break;case"following":c=new q(G(this.node),"document-order");break;case"preceding":c=new q(H(this.node),"reverse-document-order");break;case"attribute":c=new q(J(this.node),"document-order");break;case"namespace":c=new q(K.call(this,this.node),"document-order");break;case"self":c=new q([this.node],"document-order");break;case"descendant-or-self":f=A(this.node),f.unshift(this.node),c=new q(f,"document-order");break;case"ancestor-or-self":f=C(this.node),f.unshift(this.node),c=new q(f,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+a)}switch(b.type){case"nodeType":if("node"==b.args[0])break;for(d=c.value.length-1;d>=0;d--)switch(b.args[0]){case"text":3!=c.value[d].nodeType&&4!=c.value[d].nodeType&&c.value.splice(d,1);break;case"comment":8!=c.value[d].nodeType&&c.value.splice(d,1);break;case"processing-instruction":(7!=c.value[d].nodeType||b.args[1].length>0&&i(this,b.args[1][0])!=c.value[d].nodeName)&&c.value.splice(d,1)}break;case"name":switch(g=i(this,b),a){case"attribute":h=2;break;case"namespace":h=13;break;default:h=1}for(d=c.value.length-1;d>=0;d--)c.value[d].nodeType==h?null===g.ns&&null===g.name||(j=P.call(this,c.value[d]),j!==!1&&j.ns===g.ns?null!==g.name&&j.name.toLowerCase()!=g.name.toLowerCase()&&c.value.splice(d,1):c.value.splice(d,1)):c.value.splice(d,1);break;default:throw new Error("NodeTest type not supported in step: "+b.type)}return c},predicate:function(a,b,c){var d,e,f,g,h,j;if(d=i(this,b),!d instanceof q)throw new Error('Expected "node-set", got: '+d.type);switch(a){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":d.sortReverseDocumentOrder();break;default:d.sortDocumentOrder()}for(g=0;g<c.length;g++)for(e=0,h=1,j=d.value.length;e<d.value.length;h++){if(f=i(this.clone(d.value[e],h,j),c[g]),f instanceof p){if(f.value!=h){d.value.splice(e,1);continue}}else if(!f.toBoolean()){d.value.splice(e,1);continue}e++}return d},function:function(a,b){var c,d,e,f,g=[],h=function(a){return(null!==a.ns?"{"+a.ns+"}":"{}")+a.name},j=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=void 0===a[b].t?"object":a[b].t,a[b].r!==!1?a[b].rep===!0&&(c+="+"):c+=a[b].rep===!0?"*":"?",d.push(c);return"("+d.join(", ")+")"},k=0,l=[];if(c=i(this,a),null===c.ns&&(c.ns=""),!this.fns[c.ns]||!this.fns[c.ns][c.name])throw new Error('Function "'+h(c)+'" does not exist.');for(d=this.fns[c.ns][c.name],d.args||(d.args=[]),e=0,k=0;e<d.args.length;k++,e++){if(void 0===b[k]){if(d.args[e].r!==!1)throw new Error('Function "'+h(c)+'" expects '+j(d.args)+".")}else l.push(void 0===d.args[e].t?"object":d.args[e].t);if(d.args[e].rep===!0){for(;k<b.length;k++)l.push(void 0===d.args[e].t?"object":d.args[e].t);break}}if(l.length<b.length)throw new Error('Function "'+h(c)+'" expects '+j(d.args)+".");for(e=0;e<b.length;e++){if(f=i(this,b[e]),"object"!==l[e]&&!f.canConvertTo(l[e]))throw new Error('Function "'+h(c)+'" expects '+j(d.args)+'.Cannot convert "'+f.type+'" to "'+l[e]+'".');g.push(f)}if(result=d.fn.apply(this,g),!result instanceof m)throw new Error('Function "'+h(c)+'" did not return a value that inherits from BaseType.');if("object"!==d.ret&&!result.canConvertTo(d.ret))throw new Error('Function "'+h(c)+'" return "'+result.type+'" type that cannot be converted to "'+d.ret+'".');return result},"|":function(a,b){if(a=i(this,a),b=i(this,b),"undefined"==typeof a||"undefined"==typeof b||!a instanceof q||!b instanceof q)throw new Error('Unable to perform union on non-"node-set" types.');return a.append(b),a},or:function(a,b){return new n(i(this,a).toBoolean()?!0:i(this,b).toBoolean())},and:function(a,b){return new n(i(this,a).toBoolean()?i(this,b).toBoolean():!1)},"=":function(a,b){return T.call(this,i(this,a),i(this,b),"=",function(a,b){return a==b})},"!=":function(a,b){return T.call(this,i(this,a),i(this,b),"!=",function(a,b){return a!=b})},"<=":function(a,b){return T.call(this,i(this,a),i(this,b),"<=",function(a,b){return a<=b})},"<":function(a,b){return T.call(this,i(this,a),i(this,b),"<",function(a,b){return a<b})},">=":function(a,b){return T.call(this,i(this,a),i(this,b),">=",function(a,b){return a>=b})},">":function(a,b){return T.call(this,i(this,a),i(this,b),">",function(a,b){return a>b})},"+":function(a,b){return new p(i(this,a).toNumber()+i(this,b).toNumber())},"-":function(a,b){return new p(i(this,a).toNumber()-i(this,b).toNumber())},div:function(a,b){return new p(i(this,a).toNumber()/i(this,b).toNumber())},mod:function(a,b){return new p(i(this,a).toNumber()%i(this,b).toNumber())},"*":function(a,b){return new p(i(this,a).toNumber()*i(this,b).toNumber())},string:function(a){return new o(a)},number:function(a){return new p(a)},$:function(a){throw new Error("TODO: Not implemented.16")},name:function(a,b){var c=null;if(null!==a&&(c=this.nsMap[a],!c))throw new Error('Namespace prefix "'+a+'" is not mapped to a namespace.');return{ns:c,name:b}}},k={"":{last:{fn:function(){return new p(this.size)},ret:"number"},count:{fn:function(a){return new p(a.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(a){var b,c,d,e=this,f=[],g=[],h=function(a){var b,c=a.split(/[\u0020\u0009\u000D\u000A]+/);for(b=c.length-1;b>=0;b--)0==c[b].length&&c.splice(b,1);return c};if(a instanceof q)for(b=0;b<a.value.length;b++)f.push.apply(f,h(Q(a.value[b])));else a=a.toString(),f=h(a);for(b=f.length-1;b>=0;b--)for(c=b-1;c>=0;c--)if(f[b]==f[c]&&b!=c){f.splice(b,1);break}for(b=0;b<f.length;b++)d=y(this.node).getElementById(f[b]),d&&N.call(this,d)?g.push(d):O(y(this.node),!0,function(a,c){var d=N.call(e,a,c);if(d&&d.nodeValue==f[b])return g.push(a),!0});return new q(g)},args:[{}],ret:"node-set"},"local-name":{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=P.call(this,a.value[0]),b!==!1&&(c=b.name)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=P.call(this,a.value[0]),b!==!1&&null!==b.ns&&(c=b.ns)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=P.call(this,a.value[0]),b!==!1&&(c=b.prefix&&b.prefix.length>0?b.prefix+":"+b.name:b.name)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(a){return 0==arguments.length&&(a=new q([this.node],"document-order")),new o(a.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(a,b){return new n(a.toString().substr(0,(b=b.toString()).length)==b)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(a,b){return new n(a.toString().indexOf(b=b.toString())!=-1)},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(a,b){return a=a.toString(),b=a.indexOf(b.toString()),new o(b==-1?"":a.substr(0,b))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(a,b){var c;return a=a.toString(),b=b.toString(),c=a.indexOf(b),new o(c==-1?"":a.substr(c+b.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(a,b,c){return a=a.toString(),b=Math.round(b.toNumber())-1,new o(isNaN(b)?"":2==arguments.length?a.substring(b<0?0:b):a.substring(b<0?0:b,b+Math.round(c.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(a){return a=0==arguments.length?Q(this.node):a.toString(),new p(a.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(a){return a=0==arguments.length?Q(this.node):a.toString(),new o(a.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(a,b,c){var d,e,f,g="";for(a=a.toString(),b=b.toString(),c=c.toString(),d=0;d<a.length;d++)((e=b.indexOf(f=a.charAt(d)))==-1||(f=c.charAt(e)))&&(g+=f);return new o(g)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},boolean:{fn:function(a){return new n(a.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(a){return new n(!a.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},true:{fn:function(){return new n(!0)},ret:"boolean"},false:{fn:function(){return new n(!1)},ret:"boolean"},lang:{fn:function(a){for(var b,c,d,e,f,g,h,i=this.node,j=a.toString().toLowerCase().split("-");9!=i.nodeType;i=B(i))for(b=J(i),f=0;f<b.length;f++)if(c=b[f].nodeName.split(":"),1===c.length&&(c[1]=c[0],c[0]=""),"lang"==c[1]){if(d=b[f].nodeValue.toLowerCase().split("-"),d.length<j.length)continue;for(h=!0,g=0;g<j.length;g++)if(j[g]!=d[g]){h=!1;break}if(h)for(e=K.call(this,i),g=0;g<e.length;g++)if(e[g].prefix==c[0]&&e[g].nodeValue==t)return new n(!0)}return new n(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(a){return 0==arguments.length&&(a=new q([this.node],"document-order")),new p(a.toNumber())},args:[{t:"object",r:!1}],ret:"number"
},sum:{fn:function(a){var b,c=0;for(a=a.toNodeSet(),b=0;b<a.length;b++)c+=new o(Q(a[b])).toNumber();return new p(c)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(a){return new p(Math.floor(a))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(a){return new p(Math.ceil(a))},args:[{t:"number"}],ret:"number"},sum_jr:{fn:function(a){var b,c;for(sum=0,a=a.toNodeSet(),b=0;b<a.length;b++)c=""==Q(a[b])?"0":Q(a[b]),sum+=new o(c).toNumber();return new p(sum)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(a){if(a){var b,c,d;if(a=a.toNodeSet(),1===a.length){for(b=a[0],d=1,c=b.tagName;b.previousElementSibling&&b.previousElementSibling.tagName===c;)b=b.previousElementSibling,d++;return new p(d)}throw new Error("nodeset provided to position() contained multiple nodes")}return new p(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(a){var b,c,d="";for(b=0;b<arguments.length;b++)c=arguments[b]instanceof q?arguments[b].stringValues().join(""):arguments[b].toString(),d+=c;return new o(d)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(a,b){return b=Math.round(b)||0,new p(Math.round(a*Math.pow(10,b))/Math.pow(10,b))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(a,b){var c;return b=b.toString().trim(),c=a.toString(),new n((" "+c+" ").indexOf(" "+b+" ")!=-1)},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(a,b){var c,d,e;return b=Math.round(b.toNumber()),c=a.toString(),d=c.split(" "),e=b>=0&&b<d.length?d[b]:"",new o(e)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(a){var b=[];return a=a.toNodeSet(),a.length>0?(b=Q(a[0]).trim().split(" "),new p(1==b.length&&""===b[0]?0:b.length)):new p(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(a,b,c){var d,e,f=0;for(a=a.toNumber(),b=b.toNumber(),d=2;d<arguments.length;d++)if(arguments[d]instanceof q)for(e=0;e<arguments[d].stringValues().length;e++)arguments[d].stringValues()[e].toBoolean()===!0&&f++;else arguments[d].toBoolean()===!0&&f++;return new n((a<0||f>=a)&&(b<0||f<=b))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(a,b,c,d){var e,f=[],g=[],h=0;for(a=a.toNumber(),b=b.toNumber(),e=2;e<arguments.length;e+=2)v=arguments[e],w=arguments[e+1],v&&w&&(v instanceof q?f=f.concat(v.stringValues()):f.push(v),w instanceof q?g=g.concat(w.stringValues()):g.push(w));for(e=0;e<f.length;e++)f[e].toBoolean()===!0&&(h+=g[e].toNumber());return new n((a<0||h>=a)&&(b<0||h<=b))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(a){return new n("true"===a.toString().toLowerCase()||"1"===String(a))},args:[{t:"string"}],ret:"boolean"},if:{fn:function(a,b,c){return a.toBoolean()?b:c},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},today:{fn:function(){var a=new Date;return new DateType(new Date(a.getFullYear(),a.getMonth(),a.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(a,b){var c,d;return c=a.toString(),d=new RegExp(b),new n(d.test(c))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return new o(a)},ret:"string"},int:{fn:function(a){return new p(Math.floor(a.toNumber()))},args:[{t:"string"}],ret:"number"},substr:{fn:function(a,b,c){return a=a.toString(),length=a.length,b=Math.round(b.toNumber()),c=c?Math.round(c.toNumber()):length,new o(isNaN(b)?"":a.substring(b<0?length+b:b,c<0?length+c:c))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new p(Math.random().toFixed(15))},ret:"number"},min:{fn:function(a,b){var c,d,e,f,g;for(c=0;c<arguments.length;c++)if(arguments[c]instanceof q)for(g=arguments[c].toNodeSet(),d=0;d<g.length;d++)f=new o(Q(g[d])),f&&(e=e?Math.min(e,f.toNumber()):f.toNumber());else f=new o(arguments[c].toString()),f&&(e=e?Math.min(e,f.toNumber()):f.toNumber());return new p(e)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(a,b){var c,d,e,f,g;for(c=0;c<arguments.length;c++)if(arguments[c]instanceof q)for(g=arguments[c].toNodeSet(),d=0;d<g.length;d++)f=new o(Q(g[d])),f&&(e=e?Math.max(e,f.toNumber()):f.toNumber());else f=new o(arguments[c].toString()),f&&(e=e?Math.max(e,f.toNumber()):f.toNumber());return new p(e)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(a,b){var c,d=[];for(c=1;c<arguments.length;c++)arguments[c]instanceof q?d=d.concat(arguments[c].stringValues()):d.push(arguments[c].toString());for(value=d[0]||"",c=1;c<d.length;c++)value+=a.toString()+d[c];return new o(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(a,b){return a.toString().length>0?a:b},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(a,b){var c,a=new DateType(a),d=a.toDate(),e=b.toString(),f=function(a,b){var d=a.toString(),e=b-d.length;for(c=0;c<e;c++)d="0"+d;return d};if(!a.toBoolean())return new o(d.toString());props={Y:d.getFullYear(),y:d.getFullYear().toString().substring(2,4),m:f(d.getMonth()+1,2),n:d.getMonth()+1,b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()],d:f(d.getDate(),2),e:d.getDate(),H:f(d.getHours(),2),h:d.getHours(),M:f(d.getMinutes(),2),S:f(d.getSeconds(),2),3:f(d.getMilliseconds(),3),a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()]};for(prop in props)e=e.replace("%"+prop,props[prop]);return new o(e)},args:[{t:"date"},{t:"string"}],ret:"string"},"format-date-time":{fn:function(a,b){var c,a=new DateType(a),d=a.toDate(),e=b.toString(),f=function(a,b){var d=a.toString(),e=b-d.length;for(c=0;c<e;c++)d="0"+d;return d};if(!a.toBoolean())return new o(d.toString());props={Y:d.getFullYear(),y:d.getFullYear().toString().substring(2,4),m:f(d.getMonth()+1,2),n:d.getMonth()+1,b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()],d:f(d.getDate(),2),e:d.getDate(),H:f(d.getHours(),2),h:d.getHours(),M:f(d.getMinutes(),2),S:f(d.getSeconds(),2),3:f(d.getMilliseconds(),3),a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()]};for(prop in props)e=e.replace("%"+prop,props[prop]);return new o(e)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(a,b){return new p(Math.pow(a,b))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(a){return new p(Math.sin(a))},args:[{t:"number"}],ret:"number"},cos:{fn:function(a){return new p(Math.cos(a))},args:[{t:"number"}],ret:"number"},tan:{fn:function(a){return new p(Math.tan(a))},args:[{t:"number"}],ret:"number"},acos:{fn:function(a){return new p(Math.acos(a))},args:[{t:"number"}],ret:"number"},asin:{fn:function(a){return new p(Math.asin(a))},args:[{t:"number"}],ret:"number"},atan:{fn:function(a){return new p(Math.atan(a))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(a,b){return new p(Math.atan2(a,b))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(a){return new p("undefined"!=typeof Math.log10?Math.log10(a):Math.log(a)/Math.LN10)},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new p(Math.PI)},args:[],ret:"number"},exp:{fn:function(a){return new p(Math.exp(a))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(a){return new p(Math.sqrt(a))},args:[{t:"number"}],ret:"number"},version:{fn:function(){var a="#document"===this.node.nodeName?this.node.documentElement:this.node.ownerDocument.documentElement,b=a.attributes.version;return new o(b?b.textContent:"")},args:[],ret:"string"},once:{fn:function(a){var b=Q(this.node),c=a.toString();return c="NaN"===c?"":c,new o(""!==b?b:c)},args:[{t:"string"}],ret:"string"},area:{fn:function(a){var b,c,d=[],e=[];if(a instanceof q&&a.value.length>1?a.value.forEach(function(a){d.push(Q(a))}):a instanceof q?d=Q(a.value[0]).split(";"):a instanceof o&&(d=a.value.split(";")),e=d.map(function(a){return a.trim().split(" ")}),c=e.every(function(a){return""!==a[0]&&a[0]>=-90&&a[0]<=90&&""!==a[1]&&a[1]>=-180&&a[1]<=180&&("undefined"==typeof a[2]||!isNaN(a[2]))&&("undefined"==typeof a[3]||!isNaN(a[3])&&a[3]>=0)})){var f,g,h=6378100,i=e.length,j=Math.PI/180;if(b=0,i>2){for(var k=0;k<i;k++)f={lat:e[k][0],lng:e[k][1]},g={lat:e[(k+1)%i][0],lng:e[(k+1)%i][1]},b+=(g.lng-f.lng)*j*(2+Math.sin(f.lat*j)+Math.sin(g.lat*j));b=b*h*h/2}b=Math.abs(Math.round(100*b))/100}else b=Number.NaN;return new p(b)},args:[{t:"string"}],ret:"number"}}},i=function(a,b){if("function"!=typeof j[b.type])throw new Error("Internal Error: Expression type does not exist: "+b.type);return j[b.type].apply(a,b.args)},f=function(b,c,d){switch(c){case f.NUMBER_TYPE:this.resultType=f.NUMBER_TYPE,this.numberValue=d.toNumber();break;case f.STRING_TYPE:this.resultType=f.STRING_TYPE,this.stringValue=d.toString();break;case f.BOOLEAN_TYPE:this.resultType=f.BOOLEAN_TYPE,this.booleanValue=d.toBoolean();break;case f.UNORDERED_NODE_ITERATOR_TYPE:case f.ORDERED_NODE_ITERATOR_TYPE:case f.UNORDERED_NODE_SNAPSHOT_TYPE:case f.ORDERED_NODE_SNAPSHOT_TYPE:case f.ANY_UNORDERED_NODE_TYPE:case f.FIRST_ORDERED_NODE_TYPE:if(!d instanceof q)throw new Error('Expected result of type "node-set", got: "'+d.type+'"');switch(this.resultType=c,c){case f.UNORDERED_NODE_ITERATOR_TYPE:case f.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=d.toNodeSet(),this.snapshotLength=this._value.length;break;case f.ORDERED_NODE_ITERATOR_TYPE:case f.ORDERED_NODE_SNAPSHOT_TYPE:d.sortDocumentOrder(),this._value=d.toNodeSet(),this.snapshotLength=this._value.length;break;case f.ANY_UNORDERED_NODE_TYPE:d=d.toNodeSet(),this.singleNodeValue=d.length?d[0]:null;break;case f.FIRST_ORDERED_NODE_TYPE:d.sortDocumentOrder(),d=d.toNodeSet(),this.singleNodeValue=d.length?d[0]:null;break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+c+")")}break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+c+")")}},f.factory=function(b,c,d){var e;if(c!==f.ANY_TYPE)return new f(b,c,d);if(d instanceof q)e=new f(b,f.UNORDERED_NODE_ITERATOR_TYPE,d);else if(d instanceof p)e=new f(b,f.NUMBER_TYPE,d);else if(d instanceof n)e=new f(b,f.BOOLEAN_TYPE,d);else{if(!(d instanceof o))throw new a(a.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof d);e=new f(b,f.STRING_TYPE,d)}return e},f.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=f.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=f.ORDERED_NODE_ITERATOR_TYPE)throw new a(a.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(b){if(this.resultType!=f.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=f.ORDERED_NODE_SNAPSHOT_TYPE)throw new a(a.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[b]}},f.ANY_TYPE=0,f.NUMBER_TYPE=1,f.STRING_TYPE=2,f.BOOLEAN_TYPE=3,f.UNORDERED_NODE_ITERATOR_TYPE=4,f.ORDERED_NODE_ITERATOR_TYPE=5,f.UNORDERED_NODE_SNAPSHOT_TYPE=6,f.ORDERED_NODE_SNAPSHOT_TYPE=7,f.ANY_UNORDERED_NODE_TYPE=8,f.FIRST_ORDERED_NODE_TYPE=9,g=function(a,b,c){if(1!=c.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=c,this.ownerDocument=c.ownerDocument,this.nodeName="#namespace",this.prefix=a,this.localName=a,this.nodeType=g.XPATH_NAMESPACE_NODE,this.namespaceURI=b,this.nodeValue=b},g.XPATH_NAMESPACE_NODE=13,h={XPathException:a,XPathEvaluator:b,XPathNSResolver:e,XPathExpression:c,XPathResult:f,XPathNamespace:g,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(d){var h=new b(d);return{window:{XPathException:a,XPathExpression:c,XPathNSResolver:e,XPathResult:f,XPathNamespace:g},document:{createExpression:function(){return h.createExpression.apply(h,arguments)},createNSResolver:function(){return h.createNSResolver.apply(h,arguments)},evaluate:function(){return h.evaluate.apply(h,arguments)}}}},bindDomLevel3XPath:function(a,b){var c,d=b||h.createDomLevel3XPathBindings(),e=h.getCurrentDomLevel3XPathBindings(),a=a||document;for(c in d.window)window[c]=d.window[c];for(c in d.document)a[c]=d.document[c];return e}}}();d._parser=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(b){var c,d,e=jd[b];if(e)return e;for(c=b-1;!jd[c];)c--;for(e=jd[c],e={line:e.line,column:e.column,seenCR:e.seenCR};c<b;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return jd[b]=e,e}function d(a,b){var d=c(a),e=c(b);return{start:{offset:a,line:d.line,column:d.column},end:{offset:b,line:e.line,column:e.column}}}function e(a){hd<kd||(hd>kd&&(kd=hd,ld=[]),ld.push(a))}function f(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function g(){var a,b,c,d;return a=hd,b=O(),b!==Y?(c=s(),c!==Y?(d=O(),d!==Y?(id=a,b=_(c),a=b):(hd=a,a=Y)):(hd=a,a=Y)):(hd=a,a=Y),a}function h(){var a;return a=j(),a===Y&&(a=i()),a}function i(){var b,c,d,f,g;return b=p(),b===Y&&(b=hd,47===a.charCodeAt(hd)?(c=aa,hd++):(c=Y,0===md&&e(ba)),c!==Y?(d=hd,f=O(),f!==Y?(g=j(),g!==Y?(f=[f,g],d=f):(hd=d,d=Y)):(hd=d,d=Y),d===Y&&(d=null),d!==Y?(id=b,c=ca(d),b=c):(hd=b,b=Y)):(hd=b,b=Y)),b}function j(){var b,c,d,f,g,h,i,j;if(b=hd,c=k(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(a.substr(hd,2)===da?(h=da,hd+=2):(h=Y,0===md&&e(ea)),h===Y&&(47===a.charCodeAt(hd)?(h=aa,hd++):(h=Y,0===md&&e(ba))),h!==Y?(i=O(),i!==Y?(j=k(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(a.substr(hd,2)===da?(h=da,hd+=2):(h=Y,0===md&&e(ea)),h===Y&&(47===a.charCodeAt(hd)?(h=aa,hd++):(h=Y,0===md&&e(ba))),h!==Y?(i=O(),i!==Y?(j=k(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=fa(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function k(){var a,b,c,d,e,f,g,h;if(a=hd,b=l(),b!==Y)if(c=O(),c!==Y)if(d=n(),d!==Y){for(e=[],f=hd,g=O(),g!==Y?(h=o(),h!==Y?(g=[g,h],f=g):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)e.push(f),f=hd,g=O(),g!==Y?(h=o(),h!==Y?(g=[g,h],f=g):(hd=f,f=Y)):(hd=f,f=Y);e!==Y?(id=a,b=ga(b,d,e),a=b):(hd=a,a=Y)}else hd=a,a=Y;else hd=a,a=Y;else hd=a,a=Y;return a===Y&&(a=q()),a}function l(){var b,c,d,f;return b=hd,c=m(),c!==Y?(d=O(),d!==Y?(a.substr(hd,2)===ha?(f=ha,hd+=2):(f=Y,0===md&&e(ia)),f!==Y?(id=b,c=ja(c),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,c=r(),c!==Y&&(id=b,c=ka(c)),b=c),b}function m(){var b;return a.substr(hd,16)===la?(b=la,hd+=16):(b=Y,0===md&&e(ma)),b===Y&&(a.substr(hd,8)===na?(b=na,hd+=8):(b=Y,0===md&&e(oa)),b===Y&&(a.substr(hd,9)===pa?(b=pa,hd+=9):(b=Y,0===md&&e(qa)),b===Y&&(a.substr(hd,5)===ra?(b=ra,hd+=5):(b=Y,0===md&&e(sa)),b===Y&&(a.substr(hd,18)===ta?(b=ta,hd+=18):(b=Y,0===md&&e(ua)),b===Y&&(a.substr(hd,10)===va?(b=va,hd+=10):(b=Y,0===md&&e(wa)),b===Y&&(a.substr(hd,17)===xa?(b=xa,hd+=17):(b=Y,0===md&&e(ya)),b===Y&&(a.substr(hd,9)===za?(b=za,hd+=9):(b=Y,0===md&&e(Aa)),b===Y&&(a.substr(hd,9)===Ba?(b=Ba,hd+=9):(b=Y,0===md&&e(Ca)),b===Y&&(a.substr(hd,6)===Da?(b=Da,hd+=6):(b=Y,0===md&&e(Ea)),b===Y&&(a.substr(hd,17)===Fa?(b=Fa,hd+=17):(b=Y,0===md&&e(Ga)),b===Y&&(a.substr(hd,9)===Ha?(b=Ha,hd+=9):(b=Y,0===md&&e(Ia)),b===Y&&(a.substr(hd,4)===Ja?(b=Ja,hd+=4):(b=Y,0===md&&e(Ka)))))))))))))),b}function n(){var b,c,d,f,g,h,i,j;return b=hd,c=M(),c!==Y?(d=O(),d!==Y?(40===a.charCodeAt(hd)?(f=La,hd++):(f=Y,0===md&&e(Ma)),f!==Y?(g=O(),g!==Y?(41===a.charCodeAt(hd)?(h=Na,hd++):(h=Y,0===md&&e(Oa)),h!==Y?(id=b,c=Pa(c),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,a.substr(hd,22)===Qa?(c=Qa,hd+=22):(c=Y,0===md&&e(Ra)),c!==Y?(d=O(),d!==Y?(40===a.charCodeAt(hd)?(f=La,hd++):(f=Y,0===md&&e(Ma)),f!==Y?(g=O(),g!==Y?(h=F(),h!==Y?(i=O(),i!==Y?(41===a.charCodeAt(hd)?(j=Na,hd++):(j=Y,0===md&&e(Oa)),j!==Y?(id=b,c=Sa(c,h),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,c=L(),c!==Y&&(id=b,c=Ta(c)),b=c)),b}function o(){var b,c,d,f,g,h;return b=hd,91===a.charCodeAt(hd)?(c=Ua,hd++):(c=Y,0===md&&e(Va)),c!==Y?(d=O(),d!==Y?(f=s(),f!==Y?(g=O(),g!==Y?(93===a.charCodeAt(hd)?(h=Wa,hd++):(h=Y,0===md&&e(Xa)),h!==Y?(id=b,c=Ya(f),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b}function p(){var b,c,d,f;return b=hd,a.substr(hd,2)===da?(c=da,hd+=2):(c=Y,0===md&&e(ea)),c!==Y?(d=O(),d!==Y?(f=j(),f!==Y?(id=b,c=Za(f),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b}function q(){var b,c;return b=hd,a.substr(hd,2)===$a?(c=$a,hd+=2):(c=Y,0===md&&e(_a)),c===Y&&(46===a.charCodeAt(hd)?(c=ab,hd++):(c=Y,0===md&&e(bb))),c!==Y&&(id=b,c=cb(c)),b=c}function r(){var b,c;return b=hd,64===a.charCodeAt(hd)?(c=db,hd++):(c=Y,0===md&&e(eb)),c===Y&&(c=null),c!==Y&&(id=b,c=fb(c)),b=c}function s(){var a,b;return a=hd,b=y(),b!==Y&&(id=a,b=Ya(b)),a=b}function t(){var b,c,d,f,g,h;return b=hd,c=K(),c!==Y&&(id=b,c=gb(c)),b=c,b===Y&&(b=hd,40===a.charCodeAt(hd)?(c=La,hd++):(c=Y,0===md&&e(Ma)),c!==Y?(d=O(),d!==Y?(f=s(),f!==Y?(g=O(),g!==Y?(41===a.charCodeAt(hd)?(h=Na,hd++):(h=Y,0===md&&e(Oa)),h!==Y?(id=b,c=Ya(f),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,c=F(),c!==Y&&(id=b,c=hb(c)),b=c,b===Y&&(b=hd,c=G(),c!==Y&&(id=b,c=ib(c)),b=c,b===Y&&(b=u())))),b}function u(){var b,c,d,f,g,h,i,j,k,l,m,n,o;if(b=hd,c=J(),c!==Y)if(d=O(),d!==Y)if(40===a.charCodeAt(hd)?(f=La,hd++):(f=Y,0===md&&e(Ma)),f!==Y){if(g=hd,h=O(),h!==Y)if(i=s(),i!==Y){for(j=[],k=hd,l=O(),l!==Y?(44===a.charCodeAt(hd)?(m=jb,hd++):(m=Y,0===md&&e(kb)),m!==Y?(n=O(),n!==Y?(o=s(),o!==Y?(l=[l,m,n,o],k=l):(hd=k,k=Y)):(hd=k,k=Y)):(hd=k,k=Y)):(hd=k,k=Y);k!==Y;)j.push(k),k=hd,l=O(),l!==Y?(44===a.charCodeAt(hd)?(m=jb,hd++):(m=Y,0===md&&e(kb)),m!==Y?(n=O(),n!==Y?(o=s(),o!==Y?(l=[l,m,n,o],k=l):(hd=k,k=Y)):(hd=k,k=Y)):(hd=k,k=Y)):(hd=k,k=Y);j!==Y?(h=[h,i,j],g=h):(hd=g,g=Y)}else hd=g,g=Y;else hd=g,g=Y;g===Y&&(g=null),g!==Y?(h=O(),h!==Y?(41===a.charCodeAt(hd)?(i=Na,hd++):(i=Y,0===md&&e(Oa)),i!==Y?(id=b,c=lb(c,g),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)}else hd=b,b=Y;else hd=b,b=Y;else hd=b,b=Y;return b}function v(){var b,c,d,f,g,h,i,j;if(b=hd,c=w(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(124===a.charCodeAt(hd)?(h=mb,hd++):(h=Y,0===md&&e(nb)),h!==Y?(i=O(),i!==Y?(j=w(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(124===a.charCodeAt(hd)?(h=mb,hd++):(h=Y,0===md&&e(nb)),h!==Y?(i=O(),i!==Y?(j=w(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function w(){var b,c,d,f,g,i,k;return b=hd,c=x(),c!==Y?(d=hd,f=O(),f!==Y?(a.substr(hd,2)===da?(g=da,hd+=2):(g=Y,0===md&&e(ea)),g===Y&&(47===a.charCodeAt(hd)?(g=aa,hd++):(g=Y,0===md&&e(ba))),g!==Y?(i=O(),i!==Y?(k=j(),k!==Y?(f=[f,g,i,k],d=f):(hd=d,d=Y)):(hd=d,d=Y)):(hd=d,d=Y)):(hd=d,d=Y),d===Y&&(d=null),d!==Y?(id=b,c=pb(c,d),b=c):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,c=h(),c!==Y&&(id=b,c=qb(c)),b=c),b}function x(){var a,b,c,d,e,f;if(a=hd,b=t(),b!==Y){for(c=[],d=hd,e=O(),e!==Y?(f=o(),f!==Y?(e=[e,f],d=e):(hd=d,d=Y)):(hd=d,d=Y);d!==Y;)c.push(d),d=hd,e=O(),e!==Y?(f=o(),f!==Y?(e=[e,f],d=e):(hd=d,d=Y)):(hd=d,d=Y);c!==Y?(id=a,b=rb(b,c),a=b):(hd=a,a=Y)}else hd=a,a=Y;return a}function y(){var b,c,d,f,g,h,i,j;if(b=hd,c=z(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(a.substr(hd,2)===sb?(h=sb,hd+=2):(h=Y,0===md&&e(tb)),h!==Y?(i=O(),i!==Y?(j=z(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(a.substr(hd,2)===sb?(h=sb,hd+=2):(h=Y,0===md&&e(tb)),h!==Y?(i=O(),i!==Y?(j=z(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function z(){var b,c,d,f,g,h,i,j;if(b=hd,c=A(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(a.substr(hd,3)===ub?(h=ub,hd+=3):(h=Y,0===md&&e(vb)),h!==Y?(i=O(),i!==Y?(j=A(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(a.substr(hd,3)===ub?(h=ub,hd+=3):(h=Y,0===md&&e(vb)),h!==Y?(i=O(),i!==Y?(j=A(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function A(){var b,c,d,f,g,h,i,j;if(b=hd,c=B(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(61===a.charCodeAt(hd)?(h=wb,hd++):(h=Y,0===md&&e(xb)),h===Y&&(a.substr(hd,2)===yb?(h=yb,hd+=2):(h=Y,0===md&&e(zb))),h!==Y?(i=O(),i!==Y?(j=B(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(61===a.charCodeAt(hd)?(h=wb,hd++):(h=Y,0===md&&e(xb)),h===Y&&(a.substr(hd,2)===yb?(h=yb,hd+=2):(h=Y,0===md&&e(zb))),h!==Y?(i=O(),i!==Y?(j=B(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function B(){var b,c,d,f,g,h,i,j;if(b=hd,c=C(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(a.substr(hd,2)===Ab?(h=Ab,hd+=2):(h=Y,0===md&&e(Bb)),h===Y&&(60===a.charCodeAt(hd)?(h=Cb,hd++):(h=Y,0===md&&e(Db)),h===Y&&(a.substr(hd,2)===Eb?(h=Eb,hd+=2):(h=Y,0===md&&e(Fb)),h===Y&&(62===a.charCodeAt(hd)?(h=Gb,hd++):(h=Y,0===md&&e(Hb))))),h!==Y?(i=O(),i!==Y?(j=C(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(a.substr(hd,2)===Ab?(h=Ab,hd+=2):(h=Y,0===md&&e(Bb)),h===Y&&(60===a.charCodeAt(hd)?(h=Cb,hd++):(h=Y,0===md&&e(Db)),h===Y&&(a.substr(hd,2)===Eb?(h=Eb,hd+=2):(h=Y,0===md&&e(Fb)),h===Y&&(62===a.charCodeAt(hd)?(h=Gb,hd++):(h=Y,0===md&&e(Hb))))),h!==Y?(i=O(),i!==Y?(j=C(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function C(){var b,c,d,f,g,h,i,j;if(b=hd,c=D(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(43===a.charCodeAt(hd)?(h=Ib,hd++):(h=Y,0===md&&e(Jb)),h===Y&&(45===a.charCodeAt(hd)?(h=Kb,hd++):(h=Y,0===md&&e(Lb))),h!==Y?(i=O(),i!==Y?(j=D(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(43===a.charCodeAt(hd)?(h=Ib,hd++):(h=Y,0===md&&e(Jb)),h===Y&&(45===a.charCodeAt(hd)?(h=Kb,hd++):(h=Y,0===md&&e(Lb))),h!==Y?(i=O(),i!==Y?(j=D(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function D(){var b,c,d,f,g,h,i,j;if(b=hd,c=E(),c!==Y){for(d=[],f=hd,g=O(),g!==Y?(h=I(),h===Y&&(a.substr(hd,3)===Mb?(h=Mb,hd+=3):(h=Y,0===md&&e(Nb)),h===Y&&(a.substr(hd,3)===Ob?(h=Ob,hd+=3):(h=Y,0===md&&e(Pb)))),h!==Y?(i=O(),i!==Y?(j=E(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);f!==Y;)d.push(f),f=hd,g=O(),g!==Y?(h=I(),h===Y&&(a.substr(hd,3)===Mb?(h=Mb,hd+=3):(h=Y,0===md&&e(Nb)),h===Y&&(a.substr(hd,3)===Ob?(h=Ob,hd+=3):(h=Y,0===md&&e(Pb)))),h!==Y?(i=O(),i!==Y?(j=E(),j!==Y?(g=[g,h,i,j],f=g):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y)):(hd=f,f=Y);d!==Y?(id=b,c=ob(c,d),b=c):(hd=b,b=Y)}else hd=b,b=Y;return b}function E(){var b,c,d,f;return b=hd,c=v(),c!==Y&&(id=b,c=Ya(c)),b=c,b===Y&&(b=hd,45===a.charCodeAt(hd)?(c=Kb,hd++):(c=Y,0===md&&e(Lb)),c!==Y?(d=O(),d!==Y?(f=E(),f!==Y?(id=b,c=Qb(f),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y)),b}function F(){var b,c,d,f;if(b=hd,34===a.charCodeAt(hd)?(c=Rb,hd++):(c=Y,0===md&&e(Sb)),c!==Y){for(d=[],Tb.test(a.charAt(hd))?(f=a.charAt(hd),hd++):(f=Y,0===md&&e(Ub));f!==Y;)d.push(f),Tb.test(a.charAt(hd))?(f=a.charAt(hd),hd++):(f=Y,0===md&&e(Ub));d!==Y?(34===a.charCodeAt(hd)?(f=Rb,hd++):(f=Y,0===md&&e(Sb)),f!==Y?(id=b,c=Vb(d),b=c):(hd=b,b=Y)):(hd=b,b=Y)}else hd=b,b=Y;if(b===Y)if(b=hd,39===a.charCodeAt(hd)?(c=Wb,hd++):(c=Y,0===md&&e(Xb)),c!==Y){for(d=[],Yb.test(a.charAt(hd))?(f=a.charAt(hd),hd++):(f=Y,0===md&&e(Zb));f!==Y;)d.push(f),Yb.test(a.charAt(hd))?(f=a.charAt(hd),hd++):(f=Y,0===md&&e(Zb));d!==Y?(39===a.charCodeAt(hd)?(f=Wb,hd++):(f=Y,0===md&&e(Xb)),f!==Y?(id=b,c=Vb(d),b=c):(hd=b,b=Y)):(hd=b,b=Y)}else hd=b,b=Y;return b}function G(){var b,c,d,f,g;return b=hd,c=H(),c!==Y?(d=hd,46===a.charCodeAt(hd)?(f=ab,hd++):(f=Y,0===md&&e(bb)),f!==Y?(g=H(),g===Y&&(g=null),g!==Y?(f=[f,g],d=f):(hd=d,d=Y)):(hd=d,d=Y),d===Y&&(d=null),d!==Y?(id=b,c=$b(c,d),b=c):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,46===a.charCodeAt(hd)?(c=ab,hd++):(c=Y,0===md&&e(bb)),c!==Y?(d=H(),d!==Y?(id=b,c=_b(d),b=c):(hd=b,b=Y)):(hd=b,b=Y)),b}function H(){var b,c,d;if(b=hd,c=[],ac.test(a.charAt(hd))?(d=a.charAt(hd),hd++):(d=Y,0===md&&e(bc)),d!==Y)for(;d!==Y;)c.push(d),ac.test(a.charAt(hd))?(d=a.charAt(hd),hd++):(d=Y,0===md&&e(bc));else c=Y;return c!==Y&&(id=b,c=cc(c)),b=c}function I(){var b;return 42===a.charCodeAt(hd)?(b=dc,hd++):(b=Y,0===md&&e(ec)),b}function J(){var a,b,c;return a=hd,b=P(),b!==Y?(id=hd,c=fc(b),c=c?void 0:Y,c!==Y?(id=a,b=gc(b),a=b):(hd=a,a=Y)):(hd=a,a=Y),a}function K(){var b,c,d;return b=hd,36===a.charCodeAt(hd)?(c=hc,hd++):(c=Y,0===md&&e(ic)),c!==Y?(d=P(),d!==Y?(id=b,c=jc(d),b=c):(hd=b,b=Y)):(hd=b,b=Y),b}function L(){var b,c,d,f;return b=hd,42===a.charCodeAt(hd)?(c=dc,hd++):(c=Y,0===md&&e(ec)),c!==Y&&(id=b,c=kc()),b=c,b===Y&&(b=hd,c=S(),c!==Y?(58===a.charCodeAt(hd)?(d=lc,hd++):(d=Y,0===md&&e(mc)),d!==Y?(42===a.charCodeAt(hd)?(f=dc,hd++):(f=Y,0===md&&e(ec)),f!==Y?(id=b,c=nc(c),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b===Y&&(b=hd,c=P(),c!==Y&&(id=b,c=oc(c)),b=c)),b}function M(){var b;return a.substr(hd,7)===pc?(b=pc,hd+=7):(b=Y,0===md&&e(qc)),b===Y&&(a.substr(hd,4)===rc?(b=rc,hd+=4):(b=Y,0===md&&e(sc)),b===Y&&(a.substr(hd,22)===Qa?(b=Qa,hd+=22):(b=Y,0===md&&e(Ra)),b===Y&&(a.substr(hd,4)===tc?(b=tc,hd+=4):(b=Y,0===md&&e(uc))))),b}function N(){var b,c;if(b=[],vc.test(a.charAt(hd))?(c=a.charAt(hd),hd++):(c=Y,0===md&&e(wc)),c!==Y)for(;c!==Y;)b.push(c),vc.test(a.charAt(hd))?(c=a.charAt(hd),hd++):(c=Y,0===md&&e(wc));else b=Y;return b}function O(){var a;return a=N(),a===Y&&(a=null),a}function P(){var a,b;return a=hd,b=Q(),b===Y&&(b=R()),b!==Y&&(id=a,b=xc(b)),a=b}function Q(){var b,c,d,f;return b=hd,c=S(),c!==Y?(58===a.charCodeAt(hd)?(d=lc,hd++):(d=Y,0===md&&e(mc)),d!==Y?(f=S(),f!==Y?(id=b,c=yc(c,f),b=c):(hd=b,b=Y)):(hd=b,b=Y)):(hd=b,b=Y),b}function R(){var a,b;return a=hd,b=S(),b!==Y&&(id=a,b=zc(b)),a=b}function S(){var a;return a=V()}function T(){var b;return Ac.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Bc)),b===Y&&(95===a.charCodeAt(hd)?(b=Cc,hd++):(b=Y,0===md&&e(Dc)),b===Y&&(Ec.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Fc)),b===Y&&(Gc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Hc)),b===Y&&(Ic.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Jc)),b===Y&&(Kc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Lc)),b===Y&&(Mc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Nc)),b===Y&&(Oc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Pc)),b===Y&&(Qc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Rc)),b===Y&&(Sc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Tc)),b===Y&&(Uc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Vc)),b===Y&&(Wc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Xc)),b===Y&&(Yc.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(Zc)),b===Y&&($c.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(_c))))))))))))))),b}function U(){var b;return b=T(),b===Y&&(45===a.charCodeAt(hd)?(b=Kb,hd++):(b=Y,0===md&&e(Lb)),b===Y&&(46===a.charCodeAt(hd)?(b=ab,hd++):(b=Y,0===md&&e(bb)),b===Y&&(ac.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(bc)),b===Y&&(ad.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(bd)),b===Y&&(cd.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(dd)),b===Y&&(ed.test(a.charAt(hd))?(b=a.charAt(hd),hd++):(b=Y,0===md&&e(fd)))))))),b}function V(){var a,b,c,d;if(a=hd,b=T(),b!==Y){for(c=[],d=U();d!==Y;)c.push(d),d=U();c!==Y?(id=a,b=gd(b,c),a=b):(hd=a,a=Y)}else hd=a,a=Y;return a}var W,X=arguments.length>1?arguments[1]:{},Y={},Z={XPath:g},$=g,_=function(a){return{tree:a,nsPrefixes:qd}},aa="/",ba={type:"literal",value:"/",description:'"/"'},ca=function(a){return{type:"/",args:[null,a?a[1]:null]}},da="//",ea={type:"literal",value:"//",description:'"//"'},fa=function(a,b){var c;for(c=0;c<b.length;c++)a=td(b[c][1],a,b[c][3]);return a},ga=function(a,b,c){return pd({type:"step",args:[a,b]},a,c,1)},ha="::",ia={type:"literal",value:"::",description:'"::"'},ja=function(a){return a},ka=function(a){return a.length?a:"child"},la="ancestor-or-self",ma={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},na="ancestor",oa={type:"literal",value:"ancestor",description:'"ancestor"'},pa="attribute",qa={type:"literal",value:"attribute",description:'"attribute"'},ra="child",sa={type:"literal",value:"child",description:'"child"'},ta="descendant-or-self",ua={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},va="descendant",wa={type:"literal",value:"descendant",description:'"descendant"'},xa="following-sibling",ya={type:"literal",value:"following-sibling",description:'"following-sibling"'},za="following",Aa={type:"literal",value:"following",description:'"following"'},Ba="namespace",Ca={type:"literal",value:"namespace",description:'"namespace"'},Da="parent",Ea={type:"literal",value:"parent",description:'"parent"'},Fa="preceding-sibling",Ga={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},Ha="preceding",Ia={type:"literal",value:"preceding",description:'"preceding"'},Ja="self",Ka={type:"literal",value:"self",description:'"self"'},La="(",Ma={type:"literal",value:"(",description:'"("'},Na=")",Oa={type:"literal",value:")",description:'")"'},Pa=function(a){return{type:"nodeType",args:[a,[]]}},Qa="processing-instruction",Ra={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},Sa=function(a,b){return{type:"nodeType",args:[a,[b]]}},Ta=function(a){return a},Ua="[",Va={type:"literal",value:"[",description:'"["'},Wa="]",Xa={type:"literal",value:"]",description:'"]"'},Ya=function(a){return a},Za=function(a){return td("//",null,a)},$a="..",_a={type:"literal",value:"..",description:'".."'},ab=".",bb={type:"literal",value:".",description:'"."'
},cb=function(a){var b={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==a&&(b.args[0]="parent"),b},db="@",eb={type:"literal",value:"@",description:'"@"'},fb=function(a){return a?"attribute":""},gb=function(a){return a},hb=function(a){return a},ib=function(a){return a},jb=",",kb={type:"literal",value:",",description:'","'},lb=function(a,b){var c,d=[];if(b)for(d.push(b[1]),c=0;c<b[2].length;c++)d.push(b[2][c][3]);return{type:"function",args:[a,d]}},mb="|",nb={type:"literal",value:"|",description:'"|"'},ob=function(a,b){return od(a,b,1,3)},pb=function(a,b){return b?td(b[1],a,b[3]):a},qb=function(a){return a},rb=function(a,b){return pd(a,"child",b,1)},sb="or",tb={type:"literal",value:"or",description:'"or"'},ub="and",vb={type:"literal",value:"and",description:'"and"'},wb="=",xb={type:"literal",value:"=",description:'"="'},yb="!=",zb={type:"literal",value:"!=",description:'"!="'},Ab="<=",Bb={type:"literal",value:"<=",description:'"<="'},Cb="<",Db={type:"literal",value:"<",description:'"<"'},Eb=">=",Fb={type:"literal",value:">=",description:'">="'},Gb=">",Hb={type:"literal",value:">",description:'">"'},Ib="+",Jb={type:"literal",value:"+",description:'"+"'},Kb="-",Lb={type:"literal",value:"-",description:'"-"'},Mb="div",Nb={type:"literal",value:"div",description:'"div"'},Ob="mod",Pb={type:"literal",value:"mod",description:'"mod"'},Qb=function(a){return{type:"*",args:[{type:"number",args:[-1]},a]}},Rb='"',Sb={type:"literal",value:'"',description:'"\\""'},Tb=/^[^"]/,Ub={type:"class",value:'[^"]',description:'[^"]'},Vb=function(a){return{type:"string",args:[a.join("")]}},Wb="'",Xb={type:"literal",value:"'",description:'"\'"'},Yb=/^[^']/,Zb={type:"class",value:"[^']",description:"[^']"},$b=function(a,b){return{type:"number",args:[b?parseFloat(a+"."+b[1]):parseInt(a)]}},_b=function(a){return{type:"number",args:[parseFloat("."+a)]}},ac=/^[0-9]/,bc={type:"class",value:"[0-9]",description:"[0-9]"},cc=function(a){return a.join("")},dc="*",ec={type:"literal",value:"*",description:'"*"'},fc=function(a){var b;if(null===nd.args[0])for(b=0;b<sd.length;b++)if(nd.args[1]==sd[b])return!1;return!0},gc=function(a){return""===a.args[0]?a={type:a.type,args:[null,a.args[1]]}:rd(a.args[0]),a},hc="$",ic={type:"literal",value:"$",description:'"$"'},jc=function(a){return rd(a.args[0]),{type:"$",args:[a]}},kc=function(){return{type:"name",args:[null,null]}},lc=":",mc={type:"literal",value:":",description:'":"'},nc=function(a){return rd(a),{type:"name",args:[a,null]}},oc=function(a){return rd(a.args[0]),a},pc="comment",qc={type:"literal",value:"comment",description:'"comment"'},rc="text",sc={type:"literal",value:"text",description:'"text"'},tc="node",uc={type:"literal",value:"node",description:'"node"'},vc=/^[ \t\r\n]/,wc={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},xc=function(a){return nd=a,a},yc=function(a,b){return{type:"name",args:[a,b]}},zc=function(a){return{type:"name",args:[null,a]}},Ac=/^[A-Z]/,Bc={type:"class",value:"[A-Z]",description:"[A-Z]"},Cc="_",Dc={type:"literal",value:"_",description:'"_"'},Ec=/^[a-z]/,Fc={type:"class",value:"[a-z]",description:"[a-z]"},Gc=/^[\xC0-\xD6]/,Hc={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},Ic=/^[\xD8-\xF6]/,Jc={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},Kc=/^[\xF8-\u02FF]/,Lc={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},Mc=/^[\u0370-\u037D]/,Nc={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Oc=/^[\u037F-\u1FFF]/,Pc={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Qc=/^[\u200C-\u200D]/,Rc={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Sc=/^[\u2070-\u218F]/,Tc={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},Uc=/^[\u2C00-\u2FEF]/,Vc={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},Wc=/^[\u3001-\uD7FF]/,Xc={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},Yc=/^[\uF900-\uFDCF]/,Zc={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},$c=/^[\uFDF0-\uFFFD]/,_c={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},ad=/^[\xB7]/,bd={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},cd=/^[\u0300-\u036F]/,dd={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},ed=/^[\u203F-\u2040]/,fd={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},gd=function(a,b){return a+b.join("")},hd=0,id=0,jd=[{line:1,column:1,seenCR:!1}],kd=0,ld=[],md=0;if("startRule"in X){if(!(X.startRule in Z))throw new Error("Can't start parsing from rule \""+X.startRule+'".');$=Z[X.startRule]}var nd,od=function(a,b,c,d){var e,f,g={type:"",args:[]};for(g.args.push(a),e=0;e<b.length;e++){switch(typeof c){case"string":g.type=c;break;case"object":for(g.type=b[e][c[0]],f=1;f<c.length;f++)g.type=g.type[c[f]];break;default:g.type=b[e][c]}g.args.push("undefined"==typeof d?b[e]:b[e][d]),g={type:"",args:[g]}}return g.args[0]},pd=function(a,b,c,d){var e,f=[];if(c.length<1)return a;for(e=0;e<c.length;e++)f.push(c[e][d]);return{type:"predicate",args:[b,a,f]}},qd=[],rd=function(a){var b,c=!1;if(null!==a){for(b=0;b<qd.length;b++)if(qd[b]===a){c=!0;break}c||qd.push(a)}},sd=["comment","text","processing-instruction","node"],td=function(a,b,c){return"/"==a?{type:"/",args:[b,c]}:{type:"/",args:[{type:"/",args:[b,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},c]}};if(W=$(),W!==Y&&hd===a.length)return W;throw W!==Y&&hd<a.length&&e({type:"end",description:"end of input"}),f(null,ld,kd<a.length?a.charAt(kd):null,kd<a.length?d(kd,kd+1):d(kd,kd))}return a(b,Error),{SyntaxError:b,parse:c}}(),function(a,c){"function"==typeof define&&define.amd?define([],c):"object"==typeof b&&b.exports?b.exports=c():a.returnExports=c()}(this,function(){return d})},{}],20:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){!function(c){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],c):c("undefined"!=typeof b&&b.exports?a("jquery"):jQuery)}(function(a){function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=k),void 0!==b.click&&void 0===b.tap&&(b.tap=b.click),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(C);e||(e=new c(this,b),d.data(C,e))})}function c(b,c){function d(b){if(!(ja()||a(b.target).closest(c.excludedElements,Sa).length>0)){var d,e=b.originalEvent?b.originalEvent:b,f=e.touches,g=f?f[0]:e;return Ta=v,f?Ua=f.length:c.preventDefaultEvents!==!1&&b.preventDefault(),Ia=0,Ja=null,Ka=null,Qa=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Ra=qa(),ha(),la(0,g),!f||Ua===c.fingers||c.fingers===t||R()?(Wa=za(),2==Ua&&(la(1,f[1]),Ma=Na=ta(Va[0].start,Va[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=J(e,Ta))):d=!1,d===!1?(Ta=y,J(e,Ta),d):(c.hold&&(ab=setTimeout(a.proxy(function(){Sa.trigger("hold",[e.target]),c.hold&&(d=c.hold.call(Sa,e,e.target))},this),c.longTapThreshold)),ka(!0),null)}}function D(a){var b=a.originalEvent?a.originalEvent:a;if(Ta!==x&&Ta!==y&&!ia()){var d,e=b.touches,f=e?e[0]:b,g=ma(f);if(Xa=za(),e&&(Ua=e.length),c.hold&&clearTimeout(ab),Ta=w,2==Ua&&(0==Ma?(la(1,e[1]),Ma=Na=ta(Va[0].start,Va[1].start)):(ma(e[1]),Na=ta(Va[0].end,Va[1].end),Qa=va(Va[0].end,Va[1].end)),Oa=ua(Ma,Na),Pa=Math.abs(Ma-Na)),Ua===c.fingers||c.fingers===t||!e||R()){if(Ja=ya(g.start,g.end),Ka=ya(g.last,g.end),P(a,Ka),Ia=wa(g.start,g.end),La=sa(),oa(Ja,Ia),d=J(b,Ta),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var h=!0;if(c.triggerOnTouchLeave){var i=Aa(this);h=Ba(g.end,i)}!c.triggerOnTouchEnd&&h?Ta=I(w):c.triggerOnTouchLeave&&!h&&(Ta=I(x)),Ta!=y&&Ta!=x||J(b,Ta)}}else Ta=y,J(b,Ta);d===!1&&(Ta=y,J(b,Ta))}}function E(a){var b=a.originalEvent?a.originalEvent:a,d=b.touches;if(d){if(d.length&&!ia())return ga(b),!0;if(d.length&&ia())return!0}return ia()&&(Ua=Za),Xa=za(),La=sa(),M()||!L()?(Ta=y,J(b,Ta)):c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&Ta===w?(c.preventDefaultEvents!==!1&&a.preventDefault(),Ta=x,J(b,Ta)):!c.triggerOnTouchEnd&&Y()?(Ta=x,K(b,Ta,o)):Ta===w&&(Ta=y,J(b,Ta)),ka(!1),null}function F(){Ua=0,Xa=0,Wa=0,Ma=0,Na=0,Oa=1,ha(),ka(!1)}function G(a){var b=a.originalEvent?a.originalEvent:a;c.triggerOnTouchLeave&&(Ta=I(x),J(b,Ta))}function H(){Sa.unbind(Da,d),Sa.unbind(Ha,F),Sa.unbind(Ea,D),Sa.unbind(Fa,E),Ga&&Sa.unbind(Ga,G),ka(!1)}function I(a){var b=a,d=O(),e=L(),f=M();return!d||f?b=y:!e||a!=w||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==x&&c.triggerOnTouchLeave&&(b=y):b=x,b}function J(a,b){var c,d=a.touches;return(V()||U())&&(c=K(a,b,m)),(S()||R())&&c!==!1&&(c=K(a,b,n)),ea()&&c!==!1?c=K(a,b,p):fa()&&c!==!1?c=K(a,b,q):da()&&c!==!1&&(c=K(a,b,o)),b===y&&(U()&&(c=K(a,b,m)),R()&&(c=K(a,b,n)),F(a)),b===x&&(d?d.length||F(a):F(a)),c}function K(b,d,k){var l;if(k==m){if(Sa.trigger("swipeStatus",[d,Ja||null,Ia||0,La||0,Ua,Va,Ka]),c.swipeStatus&&(l=c.swipeStatus.call(Sa,b,d,Ja||null,Ia||0,La||0,Ua,Va,Ka),l===!1))return!1;if(d==x&&T()){if(clearTimeout(_a),clearTimeout(ab),Sa.trigger("swipe",[Ja,Ia,La,Ua,Va,Ka]),c.swipe&&(l=c.swipe.call(Sa,b,Ja,Ia,La,Ua,Va,Ka),l===!1))return!1;switch(Ja){case e:Sa.trigger("swipeLeft",[Ja,Ia,La,Ua,Va,Ka]),c.swipeLeft&&(l=c.swipeLeft.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case f:Sa.trigger("swipeRight",[Ja,Ia,La,Ua,Va,Ka]),c.swipeRight&&(l=c.swipeRight.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case g:Sa.trigger("swipeUp",[Ja,Ia,La,Ua,Va,Ka]),c.swipeUp&&(l=c.swipeUp.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case h:Sa.trigger("swipeDown",[Ja,Ia,La,Ua,Va,Ka]),c.swipeDown&&(l=c.swipeDown.call(Sa,b,Ja,Ia,La,Ua,Va,Ka))}}}if(k==n){if(Sa.trigger("pinchStatus",[d,Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchStatus&&(l=c.pinchStatus.call(Sa,b,d,Qa||null,Pa||0,La||0,Ua,Oa,Va),l===!1))return!1;if(d==x&&Q())switch(Qa){case i:Sa.trigger("pinchIn",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchIn&&(l=c.pinchIn.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va));break;case j:Sa.trigger("pinchOut",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchOut&&(l=c.pinchOut.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va))}}return k==o?d!==y&&d!==x||(clearTimeout(_a),clearTimeout(ab),Z()&&!aa()?($a=za(),_a=setTimeout(a.proxy(function(){$a=null,Sa.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sa,b,b.target))},this),c.doubleTapThreshold)):($a=null,Sa.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sa,b,b.target)))):k==p?d!==y&&d!==x||(clearTimeout(_a),clearTimeout(ab),$a=null,Sa.trigger("doubletap",[b.target]),c.doubleTap&&(l=c.doubleTap.call(Sa,b,b.target))):k==q&&(d!==y&&d!==x||(clearTimeout(_a),$a=null,Sa.trigger("longtap",[b.target]),c.longTap&&(l=c.longTap.call(Sa,b,b.target)))),l}function L(){var a=!0;return null!==c.threshold&&(a=Ia>=c.threshold),a}function M(){var a=!1;return null!==c.cancelThreshold&&null!==Ja&&(a=pa(Ja)-Ia>=c.cancelThreshold),a}function N(){return null===c.pinchThreshold||Pa>=c.pinchThreshold}function O(){var a;return a=!c.maxTimeThreshold||!(La>=c.maxTimeThreshold)}function P(a,b){if(c.preventDefaultEvents!==!1)if(c.allowPageScroll===k)a.preventDefault();else{var d=c.allowPageScroll===l;switch(b){case e:(c.swipeLeft&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case f:(c.swipeRight&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case g:(c.swipeUp&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault();break;case h:(c.swipeDown&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault()}}}function Q(){var a=W(),b=X(),c=N();return a&&b&&c}function R(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function S(){return!(!Q()||!R())}function T(){var a=O(),b=L(),c=W(),d=X(),e=M(),f=!e&&d&&c&&b&&a;return f}function U(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function V(){return!(!T()||!U())}function W(){return Ua===c.fingers||c.fingers===t||!z}function X(){return 0!==Va[0].end.x}function Y(){return!!c.tap}function Z(){return!!c.doubleTap}function $(){return!!c.longTap}function _(){if(null==$a)return!1;var a=za();return Z()&&a-$a<=c.doubleTapThreshold}function aa(){return _()}function ba(){return(1===Ua||!z)&&(isNaN(Ia)||Ia<c.threshold)}function ca(){return La>c.longTapThreshold&&Ia<u}function da(){return!(!ba()||!Y())}function ea(){return!(!_()||!Z())}function fa(){return!(!ca()||!$())}function ga(a){Ya=za(),Za=a.touches.length+1}function ha(){Ya=0,Za=0}function ia(){var a=!1;if(Ya){var b=za()-Ya;b<=c.fingerReleaseThreshold&&(a=!0)}return a}function ja(){return!(Sa.data(C+"_intouch")!==!0)}function ka(a){Sa&&(a===!0?(Sa.bind(Ea,D),Sa.bind(Fa,E),Ga&&Sa.bind(Ga,G)):(Sa.unbind(Ea,D,!1),Sa.unbind(Fa,E,!1),Ga&&Sa.unbind(Ga,G,!1)),Sa.data(C+"_intouch",a===!0))}function la(a,b){var c={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return c.start.x=c.last.x=c.end.x=b.pageX||b.clientX,c.start.y=c.last.y=c.end.y=b.pageY||b.clientY,Va[a]=c,c}function ma(a){var b=void 0!==a.identifier?a.identifier:0,c=na(b);return null===c&&(c=la(b,a)),c.last.x=c.end.x,c.last.y=c.end.y,c.end.x=a.pageX||a.clientX,c.end.y=a.pageY||a.clientY,c}function na(a){return Va[a]||null}function oa(a,b){b=Math.max(b,pa(a)),Ra[a].distance=b}function pa(a){if(Ra[a])return Ra[a].distance}function qa(){var a={};return a[e]=ra(e),a[f]=ra(f),a[g]=ra(g),a[h]=ra(h),a}function ra(a){return{direction:a,distance:0}}function sa(){return Xa-Wa}function ta(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function ua(a,b){var c=b/a*1;return c.toFixed(2)}function va(){return Oa<1?j:i}function wa(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function xa(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return f<0&&(f=360-Math.abs(f)),f}function ya(a,b){var c=xa(a,b);return c<=45&&c>=0?e:c<=360&&c>=315?e:c>=135&&c<=225?f:c>45&&c<135?h:g}function za(){var a=new Date;return a.getTime()}function Aa(b){b=a(b);var c=b.offset(),d={left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()};return d}function Ba(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var c=a.extend({},c),Ca=z||B||!c.fallbackToMouseEvents,Da=Ca?B?A?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ea=Ca?B?A?"MSPointerMove":"pointermove":"touchmove":"mousemove",Fa=Ca?B?A?"MSPointerUp":"pointerup":"touchend":"mouseup",Ga=Ca?B?"mouseleave":null:"mouseleave",Ha=B?A?"MSPointerCancel":"pointercancel":"touchcancel",Ia=0,Ja=null,Ka=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Qa=0,Ra=null,Sa=a(b),Ta="start",Ua=0,Va={},Wa=0,Xa=0,Ya=0,Za=0,$a=0,_a=null,ab=null;try{Sa.bind(Da,d),Sa.bind(Ha,F)}catch(b){a.error("events not supported "+Da+","+Ha+" on jQuery.swipe")}this.enable=function(){return Sa.bind(Da,d),Sa.bind(Ha,F),Sa},this.disable=function(){return H(),Sa},this.destroy=function(){H(),Sa.data(C,null),Sa=null},this.option=function(b,d){if("object"==typeof b)c=a.extend(c,b);else if(void 0!==c[b]){if(void 0===d)return c[b];c[b]=d}else{if(!b)return c;a.error("Option "+b+" does not exist on jQuery.swipe.options")}return null}}var d="1.6.15",e="left",f="right",g="up",h="down",i="in",j="out",k="none",l="auto",m="swipe",n="pinch",o="tap",p="doubletap",q="longtap",r="horizontal",s="vertical",t="all",u=10,v="start",w="move",x="end",y="cancel",z="ontouchstart"in window,A=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!z,B=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!z,C="TouchSwipe",D={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};a.fn.swipe=function(c){var d=a(this),e=d.data(C);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(e&&"object"==typeof c)e.option.apply(this,arguments);else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.version=d,a.fn.swipe.defaults=D,a.fn.swipe.phases={PHASE_START:v,PHASE_MOVE:w,PHASE_END:x,PHASE_CANCEL:y},a.fn.swipe.directions={LEFT:e,RIGHT:f,UP:g,DOWN:h,IN:i,OUT:j},a.fn.swipe.pageScroll={NONE:k,HORIZONTAL:r,VERTICAL:s,AUTO:l},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:t}})},{jquery:22}],22:[function(a,b,c){!function(a,c){"use strict";"object"==typeof b&&"object"==typeof b.exports?b.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||ba;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=oa.type(a);return"function"!==c&&!oa.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,c){return oa.isFunction(b)?oa.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?oa.grep(a,function(a){return a===b!==c}):"string"!=typeof b?oa.grep(a,function(a){return ga.call(b,a)>-1!==c}):ya.test(b)?oa.filter(b,a,c):(b=oa.filter(b,a),oa.grep(a,function(a){return ga.call(b,a)>-1!==c&&1===a.nodeType}))}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return oa.each(a.match(Ea)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&oa.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&oa.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){ba.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),oa.ready()}function l(){this.expando=oa.expando+l.uid++}function m(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:La.test(a)?JSON.parse(a):a)}function n(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ma,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=m(c)}catch(a){}Ka.set(a,b,c)}else c=void 0;return c}function o(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return oa.css(a,b,"")},i=h(),j=c&&c[3]||(oa.cssNumber[b]?"":"px"),k=(oa.cssNumber[b]||"px"!==j&&+i)&&Oa.exec(oa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,oa.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function p(a){var b,c=a.ownerDocument,d=a.nodeName,e=Sa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=oa.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Sa[d]=e,e)}function q(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ja.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Qa(d)&&(e[f]=p(d))):"none"!==c&&(e[f]="none",Ja.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function r(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&oa.nodeName(a,b)?oa.merge([a],c):c}function s(a,b){for(var c=0,d=a.length;c<d;c++)Ja.set(a[c],"globalEval",!b||Ja.get(b[c],"globalEval"))}function t(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===oa.type(f))oa.merge(m,f.nodeType?[f]:f);else if(Xa.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Ua.exec(f)||["",""])[1].toLowerCase(),i=Wa[h]||Wa._default,g.innerHTML=i[1]+oa.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;oa.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&oa.inArray(f,d)>-1)e&&e.push(f);else if(j=oa.contains(f.ownerDocument,f),g=r(l.appendChild(f),"script"),j&&s(g),c)for(k=0;f=g[k++];)Va.test(f.type||"")&&c.push(f);return l}function u(){return!0}function v(){return!1}function w(){try{return ba.activeElement}catch(a){}}function x(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)x(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=v;else if(!e)return a;return 1===f&&(g=e,e=function(a){return oa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=oa.guid++)),a.each(function(){oa.event.add(this,b,e,d,c)})}function y(a,b){return oa.nodeName(a,"table")&&oa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function z(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function A(a){var b=db.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function B(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ja.hasData(a)&&(f=Ja.access(a),g=Ja.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)oa.event.add(b,e,j[e][c])}Ka.hasData(a)&&(h=Ka.access(a),i=oa.extend({},h),Ka.set(b,i))}}function C(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ta.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function D(a,b,d,e){b=ea.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=oa.isFunction(o);if(p||m>1&&"string"==typeof o&&!ma.checkClone&&cb.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),D(f,b,d,e)});if(m&&(f=t(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=oa.map(r(f,"script"),z),i=h.length;l<m;l++)j=f,l!==n&&(j=oa.clone(j,!0,!0),i&&oa.merge(h,r(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,oa.map(h,A),l=0;l<i;l++)j=h[l],Va.test(j.type||"")&&!Ja.access(j,"globalEval")&&oa.contains(k,j)&&(j.src?oa._evalUrl&&oa._evalUrl(j.src):c(j.textContent.replace(eb,""),k))}return a}function E(a,b,c){for(var d,e=b?oa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||oa.cleanData(r(d)),d.parentNode&&(c&&oa.contains(d.ownerDocument,d)&&s(r(d,"script")),d.parentNode.removeChild(d));return a}function F(a,b,c){var d,e,f,g,h=a.style;return c=c||hb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||oa.contains(a.ownerDocument,a)||(g=oa.style(a,b)),!ma.pixelMarginRight()&&gb.test(g)&&fb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function G(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function H(a){if(a in mb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=lb.length;c--;)if(a=lb[c]+b,a in mb)return a}function I(a,b,c){var d=Oa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function J(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=oa.css(a,c+Pa[f],!0,e)),d?("content"===c&&(g-=oa.css(a,"padding"+Pa[f],!0,e)),"margin"!==c&&(g-=oa.css(a,"border"+Pa[f]+"Width",!0,e))):(g+=oa.css(a,"padding"+Pa[f],!0,e),"padding"!==c&&(g+=oa.css(a,"border"+Pa[f]+"Width",!0,e)));return g}function K(a,b,c){var d,e=!0,f=hb(a),g="border-box"===oa.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=F(a,b,f),(d<0||null==d)&&(d=a.style[b]),gb.test(d))return d;e=g&&(ma.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+J(a,b,c||(g?"border":"content"),e,f)+"px"}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(){ob&&(a.requestAnimationFrame(M),oa.fx.tick())}function N(){return a.setTimeout(function(){nb=void 0}),nb=oa.now()}function O(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Pa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function P(a,b,c){for(var d,e=(S.tweeners[b]||[]).concat(S.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function Q(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&Qa(a),r=Ja.get(a,"fxshow");c.queue||(g=oa._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,oa.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],pb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;p=!0}n[d]=r&&r[d]||oa.style(a,d)}if(i=!oa.isEmptyObject(b),i||!oa.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ja.get(a,"display")),k=oa.css(a,"display"),"none"===k&&(j?k=j:(q([a],!0),j=a.style.display||j,k=oa.css(a,"display"),q([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===oa.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(p=r.hidden):r=Ja.access(a,"fxshow",{display:j}),f&&(r.hidden=!p),p&&q([a],!0),m.done(function(){p||q([a]),Ja.remove(a,"fxshow");for(d in n)oa.style(a,d,n[d])})),i=P(p?r[d]:0,d,m),d in r||(r[d]=i.start,p&&(i.end=i.start,i.start=0))}}function R(a,b){var c,d,e,f,g;for(c in a)if(d=oa.camelCase(c),e=b[d],f=a[c],oa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=oa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function S(a,b,c){var d,e,f=0,g=S.prefilters.length,h=oa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||N(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:oa.extend({},b),opts:oa.extend(!0,{specialEasing:{},easing:oa.easing._default},c),originalProperties:b,originalOptions:c,startTime:nb||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=oa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(R(k,j.opts.specialEasing);f<g;f++)if(d=S.prefilters[f].call(j,a,k,j.opts))return oa.isFunction(d.stop)&&(oa._queueHooks(j.elem,j.opts.queue).stop=oa.proxy(d.stop,d)),d;return oa.map(k,P,j),oa.isFunction(j.opts.start)&&j.opts.start.call(a,j),oa.fx.timer(oa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function T(a){var b=a.match(Ea)||[];return b.join(" ")}function U(a){return a.getAttribute&&a.getAttribute("class")||""}function V(a,b,c,d){var e;if(oa.isArray(b))oa.each(b,function(b,e){c||Ab.test(a)?d(a,e):V(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==oa.type(b))d(a,b);else for(e in b)V(a+"["+e+"]",b[e],c,d)}function W(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ea)||[];if(oa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function X(a,b,c,d){function e(h){var i;return f[h]=!0,oa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function Y(a,b){var c,d,e=oa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&oa.extend(!0,a,d),a}function Z(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function $(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function _(a){return oa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var aa=[],ba=a.document,ca=Object.getPrototypeOf,da=aa.slice,ea=aa.concat,fa=aa.push,ga=aa.indexOf,ha={},ia=ha.toString,ja=ha.hasOwnProperty,ka=ja.toString,la=ka.call(Object),ma={},na="3.1.1",oa=function(a,b){return new oa.fn.init(a,b)},pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,qa=/^-ms-/,ra=/-([a-z])/g,sa=function(a,b){return b.toUpperCase()};oa.fn=oa.prototype={jquery:na,constructor:oa,length:0,toArray:function(){return da.call(this)},get:function(a){return null==a?da.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=oa.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return oa.each(this,a)},map:function(a){return this.pushStack(oa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:fa,sort:aa.sort,splice:aa.splice},oa.extend=oa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||oa.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(oa.isPlainObject(d)||(e=oa.isArray(d)))?(e?(e=!1,f=c&&oa.isArray(c)?c:[]):f=c&&oa.isPlainObject(c)?c:{},g[b]=oa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},oa.extend({expando:"jQuery"+(na+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===oa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=oa.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ia.call(a))&&(!(b=ca(a))||(c=ja.call(b,"constructor")&&b.constructor,"function"==typeof c&&ka.call(c)===la))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){
return null==a?a+"":"object"==typeof a||"function"==typeof a?ha[ia.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(qa,"ms-").replace(ra,sa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;e<c&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(pa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?oa.merge(c,"string"==typeof a?[a]:a):fa.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ga.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;g<e;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return ea.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),oa.isFunction(a))return d=da.call(arguments,2),e=function(){return a.apply(b||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||oa.guid++,e},now:Date.now,support:ma}),"function"==typeof Symbol&&(oa.fn[Symbol.iterator]=aa[Symbol.iterator]),oa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ha["[object "+b+"]"]=b.toLowerCase()});var ta=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(a){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ya(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wa=function(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}}):(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);oa.find=ta,oa.expr=ta.selectors,oa.expr[":"]=oa.expr.pseudos,oa.uniqueSort=oa.unique=ta.uniqueSort,oa.text=ta.getText,oa.isXMLDoc=ta.isXML,oa.contains=ta.contains,oa.escapeSelector=ta.escape;var ua=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&oa(a).is(c))break;d.push(a)}return d},va=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},wa=oa.expr.match.needsContext,xa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ya=/^.[^:#\[\.,]*$/;oa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?oa.find.matchesSelector(d,a)?[d]:[]:oa.find.matches(a,oa.grep(b,function(a){return 1===a.nodeType}))},oa.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(oa(a).filter(function(){for(b=0;b<d;b++)if(oa.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)oa.find(a,e[b],c);return d>1?oa.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&wa.test(a)?oa(a):a||[],!1).length}});var za,Aa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ba=oa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||za,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Aa.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof oa?b[0]:b,oa.merge(this,oa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:ba,!0)),xa.test(d[1])&&oa.isPlainObject(b))for(d in b)oa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=ba.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):oa.isFunction(a)?void 0!==c.ready?c.ready(a):a(oa):oa.makeArray(a,this)};Ba.prototype=oa.fn,za=oa(ba);var Ca=/^(?:parents|prev(?:Until|All))/,Da={children:!0,contents:!0,next:!0,prev:!0};oa.fn.extend({has:function(a){var b=oa(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(oa.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&oa(a);if(!wa.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&oa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?oa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ga.call(oa(a),this[0]):ga.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(oa.uniqueSort(oa.merge(this.get(),oa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),oa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ua(a,"parentNode")},parentsUntil:function(a,b,c){return ua(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ua(a,"nextSibling")},prevAll:function(a){return ua(a,"previousSibling")},nextUntil:function(a,b,c){return ua(a,"nextSibling",c)},prevUntil:function(a,b,c){return ua(a,"previousSibling",c)},siblings:function(a){return va((a.parentNode||{}).firstChild,a)},children:function(a){return va(a.firstChild)},contents:function(a){return a.contentDocument||oa.merge([],a.childNodes)}},function(a,b){oa.fn[a]=function(c,d){var e=oa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=oa.filter(d,e)),this.length>1&&(Da[a]||oa.uniqueSort(e),Ca.test(a)&&e.reverse()),this.pushStack(e)}});var Ea=/[^\x20\t\r\n\f]+/g;oa.Callbacks=function(a){a="string"==typeof a?g(a):oa.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function b(c){oa.each(c,function(c,d){oa.isFunction(d)?a.unique&&k.has(d)||f.push(d):d&&d.length&&"string"!==oa.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return oa.each(arguments,function(a,b){for(var c;(c=oa.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?oa.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},oa.extend({Deferred:function(b){var c=[["notify","progress",oa.Callbacks("memory"),oa.Callbacks("memory"),2],["resolve","done",oa.Callbacks("once memory"),oa.Callbacks("once memory"),0,"resolved"],["reject","fail",oa.Callbacks("once memory"),oa.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return oa.Deferred(function(b){oa.each(c,function(c,d){var e=oa.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&oa.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(b<g)){if(a=d.apply(j,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,oa.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){oa.Deferred.exceptionHook&&oa.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(oa.Deferred.getStackHook&&(m.stackTrace=oa.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return oa.Deferred(function(a){c[0][3].add(f(0,a,oa.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,oa.isFunction(b)?b:h)),c[2][3].add(f(0,a,oa.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?oa.extend(a,e):e}},f={};return oa.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=da.call(arguments),f=oa.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?da.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||oa.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Fa=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;oa.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Fa.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},oa.readyException=function(b){a.setTimeout(function(){throw b})};var Ga=oa.Deferred();oa.fn.ready=function(a){return Ga.then(a).catch(function(a){oa.readyException(a)}),this},oa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?oa.readyWait++:oa.ready(!0)},ready:function(a){(a===!0?--oa.readyWait:oa.isReady)||(oa.isReady=!0,a!==!0&&--oa.readyWait>0||Ga.resolveWith(ba,[oa]))}}),oa.ready.then=Ga.then,"complete"===ba.readyState||"loading"!==ba.readyState&&!ba.documentElement.doScroll?a.setTimeout(oa.ready):(ba.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Ha=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===oa.type(c)){e=!0;for(h in c)Ha(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,oa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(oa(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ia=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ia(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[oa.camelCase(b)]=c;else for(d in b)e[oa.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][oa.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){oa.isArray(b)?b=b.map(oa.camelCase):(b=oa.camelCase(b),b=b in d?[b]:b.match(Ea)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||oa.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!oa.isEmptyObject(b)}};var Ja=new l,Ka=new l,La=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ma=/[A-Z]/g;oa.extend({hasData:function(a){return Ka.hasData(a)||Ja.hasData(a)},data:function(a,b,c){return Ka.access(a,b,c)},removeData:function(a,b){Ka.remove(a,b)},_data:function(a,b,c){return Ja.access(a,b,c)},_removeData:function(a,b){Ja.remove(a,b)}}),oa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ka.get(f),1===f.nodeType&&!Ja.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=oa.camelCase(d.slice(5)),n(f,d,e[d])));Ja.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ka.set(this,a)}):Ha(this,function(b){var c;if(f&&void 0===b){if(c=Ka.get(f,a),void 0!==c)return c;if(c=n(f,a),void 0!==c)return c}else this.each(function(){Ka.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ka.remove(this,a)})}}),oa.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ja.get(a,b),c&&(!d||oa.isArray(c)?d=Ja.access(a,b,oa.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=oa.queue(a,b),d=c.length,e=c.shift(),f=oa._queueHooks(a,b),g=function(){oa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ja.get(a,c)||Ja.access(a,c,{empty:oa.Callbacks("once memory").add(function(){Ja.remove(a,[b+"queue",c])})})}}),oa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?oa.queue(this[0],a):void 0===b?this:this.each(function(){var c=oa.queue(this,a,b);oa._queueHooks(this,a),
"fx"===a&&"inprogress"!==c[0]&&oa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){oa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=oa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ja.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Na=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oa=new RegExp("^(?:([+-])=|)("+Na+")([a-z%]*)$","i"),Pa=["Top","Right","Bottom","Left"],Qa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&oa.contains(a.ownerDocument,a)&&"none"===oa.css(a,"display")},Ra=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Sa={};oa.fn.extend({show:function(){return q(this,!0)},hide:function(){return q(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Qa(this)?oa(this).show():oa(this).hide()})}});var Ta=/^(?:checkbox|radio)$/i,Ua=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Va=/^$|\/(?:java|ecma)script/i,Wa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wa.optgroup=Wa.option,Wa.tbody=Wa.tfoot=Wa.colgroup=Wa.caption=Wa.thead,Wa.th=Wa.td;var Xa=/<|&#?\w+;/;!function(){var a=ba.createDocumentFragment(),b=a.appendChild(ba.createElement("div")),c=ba.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ma.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ma.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ya=ba.documentElement,Za=/^key/,$a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_a=/^([^.]*)(?:\.(.+)|)/;oa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ja.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&oa.find.matchesSelector(Ya,e),c.guid||(c.guid=oa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof oa&&oa.event.triggered!==b.type?oa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ea)||[""],j=b.length;j--;)h=_a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=oa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=oa.event.special[n]||{},k=oa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&oa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),oa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ja.hasData(a)&&Ja.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ea)||[""],j=b.length;j--;)if(h=_a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=oa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||oa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)oa.event.remove(a,n+b[j],c,d,!0);oa.isEmptyObject(i)&&Ja.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=oa.event.fix(a),i=new Array(arguments.length),j=(Ja.get(this,"events")||{})[h.type]||[],k=oa.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=oa.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,d=((oa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?oa(e,this).index(j)>-1:oa.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(oa.Event.prototype,a,{enumerable:!0,configurable:!0,get:oa.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[oa.expando]?a:new oa.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oa.nodeName(this,"input"))return this.click(),!1},_default:function(a){return oa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},oa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},oa.Event=function(a,b){return this instanceof oa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?u:v,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&oa.extend(this,b),this.timeStamp=a&&a.timeStamp||oa.now(),void(this[oa.expando]=!0)):new oa.Event(a,b)},oa.Event.prototype={constructor:oa.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=u,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=u,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=u,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},oa.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Za.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&$a.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},oa.event.addProp),oa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){oa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||oa.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),oa.fn.extend({on:function(a,b,c,d){return x(this,a,b,c,d)},one:function(a,b,c,d){return x(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,oa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=v),this.each(function(){oa.event.remove(this,a,c,b)})}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,bb=/<script|<style|<link/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^true\/(.*)/,eb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oa.extend({htmlPrefilter:function(a){return a.replace(ab,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=oa.contains(a.ownerDocument,a);if(!(ma.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||oa.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;d<e;d++)C(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;d<e;d++)B(f[d],g[d]);else B(a,h);return g=r(h,"script"),g.length>0&&s(g,!i&&r(a,"script")),h},cleanData:function(a){for(var b,c,d,e=oa.event.special,f=0;void 0!==(c=a[f]);f++)if(Ia(c)){if(b=c[Ja.expando]){if(b.events)for(d in b.events)e[d]?oa.event.remove(c,d):oa.removeEvent(c,d,b.handle);c[Ja.expando]=void 0}c[Ka.expando]&&(c[Ka.expando]=void 0)}}}),oa.fn.extend({detach:function(a){return E(this,a,!0)},remove:function(a){return E(this,a)},text:function(a){return Ha(this,function(a){return void 0===a?oa.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.appendChild(a)}})},prepend:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(oa.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return oa.clone(this,a,b)})},html:function(a){return Ha(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!bb.test(a)&&!Wa[(Ua.exec(a)||["",""])[1].toLowerCase()]){a=oa.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(oa.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return D(this,arguments,function(b){var c=this.parentNode;oa.inArray(this,a)<0&&(oa.cleanData(r(this)),c&&c.replaceChild(b,this))},a)}}),oa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){oa.fn[a]=function(a){for(var c,d=[],e=oa(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),oa(e[g])[b](c),fa.apply(d,c.get());return this.pushStack(d)}});var fb=/^margin/,gb=new RegExp("^("+Na+")(?!px)[a-z%]+$","i"),hb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ya.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Ya.removeChild(g),h=null}}var c,d,e,f,g=ba.createElement("div"),h=ba.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ma.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),oa.extend(ma,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var ib=/^(none|table(?!-c[ea]).+)/,jb={position:"absolute",visibility:"hidden",display:"block"},kb={letterSpacing:"0",fontWeight:"400"},lb=["Webkit","Moz","ms"],mb=ba.createElement("div").style;oa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=F(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=oa.camelCase(b),i=a.style;return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Oa.exec(c))&&e[1]&&(c=o(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(oa.cssNumber[h]?"":"px")),ma.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=oa.camelCase(b);return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=F(a,b,d)),"normal"===e&&b in kb&&(e=kb[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),oa.each(["height","width"],function(a,b){oa.cssHooks[b]={get:function(a,c,d){if(c)return!ib.test(oa.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?K(a,b,d):Ra(a,jb,function(){return K(a,b,d)})},set:function(a,c,d){var e,f=d&&hb(a),g=d&&J(a,b,d,"border-box"===oa.css(a,"boxSizing",!1,f),f);return g&&(e=Oa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=oa.css(a,b)),I(a,c,g)}}}),oa.cssHooks.marginLeft=G(ma.reliableMarginLeft,function(a,b){if(b)return(parseFloat(F(a,"marginLeft"))||a.getBoundingClientRect().left-Ra(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),oa.each({margin:"",padding:"",border:"Width"},function(a,b){oa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Pa[d]+b]=f[d]||f[d-2]||f[0];return e}},fb.test(a)||(oa.cssHooks[a+b].set=I)}),oa.fn.extend({css:function(a,b){return Ha(this,function(a,b,c){var d,e,f={},g=0;if(oa.isArray(b)){for(d=hb(a),e=b.length;g<e;g++)f[b[g]]=oa.css(a,b[g],!1,d);return f}return void 0!==c?oa.style(a,b,c):oa.css(a,b)},a,b,arguments.length>1)}}),oa.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||oa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(oa.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.options.duration?this.pos=b=oa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=oa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){oa.fx.step[a.prop]?oa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[oa.cssProps[a.prop]]&&!oa.cssHooks[a.prop]?a.elem[a.prop]=a.now:oa.style(a.elem,a.prop,a.now+a.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},oa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},oa.fx=L.prototype.init,oa.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=/queueHooks$/;oa.Animation=oa.extend(S,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return o(c.elem,a,Oa.exec(b),c),c}]},tweener:function(a,b){oa.isFunction(a)?(b=a,a=["*"]):a=a.match(Ea);for(var c,d=0,e=a.length;d<e;d++)c=a[d],S.tweeners[c]=S.tweeners[c]||[],S.tweeners[c].unshift(b)},prefilters:[Q],prefilter:function(a,b){b?S.prefilters.unshift(a):S.prefilters.push(a)}}),oa.speed=function(a,b,c){var d=a&&"object"==typeof a?oa.extend({},a):{complete:c||!c&&b||oa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!oa.isFunction(b)&&b};return oa.fx.off||ba.hidden?d.duration=0:"number"!=typeof d.duration&&(d.duration in oa.fx.speeds?d.duration=oa.fx.speeds[d.duration]:d.duration=oa.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){oa.isFunction(d.old)&&d.old.call(this),d.queue&&oa.dequeue(this,d.queue)},d},oa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Qa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=oa.isEmptyObject(a),f=oa.speed(b,c,d),g=function(){var b=S(this,oa.extend({},a),f);(e||Ja.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=oa.timers,g=Ja.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&qb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||oa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ja.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=oa.timers,g=d?d.length:0;for(c.finish=!0,oa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),oa.each(["toggle","show","hide"],function(a,b){var c=oa.fn[b];oa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(O(b,!0),a,d,e)}}),oa.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){oa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),oa.timers=[],oa.fx.tick=function(){var a,b=0,c=oa.timers;for(nb=oa.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||oa.fx.stop(),nb=void 0},oa.fx.timer=function(a){oa.timers.push(a),a()?oa.fx.start():oa.timers.pop()},oa.fx.interval=13,oa.fx.start=function(){ob||(ob=a.requestAnimationFrame?a.requestAnimationFrame(M):a.setInterval(oa.fx.tick,oa.fx.interval))},oa.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(ob):a.clearInterval(ob),ob=null},oa.fx.speeds={slow:600,fast:200,_default:400},oa.fn.delay=function(b,c){return b=oa.fx?oa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=ba.createElement("input"),b=ba.createElement("select"),c=b.appendChild(ba.createElement("option"));a.type="checkbox",ma.checkOn=""!==a.value,ma.optSelected=c.selected,a=ba.createElement("input"),a.value="t",a.type="radio",ma.radioValue="t"===a.value}();var rb,sb=oa.expr.attrHandle;oa.fn.extend({attr:function(a,b){return Ha(this,oa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){oa.removeAttr(this,a)})}}),oa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?oa.prop(a,b,c):(1===f&&oa.isXMLDoc(a)||(e=oa.attrHooks[b.toLowerCase()]||(oa.expr.match.bool.test(b)?rb:void 0)),void 0!==c?null===c?void oa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=oa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ma.radioValue&&"radio"===b&&oa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ea);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),rb={set:function(a,b,c){return b===!1?oa.removeAttr(a,c):a.setAttribute(c,c),c}},oa.each(oa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=sb[b]||oa.find.attr;sb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=sb[g],sb[g]=e,e=null!=c(a,b,d)?g:null,sb[g]=f),e}});var tb=/^(?:input|select|textarea|button)$/i,ub=/^(?:a|area)$/i;oa.fn.extend({prop:function(a,b){return Ha(this,oa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[oa.propFix[a]||a]})}}),oa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&oa.isXMLDoc(a)||(b=oa.propFix[b]||b,e=oa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=oa.find.attr(a,"tabindex");return b?parseInt(b,10):tb.test(a.nodeName)||ub.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ma.optSelected||(oa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),oa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oa.propFix[this.toLowerCase()]=this}),oa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).addClass(a.call(this,b,U(this)))});if("string"==typeof a&&a)for(b=a.match(Ea)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).removeClass(a.call(this,b,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ea)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):oa.isFunction(a)?this.each(function(c){oa(this).toggleClass(a.call(this,c,U(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=oa(this),f=a.match(Ea)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=U(this),b&&Ja.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ja.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+T(U(c))+" ").indexOf(b)>-1)return!0;return!1}});var vb=/\r/g;oa.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=oa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,oa(this).val()):a,null==e?e="":"number"==typeof e?e+="":oa.isArray(e)&&(e=oa.map(e,function(a){return null==a?"":a+""})),b=oa.valHooks[this.type]||oa.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=oa.valHooks[e.type]||oa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(vb,""):null==c?"":c)}}}),oa.extend({valHooks:{option:{get:function(a){var b=oa.find.attr(a,"value");return null!=b?b:T(oa.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!oa.nodeName(c.parentNode,"optgroup"))){if(b=oa(c).val(),g)return b;h.push(b)}return h},set:function(a,b){for(var c,d,e=a.options,f=oa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=oa.inArray(oa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),oa.each(["radio","checkbox"],function(){oa.valHooks[this]={set:function(a,b){if(oa.isArray(b))return a.checked=oa.inArray(oa(a).val(),b)>-1}},ma.checkOn||(oa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;oa.extend(oa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ba],n=ja.call(b,"type")?b.type:b,o=ja.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||ba,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+oa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[oa.expando]?b:new oa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:oa.makeArray(c,[b]),l=oa.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!oa.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||ba)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ja.get(g,"events")||{})[b.type]&&Ja.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ia(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ia(d)||j&&oa.isFunction(d[n])&&!oa.isWindow(d)&&(h=d[j],h&&(d[j]=null),oa.event.triggered=n,d[n](),oa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=oa.extend(new oa.Event,c,{type:a,isSimulated:!0});oa.event.trigger(d,null,b)}}),oa.fn.extend({trigger:function(a,b){return this.each(function(){oa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return oa.event.trigger(a,b,c,!0)}}),oa.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){oa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),oa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ma.focusin="onfocusin"in a,ma.focusin||oa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){oa.event.simulate(b,a.target,oa.event.fix(a))};oa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ja.access(d,b);e||d.addEventListener(a,c,!0),Ja.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ja.access(d,b)-1;e?Ja.access(d,b,e):(d.removeEventListener(a,c,!0),Ja.remove(d,b))}}});var xb=a.location,yb=oa.now(),zb=/\?/;oa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||oa.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;oa.param=function(a,b){var c,d=[],e=function(a,b){var c=oa.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(oa.isArray(a)||a.jquery&&!oa.isPlainObject(a))oa.each(a,function(){e(this.name,this.value)});else for(c in a)V(c,a[c],b,e);return d.join("&")},oa.fn.extend({serialize:function(){return oa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=oa.prop(this,"elements");return a?oa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!oa(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ta.test(a))}).map(function(a,b){var c=oa(this).val();return null==c?null:oa.isArray(c)?oa.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=ba.createElement("a");Ob.href=xb.href,oa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":oa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Y(Y(a,oa.ajaxSettings),b):Y(oa.ajaxSettings,a)},ajaxPrefilter:W(Lb),ajaxTransport:W(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=Z(o,x,d)),u=$(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(oa.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(oa.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--oa.active||oa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=oa.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?oa(p):oa.event,r=oa.Deferred(),s=oa.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ea)||[""],null==o.crossDomain){j=ba.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(a){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=oa.param(o.data,o.traditional)),X(Lb,o,c,x),k)return x;l=oa.event&&o.global,l&&0===oa.active++&&oa.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Gb,"$1"),n=(zb.test(f)?"&":"?")+"_="+yb++ +n),o.url=f+n),o.ifModified&&(oa.lastModified[f]&&x.setRequestHeader("If-Modified-Since",oa.lastModified[f]),oa.etag[f]&&x.setRequestHeader("If-None-Match",oa.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);
for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=X(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(a){if(k)throw a;d(-1,a)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return oa.get(a,b,c,"json")},getScript:function(a,b){return oa.get(a,void 0,b,"script")}}),oa.each(["get","post"],function(a,b){oa[b]=function(a,c,d,e){return oa.isFunction(c)&&(e=e||d,d=c,c=void 0),oa.ajax(oa.extend({url:a,type:b,dataType:e,data:c,success:d},oa.isPlainObject(a)&&a))}}),oa._evalUrl=function(a){return oa.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},oa.fn.extend({wrapAll:function(a){var b;return this[0]&&(oa.isFunction(a)&&(a=a.call(this[0])),b=oa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return oa.isFunction(a)?this.each(function(b){oa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=oa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=oa.isFunction(a);return this.each(function(c){oa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){oa(this).replaceWith(this.childNodes)}),this}}),oa.expr.pseudos.hidden=function(a){return!oa.expr.pseudos.visible(a)},oa.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},oa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var Pb={0:200,1223:204},Qb=oa.ajaxSettings.xhr();ma.cors=!!Qb&&"withCredentials"in Qb,ma.ajax=Qb=!!Qb,oa.ajaxTransport(function(b){var c,d;if(ma.cors||Qb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),oa.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),oa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return oa.globalEval(a),a}}}),oa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),oa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=oa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),ba.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;oa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||oa.expando+"_"+yb++;return this[a]=!0,a}}),oa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=oa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):b.jsonp!==!1&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||oa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?oa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&oa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ma.createHTMLDocument=function(){var a=ba.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),oa.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ma.createHTMLDocument?(b=ba.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=ba.location.href,b.head.appendChild(d)):b=ba),e=xa.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=t([a],b,f),f&&f.length&&oa(f).remove(),oa.merge([],e.childNodes))},oa.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=T(a.slice(h)),a=a.slice(0,h)),oa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&oa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?oa("<div>").append(oa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},oa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){oa.fn[b]=function(a){return this.on(b,a)}}),oa.expr.pseudos.animated=function(a){return oa.grep(oa.timers,function(b){return a===b.elem}).length},oa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=oa.css(a,"position"),l=oa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=oa.css(a,"top"),i=oa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),oa.isFunction(b)&&(b=b.call(a,c,oa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},oa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){oa.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=_(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===oa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),oa.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+oa.css(a[0],"borderTopWidth",!0),left:d.left+oa.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-oa.css(c,"marginTop",!0),left:b.left-d.left-oa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===oa.css(a,"position");)a=a.offsetParent;return a||Ya})}}),oa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;oa.fn[a]=function(d){return Ha(this,function(a,d,e){var f=_(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),oa.each(["top","left"],function(a,b){oa.cssHooks[b]=G(ma.pixelPosition,function(a,c){if(c)return c=F(a,b),gb.test(c)?oa(a).position()[b]+"px":c})}),oa.each({Height:"height",Width:"width"},function(a,b){oa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){oa.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Ha(this,function(b,c,e){var f;return oa.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?oa.css(b,c,h):oa.style(b,c,e,h)},b,g?e:void 0,g)}})}),oa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),oa.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oa});var Tb=a.jQuery,Ub=a.$;return oa.noConflict=function(b){return a.$===oa&&(a.$=Ub),b&&a.jQuery===oa&&(a.jQuery=Tb),oa},b||(a.jQuery=a.$=oa),oa})},{}],23:[function(a,b,c){!function(a,c,d){var e=a.L,f={};f.version="0.7.7","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return a.L=e,this},a.L=f,f.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;c<d;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=f.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&b.indexOf("?")!==-1?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,d,g,h){return b=f.bind(b,d),g&&e===c?void b():e.call(a,b,h)},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=f.extend({},d.options,a.options)),f.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;a<b;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){f.extend(this.prototype,a)},f.Class.mergeOptions=function(a){f.extend(this.prototype.options,a)},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var g="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m=this[g]=this[g]||{},n=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;d<e;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[g];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[g])return this;if(!a)return this.clearAllEventListeners();if(f.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m,n,o=this[g],p=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;d<e;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=f.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,e,h,i,j=f.Util.extend({},b,{type:a,target:this}),k=this[g];if(k[a])for(c=k[a].slice(),d=0,e=c.length;d<e;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,e=c.length;d<e;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=f.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var b="ActiveXObject"in a,e=b&&!c.addEventListener,g=navigator.userAgent.toLowerCase(),h=g.indexOf("webkit")!==-1,i=g.indexOf("chrome")!==-1,j=g.indexOf("phantom")!==-1,k=g.indexOf("android")!==-1,l=g.search("android [23]")!==-1,m=g.indexOf("gecko")!==-1,n=typeof orientation!=d+"",o=!a.PointerEvent&&a.MSPointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=c.documentElement,s=b&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&(p||"ontouchstart"in a||a.DocumentTouch&&c instanceof a.DocumentTouch);f.Browser={ie:b,ielt9:e,webkit:h,gecko:m&&!h&&!a.opera&&!b,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=f.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b];if(!d&&a.currentStyle&&(d=a.currentStyle[b]),(!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},getViewportOffset:function(a){var b,d=0,e=0,g=a,h=c.body,i=c.documentElement;do{if(d+=g.offsetTop||0,e+=g.offsetLeft||0,d+=parseInt(f.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(f.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=f.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===b)break;if("fixed"===b){d+=h.scrollTop||i.scrollTop||0,e+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===b&&!g.offsetLeft){var j=f.DomUtil.getStyle(g,"width"),k=f.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();"none"===j&&"none"===k||(e+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,e-=g.scrollLeft||0,g=g.parentNode}while(g);return new f.Point(e,d)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(c.body,"direction")),f.DomUtil._docIsLtr},create:function(a,b,d){var e=c.createElement(a);return e.className=b,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==d)return a.classList.contains(b);var c=f.DomUtil._getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==d)for(var c=f.Util.splitWords(b),e=0,g=c.length;e<g;e++)a.classList.add(c[e]);else if(!f.DomUtil.hasClass(a,b)){var h=f.DomUtil._getClass(a);f.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==d?a.classList.remove(b):f.DomUtil._setClass(a,f.Util.trim((" "+f.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===d?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===d?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(a){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},getTranslateString:function(a){var b=f.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=f.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&f.Browser.any3d?a.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in c)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(a,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(a,"selectstart",f.DomEvent.preventDefault)}});else{var b=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(b){var a=c.documentElement.style;this._userSelect=a[b],a[b]="none"}},enableTextSelection:function(){b&&(c.documentElement.style[b]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(a,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(a,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(a,b,c){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,c!==d&&(this.alt=parseFloat(c))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(a){if(!a)return!1;a=f.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=f.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=f.latLng(a);var b=6378137,c=f.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,e=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(e/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(c<a||c===b?b:a),new f.LatLng(this.lat,c)}},f.latLng=function(a,b){return a instanceof f.LatLng?a:f.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new f.LatLng(a[0],a[1],a[2]):null:a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===d?null:new f.LatLng(a,b)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=f.latLng(a);return a=null!==b?b:f.latLngBounds(a),a instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new f.LatLng(a.lat,a.lng),this._northEast=new f.LatLng(a.lat,a.lng)):a instanceof f.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof f.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return!a||a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new f.Point(e,g)},unproject:function(a){var b=f.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new f.LatLng(d,c)}},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)}},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return f.point(b,b)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===d?this.getZoom():b,this._resetView(f.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d));e=b.maxZoom?Math.min(b.maxZoom,e):e;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return this.setView(j,e,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(f.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=f.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=f.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return!!a&&f.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),g=d.subtract(e);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=d}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===d?this._layersMinZoom===d?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===d?this._layersMaxZoom===d?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a);var d,e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;
c=f.point(c||[0,0]);do e++,d=this.project(j,e).subtract(this.project(i,e)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&e<=g);return k&&b?null:b?e:e-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new f.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,b),f.DomUtil.addClass(a.shadowPane,b),f.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return f.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var e=this._zoom!==b;d||(this.fire("movestart"),e&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(e||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(c=Math.max(c,f.options.maxZoom))}a===d?this._layersMaxZoom=this._layersMinZoom=d:(this._layersMaxZoom=c,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){b=b||"on",f.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=e.length;c<d;c++)f.DomEvent[b](this._container,e[c],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!f.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&f.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),e=this.layerPointToLatLng(d);this.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),g=new f.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new f.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),e=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-e.x),h=this._rebound(d.y,-e.y);return new f.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),f.map=function(a,b){return new f.Map(a,b)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*e,i=d*b,j=g/e,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-e*Math.log(m),new f.Point(h,i)},unproject:function(a){for(var b,c=f.LatLng.RAD_TO_DEG,d=this.R_MAJOR,e=this.R_MINOR,g=a.x*c/d,h=e/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new f.LatLng(k*c,g)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=f.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new f.Transformation(c,.5,-c,.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(a,b){b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=f.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-(1/0));for(d=0,e=f.length;d<e;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(f.Browser.ielt9)for(a in b)f.DomUtil.setOpacity(b[a],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",b,this._container),this._tileContainer=f.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var e=f.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(e),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(e)}}},_addTilesFromCenterOut:function(a){var b,d,e,g=[],h=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(d=a.min.x;d<=a.max.x;d++)e=new f.Point(d,b),this._tileShouldBeLoaded(e)&&g.push(e);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=c.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;d<i;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=this._getTileSize(),e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(f.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),f.Browser.android||(b.onload=null,b.src=f.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();f.DomUtil.setPosition(d,c,f.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return f.Util.template(this._url,f.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=f.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==d&&f.DomUtil.setOpacity(a,this.options.opacity),f.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&f.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(c[e]=b[e]);this.wmsParams=c,f.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),e=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(e,a.z)),i=this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=f.Util.template(this._url,{s:this._getSubdomain(a)});return j+f.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(a){f.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=f.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=f.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),f.tileLayer.canvas=function(a){return new f.TileLayer.Canvas(a)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&f.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),e=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(e,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);f.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({options:{className:""},initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,e=f.point(d[b+"Size"]);c="shadow"===b?f.point(d.shadowAnchor||d.iconAnchor):f.point(d.iconAnchor),!c&&e&&(c=e.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||c.createElement("img"),b.src=a,b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];f.Browser.retina&&"icon"===a&&(a+="-2x");var c=f.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),f.Icon.Default.imagePath=function(){var a,b,d,e,f,g=c.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,b=g.length;a<b;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),g=!1;e!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt)),f.DomUtil.addClass(e,d),a.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),a.riseOnHover&&f.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&f.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(a,"leaflet-clickable"),f.DomEvent.on(a,"click",this._onMouseClick,this),f.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)f.DomEvent.on(a,b[c],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&f.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&f.DomEvent.preventDefault(a),"mousedown"!==a.type?f.DomEvent.stopPropagation(a):f.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;return d.html!==!1?b.innerHTML=d.html:b.innerHTML="",d.bgPos&&(b.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){f.setOptions(this,a),this._source=b,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&f.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=f.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=f.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",f.DomEvent.disableClickPropagation(a),f.DomEvent.on(a,"click",this._onCloseButtonClick,this));var e=this._wrapper=f.DomUtil.create("div",b+"-content-wrapper",d);f.DomEvent.disableClickPropagation(e),this._contentNode=f.DomUtil.create("div",b+"-content",e),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(e,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",b+"-tip-container",d),this._tip=f.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=f.point(this.options.offset);b&&f.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);f.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new f.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(f.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(d),g=f.point(this.options.autoPanPadding),h=f.point(this.options.autoPanPaddingTopLeft||g),i=f.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;e.x+c+i.x>j.x&&(k=e.x+c-j.x+i.x),e.x-k-h.x<0&&(k=e.x-h.x),e.y+b+i.y>j.y&&(l=e.y+b-j.y+i.y),e.y-l-h.y<0&&(l=e.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof f.Popup)){var d=a;a=new f.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),
a&&(this.removeLayer(a),a._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=f.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(f.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=f.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof f.Popup?(f.setOptions(a,b),this._popup=a,a._source=this):this._popup=new f.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;b<c;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),"off"in a&&a.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof f.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=f.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:function(){var b=f.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){f.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return f.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var a=f.Path.CLIP_PADDING,b=this.getSize(),c=f.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),e=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new f.Bounds(d,e)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!c.createElementNS||!c.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return c.createElementNS(f.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!f.Browser.svg&&f.Browser.vml||f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)f.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this._map&&this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),e=b.layerPointToLatLng(d);this.fire(a.type,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&f.DomEvent.preventDefault(a),"mousemove"!==a.type&&f.DomEvent.stopPropagation(a)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,e=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;f.Browser.mobileWebkit&&h.removeChild(g),f.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",e),g.setAttribute("viewBox",[b.x,b.y,d,e].join(" ")),f.Browser.mobileWebkit&&h.appendChild(g)}}}),f.Path.include({bindPopup:function(a,b){return a instanceof f.Popup?this._popup=a:(this._popup&&!b||(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(a){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");f.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=f.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=c.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return f.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color),a.lineCap&&(this._ctx.lineCap=a.lineCap),a.lineJoin&&(this._ctx.lineJoin=a.lineJoin)},_drawPath:function(){var a,b,c,d,e,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;a<c;a++){for(b=0,d=this._parts[a].length;b<d;b++)e=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](e.x,e.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill(b.fillRule||"evenodd")),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(a){this._containsPoint(a.layerPoint)&&this.fire(a.type,a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),f.Map.include(f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var a,b=this._pathRoot;b||(b=this._pathRoot=c.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;f.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;g<c;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;g<=e-1;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;d<f;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return e<f-1&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var e=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new f.Point(a.x+e*(i.y-a.y)/g,i.y):4&c?new f.Point(a.x+e*(h.y-a.y)/g,h.y):2&c?new f.Point(i.x,a.y+g*(i.x-a.x)/e):1&c?new f.Point(h.x,a.y+g*(h.x-a.x)/e):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-g)*i+(a.y-h)*j)/k,e>1?(g=c.x,h=c.y):e>0&&(g+=i*e,h+=j*e)),i=a.x-g,j=a.y-h,d?i*i+j*j:new f.Point(g,h)}},f.Polyline=f.Path.extend({initialize:function(a,b){f.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;a<b;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";a<b;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(f.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,e=this._parts,g=null,h=0,i=e.length;h<i;h++)for(var j=e[h],k=1,l=j.length;k<l;k++){b=j[k-1],c=j[k];var m=f.LineUtil._sqClosestPointOnSegment(a,b,c,!0);m<d&&(d=m,g=f.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,e=b?a:[];for(c=0,d=a.length;c<d;c++){if(f.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;e[c]=f.latLng(a[c])}return e},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=f.Path.VML,d=0,e=a.length,g="";d<e;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,e=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=f.LineUtil;for(a=0,b=0;a<e-1;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),c[1]===d[a+1]&&a!==e-2||(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=f.LineUtil,c=0,d=a.length;c<d;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b){var c,d,e,g,h,i,j,k,l,m=[1,4,2,8],n=f.LineUtil;for(d=0,j=a.length;d<j;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;g<4;g++){for(k=m[g],c=[],d=0,j=a.length,e=j-1;d<j;e=d++)h=a[d],i=a[e],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(a,b){f.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;b<c;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;a<c;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;b<d;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;c<d;c++){var e=f.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);e.length&&b.push(e)}this._parts=b}},_getPathPartStr:function(a){var b=f.Polyline.prototype._getPathPartStr.call(this,a);return b+(f.Browser.svg?"z":"x")}}),f.polygon=function(a,b){return new f.Polygon(a,b)},function(){function a(a){return f.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){c<d?a.setLatLngs(b[c++]):this.removeLayer(a)},this);c<d;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}f.MultiPolyline=a(f.Polyline),f.MultiPolygon=a(f.Polygon),f.multiPolyline=function(a,b){return new f.MultiPolyline(a,b)},f.multiPolygon=function(a,b){return new f.MultiPolygon(a,b)}}(),f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.Circle=f.Path.extend({initialize:function(a,b,c){f.Path.prototype.initialize.call(this,c),this._latlng=f.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new f.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){f.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return f.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(a,b){var c,d,e,g,h,i,j,k=this.options.weight/2;for(f.Browser.touch&&(k+=10),c=0,g=this._parts.length;c<g;c++)for(j=this._parts[c],d=0,h=j.length,e=h-1;d<h;e=d++)if((b||0!==d)&&(i=f.LineUtil.pointToSegmentDistance(a,j[e],j[d]),i<=k))return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(a){var b,c,d,e,g,h,i,j,k=!1;if(f.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(e=0,i=this._parts.length;e<i;e++)for(b=this._parts[e],g=0,j=b.length,h=j-1;g<j;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=f.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;b<c;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(e[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=f.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=f.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(f.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b,c,d){var e,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return e=c(k),b?b(a,e):new f.Marker(e);case"MultiPoint":for(h=0,i=k.length;h<i;h++)e=c(k[h]),l.push(b?b(a,e):new f.Marker(e));return new f.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new f.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new f.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new f.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new f.MultiPolygon(g,d);case"GeometryCollection":for(h=0,i=j.geometries.length;h<i;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new f.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;e<f;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==d&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(f.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var h={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(h),f.Circle.include(h),f.CircleMarker.include(h),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var a,b,c,d=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;a<b;a++)c=f.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:a,coordinates:b})}}f.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var e=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(e?b.geometry:f.GeoJSON.asFeature(b)))}),e?f.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),f.geoJson=function(a,b){return new f.GeoJSON(a,b)},f.DomEvent={addListener:function(a,b,c,d){var e,g,h,i=f.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(e=function(b){return c.call(d||a,b||f.DomEvent._getEvent())},f.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,e,i):(f.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,e,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",e,!1),a.addEventListener(b,e,!1)):"mouseenter"===b||"mouseleave"===b?(g=e,h="mouseenter"===b?"mouseover":"mouseout",e=function(b){if(f.DomEvent._checkMouse(a,b))return g(b)},a.addEventListener(h,e,!1)):"click"===b&&f.Browser.android?(g=e,e=function(a){return f.DomEvent._filterClick(a,g)},a.addEventListener(b,e,!1)):a.addEventListener(b,e,!1):"attachEvent"in a&&a.attachEvent("on"+b,e),a[j]=e,this))},removeListener:function(a,b,c){var d=f.stamp(c),e="_leaflet_"+b+d,g=a[e];return g?(f.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,f.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=f.DomEvent.stopPropagation;return f.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=f.DomEvent.stopPropagation,c=f.Draggable.START.length-1;c>=0;c--)f.DomEvent.on(a,f.Draggable.START[c],b);return f.DomEvent.on(a,"click",f.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new f.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new f.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){f.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(a){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&d<500||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,
b(a))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(f.DomEvent.stopPropagation(a),!f.Draggable._disabled&&(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),!this._moving))){var b=a.touches?a.touches[0]:a;this._startPoint=new f.Point(b.clientX,b.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var b=a.touches&&1===a.touches.length?a.touches[0]:a,d=new f.Point(b.clientX,b.clientY),e=d.subtract(this._startPoint);(e.x||e.y)&&(f.Browser.touch&&Math.abs(e.x)+Math.abs(e.y)<3||(f.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(e),f.DomUtil.addClass(c.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){f.DomUtil.removeClass(c.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[a],this._onMove).off(c,f.Draggable.END[a],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,e=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),e)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),f.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),c),f.DomEvent.preventDefault(a),f.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(f.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&d<=k,h=c}}function g(a){if(f.Browser.pointer){var c=o.indexOf(a.pointerId);if(c===-1)return;o.splice(c,1)}if(j){if(f.Browser.pointer){var d,e={};for(var g in i)d=i[g],"function"==typeof d?e[g]=d.bind(i):e[g]=d;i=e}i.type="dblclick",b(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=e,a[l+n+d]=g;var p=f.Browser.pointer?c.documentElement:a;return a.addEventListener(m,e,!1),p.addEventListener(n,g,!1),f.Browser.pointer&&p.addEventListener(f.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+b],!1),(f.Browser.pointer?c.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+b],!1),f.Browser.pointer&&c.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,a[d+this._touchend+b],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,b,d,e){var g="_leaflet_",h=this._pointers,i=function(a){"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&f.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+e]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};c.documentElement.addEventListener(this.POINTER_UP,j,!1),c.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2),this._startDist=d.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),b._panAnim&&b._panAnim.stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!b.options.bounceAtZoomLimits&&(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1)||(this._moved||(f.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(a)))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,f.DomUtil.removeClass(a._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(e+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,b,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),f.DomEvent.on(c,"touchmove",this._onMove,this).on(c,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,"touchmove",this._onMove,this).off(c,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!(!a.shiftKey||1!==a.which&&1!==a.button)&&(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void f.DomEvent.on(c,"mousemove",this._onMouseMove,this).on(c,"mouseup",this._onMouseUp,this).on(c,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),e=d.subtract(b),g=new f.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));f.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(e.x)-4)+"px",c.style.height=Math.max(0,Math.abs(e.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,"mousemove",this._onMouseMove).off(c,"mouseup",this._onMouseUp).off(c,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new f.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;a.tabIndex===-1&&(a.tabIndex="0"),f.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;f.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;b<c;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;b<c;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;b<c;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;b<c;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;b<c;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;b<c;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}f.DomEvent.stop(a)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=f.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&f.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,e){var g=c+a+" "+c+e;b[a+e]=f.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=f.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e,g){var h=f.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=f.DomEvent.stopPropagation;return f.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",f.DomEvent.preventDefault).on(h,"click",e,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){if(a)return this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this},removeAttribution:function(a){if(a)return this._attributions[a]&&(this._attributions[a]--,this._update()),this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=b<1e3?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){f.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=f.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(b,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=f.DomUtil.create("form",a+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",f.Browser.touch?f.DomEvent.on(d,"click",f.DomEvent.stop).on(d,"click",this._expand,this):f.DomEvent.on(d,"focus",this._expand,this),f.DomEvent.on(c,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",a+"-base",c),this._separator=f.DomUtil.create("div",a+"-separator",c),this._overlaysList=f.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=f.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[f.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(d+=' checked="checked"'),d+="/>";var e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var b,d=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=c.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e),b.layerId=f.stamp(a.layer),f.DomEvent.on(b,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name,d.appendChild(b),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;a<e;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[f.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",f.DomEvent.on(a,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(a,b),f.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,e=this._el,g=a.getComputedStyle(e);if(f.Browser.any3d){if(d=g[f.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new f.Point(b,c,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(a,b,c){if(b=b===d?this._zoom:this._limitZoom(b),a=this._limitCenter(f.latLng(a),b,this.options.maxBounds),c=c||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this;
},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;a<b?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));f.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return!(c.animate!==!0&&!this.getSize().contains(e))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0)},_animateZoom:function(a,b,c,d,e,g,h){h||(this._animatingZoom=!0),f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,f.Draggable&&(f.Draggable._disabled=!0),f.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:e,backwards:g}),setTimeout(f.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),f.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)},this))}}:{}),f.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=f.DomUtil.TRANSFORM,d=a.delta?f.DomUtil.getTranslateString(a.delta):b.style[c],e=f.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?e+" "+d:d+" "+e},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),f.Util.falseFn(b.offsetWidth);var c=this._map.getZoom();(c>this.options.maxZoom||c<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&d<.5?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[f.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;b<c;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,e=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=e.length;b<c;b++)d=e[b],d.complete||(d.onload=f.Util.falseFn,d.onerror=f.Util.falseFn,d.src=f.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=f.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=180*a.coords.accuracy/40075017,g=e/Math.cos(f.LatLng.DEG_TO_RAD*b),h=f.latLngBounds([b-e,c-g],[b+e,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document)},{}],24:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{immediate:20}],25:[function(a,b,c){!function(a,d){"use strict";"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.MergeXML=d()}(this,function(){return function(a){var b,c,d,e,f,g,h,i,j,k="_",l=1,m=3,n=8,o=7,p=this;p.Init=function(){return p.dom=null,p.nsp={},p.count=0,i[1]=!1,b>0&&(p.error={code:"",text:""}),b>0},p.AddFile=function(a){var b;return b=a&&a.target?a.target.result?p.AddSource(a.target.result):z("emf"):z("nof")},p.AddSource=function(a){var c,d;if("object"==typeof a)d=!!p.Get(1,a)&&a,d&&(1===b&&!window.DOMParser||2===b&&!d.selectSingleNode("/"))&&(d=null);else try{d=q(a)}catch(a){d=!1}if(null===d)c=z("nos");else if(d===!1)c=z("inv");else if(d===!0)p.nsp=v(p.dom.documentElement),p.count=1,c=p.dom;else if(s(d)){if(t(d,"/"),i[1]===!0){var e=p.dom.createTextNode("\r\n");p.dom.documentElement.appendChild(e)}p.count++,c=p.dom}else c=!1;return c};var q=function(a){var e,f;return 1===b?p.dom?(f=d.parseFromString(a,"text/xml"),e=!!r(f)&&f):(p.dom=d.parseFromString(a,"text/xml"),e=!!r(p.dom)):p.dom?(f=new ActiveXObject(c),f.async=!1,e=!!f.loadXML(a)&&f):(p.dom=new ActiveXObject(c),p.dom.async=!1,p.dom.setProperty("SelectionLanguage","XPath"),e=!!p.dom.loadXML(a)),e},r=function(a){return 0===a.getElementsByTagNameNS(e,"parsererror").length},s=function(a){var c=!0,d=p.dom.characterSet||p.dom.inputEncoding||p.dom.xmlEncoding,e=a.characterSet||a.inputEncoding||a.xmlEncoding;if(e!==d)c=z("enc");else if(a.documentElement.namespaceURI!==p.dom.documentElement.namespaceURI)c=z("nse");else if(a.documentElement.nodeName!==p.dom.documentElement.nodeName)if(i[0]){if(!i[1]){var f="undefined"!=typeof d?d:"UTF-8",h=p.dom.xmlVersion?p.dom.xmlVersion:"1.0",k='<?xml version="'+h+'" encoding="'+f+'"?>\r\n<'+i[0]+">\r\n</"+i[0]+">",l=q(k);if(l){var m=p.dom.documentElement.cloneNode(!0);l.documentElement.appendChild(m),m=l.createTextNode("\r\n"),l.documentElement.appendChild(m),p.dom=l,i[1]=!0}else c=z("jne"),i[1]=null}}else c=z("dif");if(c){var n=v(a.documentElement);for(var o in n)p.nsp[o]||("undefined"!=typeof p.dom.documentElement.setAttributeNS?p.dom.documentElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+o,n[o]):p.dom.documentElement.setAttribute("xmlns:"+o,n[o]),p.nsp[o]=n[o]);j?1===b?g=w:x():g=null}return c},t=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d,e=a.childNodes[c],f=u(a.childNodes,e,b,c),g=p.Query(f);if(e.nodeType===l){var i=!0;if(null===g||g.namespaceURI!==e.namespaceURI)d=e.cloneNode(!0),g=p.Query(b),g.appendChild(d);else if(y(g.getAttribute("stay"),h)!==!1&&(i=!1),i)try{for(var j=0;j<e.attributes.length;j++)e.attributes[j].namespaceURI&&"undefined"!=typeof e.setAttributeNS?g.setAttributeNS(e.attributes[j].namespaceURI,e.attributes[j].nodeName,e.attributes[j].nodeValue):g.setAttribute(e.attributes[j].nodeName,e.attributes[j].nodeValue)}catch(a){}e.hasChildNodes()&&i&&t(e,f)}else e.nodeType!==m&&e.nodeType!==n||(null===g||g.nodeType!==e.nodeType?(g=p.Query(b),d=e.nodeType===m?p.dom.createTextNode(e.nodeValue):p.dom.createComment(e.nodeValue),g.appendChild(d)):g.nodeValue=e.nodeValue)}},u=function(a,c,d,e){var f,g,h=0;if(c.nodeType===l){for(g=0;g<=e;g++)(j&&a[g].nodeType===c.nodeType&&a[g].nodeName===c.nodeName||!j&&a[g].nodeType!==o)&&h++;if(j){var i=!1,q=v(c);for(var r in q)r!==k&&(p.nsp[r]=q[r],i=2===b);i&&x(),f=c.prefix?c.prefix+":":p.nsp[k]?k+":":"",f+=c.localName?c.localName:c.baseName}else f="node()"}else if(c.nodeType===m||c.nodeType===n){for(g=0;g<=e;g++)a[g].nodeType===c.nodeType&&h++;f=c.nodeType===m?"text()":"comment()"}else f=d;return h&&(f=d+("/"===d.slice(-1)?"":"/")+f+"["+h+"]"),f},v=function(a){for(var b={},c=a.attributes,d=0;d<c.length;++d){var e=c[d].name.split(":");if("xmlns"===e[0]){var f=e[1]?e[1]:k;b[f]=c[d].value}}return b};p.Query=function(a){var c;i[1]&&(a="/"+p.dom.documentElement.nodeName+("/"===a?"":a));try{1===b?(c=f.evaluate(a,p.dom,g,XPathResult.FIRST_ORDERED_NODE_TYPE,null),c=c.singleNodeValue):c=p.dom.selectSingleNode(a)}catch(a){c=null}return c};var w=function(a){return p.nsp[a]||null},x=function(){var a="";for(var b in p.nsp)a+=" xmlns:"+b+"='"+p.nsp[b]+"'";a&&p.dom.setProperty("SelectionNamespaces",a.substr(1))},y=function(a,b){var c=!1;for(var d in b)if(b[d]===a){c=d;break}return c};p.Get=function(a,b){var c;if(a&&!b&&(b=p.dom),a)if(b)if(b.xml)c=b.xml;else try{c=(new XMLSerializer).serializeToString(b)}catch(a){c=null}else c="";else c=p.dom;if(c&&2===a){if(i[1]){var d=c.indexOf("<"+i[0]);c=c.substr(0,d)+"\r\n"+c.substr(d)}c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;"),c=c.replace(/(\r\n|\n|\r)/g,"<br>")}return c};var z=function(a){var b={nod:"XML DOM is not supported in this browser",nox:"xPath is not supported in this browser",nos:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return p.error.code=b[a]?a:"und",p.error.text=b[p.error.code],!1},A=function(){for(var a,b=!1,g=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],h=g.length,i=0;i<h;i++)try{var j=new ActiveXObject(g[i]);if(j.async=!1,b=!0,j.loadXML("<x></x>")&&j.selectSingleNode("/"))break}catch(a){}if(b)i<h?(c=g[i],a=2):a="nox";else if(window.DOMParser)if(window.XPathEvaluator){d=new DOMParser;var k=d.parseFromString("Invalid","text/xml");e=k.getElementsByTagName("parsererror")[0].namespaceURI,f=new XPathEvaluator,a=1}else a="nox";else a="nod";return a};"object"!=typeof a&&(a={}),h="undefined"==typeof a.stay?["all"]:a.stay?"object"==typeof a.stay&&a.stay instanceof Array?a.stay:[a.stay]:[],i="undefined"==typeof a.join?["root"]:[!!a.join&&String(a.join)],j="undefined"==typeof a.updn||a.updn,b=A(),"string"==typeof b&&(p.error={},z(b),b=0),p.Init()}})},{}],26:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],27:[function(a,b,c){b.exports={name:"webform",description:"A fork of Enketo Smart Paper that integrates with Smap",homepage:"http://www.smap.com.au",version:"2.1.0",license:"Apache-2.0",os:["darwin","linux","win32"],keywords:["enketo","OpenRosa","ODK","XForms","Smap"],repository:{type:"git",url:"https://github.com/enketo/enketo-core"},author:{name:"Martijn van de Rijdt",email:"martijn@enketo.org",url:"https://www.linkedin.com/in/martijnvanderijdt"},contributors:[{name:"Alex Anderson"}],bugs:"https://github.com/enketo/enketo-core/issues",main:"src/js/Form.js",scripts:{start:"grunt server",test:"grunt test"},devDependencies:{"enketo-transformer":"1.15.1",grunt:"1.0.x","grunt-browserify":"5.0.x","grunt-concurrent":"2.x.x","grunt-contrib-connect":"1.0.x","grunt-contrib-jshint":"1.1.x","grunt-contrib-uglify":"2.2.x","grunt-contrib-watch":"1.x.x","grunt-jsbeautifier":"0.x.x","grunt-karma":"2.0.0","grunt-sass":"2.0.x","grunt-shell":"2.1.0","jasmine-core":"2.5.x","json-pretty":"0.0.1",karma:"1.5.x","karma-browserify":"5.1.x","karma-chrome-launcher":"2.0.x","karma-firefox-launcher":"1.0.x","karma-jasmine":"1.1.x","karma-phantomjs-launcher":"1.0.x","karma-safari-launcher":"1.0.x","load-grunt-tasks":"3.x.x","phantomjs-prebuilt":"2.1.x","time-grunt":"1.x.x"},browser:{"text!enketo-config":"./config.json",widgets:"./src/js/widgets.js",translator:"./src/js/fake-translator"},dependencies:{"bootstrap-datepicker":"1.6.x","bootstrap-slider-basic":"3.3.x","bootstrap-timepicker":"0.5.x","enketo-xpathjs":"1.4.0",jquery:"3.2.x","jquery-touchswipe":"1.6.x",leaflet:"0.7.x",lie:"3.1.x",mergexml:"1.1.2"}}},{}],28:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a){this.message=a||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,c.exports=d})},{}],29:[function(a,b,c){(function(d){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof e)var e=function(d){d(a,c,b)};e(function(a,b,c){"use strict";var e=a("mergexml/mergexml"),f=a("./utils"),g=a("jquery"),h=a("lie"),i=a("./Form-logic-error"),j=a("text!enketo-config");a("./plugins"),a("./extend");var k,l,m;k=function(a,b){"string"==typeof a&&(a={modelStr:a}),a.external=a.external||[],a.submitted="undefined"==typeof a.submitted||a.submitted,b=b||{},b.full="undefined"==typeof b.full||b.full,this.$events=g("<div/>"),this.convertedExpressions={},this.templates={},this.loadErrors=[],this.INSTANCE=/instance\([\'|\"]([^\/:\s]+)[\'|\"]\)/g,this.OPENROSA=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^\)])/,this.OPENROSA_XFORMS_NS="http://openrosa.org/xforms",this.JAVAROSA_XFORMS_NS="http://openrosa.org/javarosa",this.ENKETO_XFORMS_NS="http://enketo.org/xforms",this.data=a,this.options=b,this.namespaces={}},k.prototype.init=function(){var a,b,c,d,e=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns\=("|')[^\s\>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{a="model",this.xml=g.parseXML(this.data.modelStr),this.data.external.forEach(function(f){for(a='instance "'+f.id+'"'||"instance unknown",c=e.getSecondaryInstance(f.id),d=c.childNodes,b=d.length-1;b>=0;b--)c.removeChild(d[b]);c.appendChild(g.parseXML(f.xmlStr).firstChild)}),this.createSession("__session",this.data.session)}catch(b){console.error("parseXML error"),this.loadErrors.push("Error trying to parse XML "+a+". "+b.message)}if(this.xml){try{this.$=g(this.xml),this.hasInstance=!!this.xml.querySelector("model > instance")||!1,this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.getMetaNode("instanceID").get().get(0)||e.loadErrors.push("Invalid primary instance. Missing instanceID node."),this.$.find("model > instance[src]:empty").each(function(a,b){e.loadErrors.push('External instance "'+g(b).attr("id")+'" is empty.')}),this.trimValues(),this.cloneAllTemplates(),this.extractTemplates()}catch(a){console.error(a),this.loadErrors.push(a.name+": "+a.message)}try{a="record",this.data.instanceStr&&this.mergeXml(this.data.instanceStr),this.setInstanceIdAndDeprecatedId()}catch(b){console.error(b),this.loadErrors.push("Error trying to parse XML "+a+". "+b.message)}}return this.loadErrors},k.prototype.createSession=function(a,b){var c,d,e=this.xml.querySelector("model"),h=["deviceid","username","email","phonenumber","simserial","subscriberid"];e&&(b="object"==typeof b?b:{},c=e.querySelector('instance[id="'+a+'"]'),c||(c=g.parseXML('<instance id="'+a+'"/>').documentElement,this.xml.adoptNode(c),e.appendChild(c)),h.forEach(function(a){b[a]=b[a]||f.readCookie("__enketo_meta_"+a)||a+" not found"}),d=g.parseXML("<session><context>"+h.map(function(a){return"<"+a+">"+b[a]+"</"+a+">"})+"</context></session>").documentElement,this.xml.adoptNode(d),c.appendChild(d))},k.prototype.getSecondaryInstance=function(a){var b;return[].slice.call(this.xml.querySelectorAll("model > instance")).some(function(c){var d=c.getAttribute("id");return d===a&&(b=c,!0)}),b},k.prototype.getVersion=function(){return this.evaluate("/node()/@version","string",null,null,!0)},k.prototype.node=function(a,b,c){return new l(a,b,c,this)},k.prototype.importNode=function(a,b){var c,d;switch(a.nodeType){case document.ELEMENT_NODE:var e=document.createElementNS(a.namespaceURI,a.nodeName);if(a.attributes&&a.attributes.length>0)for(c=0,d=a.attributes.length;c<d;c++){var f=a.attributes[c];f.namespaceURI?e.setAttributeNS(f.namespaceURI,f.nodeName,a.getAttributeNS(f.namespaceURI,f.localName)):e.setAttribute(f.nodeName,a.getAttribute(f.nodeName))}if(b&&a.childNodes&&a.childNodes.length>0)for(c=0,d=a.childNodes.length;c<d;c++)e.appendChild(this.importNode(a.childNodes[c],b));return e;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(a.nodeValue)}},k.prototype.mergeXml=function(a){var b,c,f,h,i,j,k,l,m=this;if(a){if(f=this.xml.querySelector("instance"),h=this.xml.querySelector("instance > *"),!h)throw new Error("Model is corrupt. It does not contain a childnode of instance");a=a.replace(/\s(xmlns\=("|')[^\s\>]+("|'))/g,""),k=g.parseXML(a),l=g(k),j=k.querySelectorAll("[*|template]");for(var n=0;n<j.length;n++)j[n].remove();if(l.find("*").each(function(){var a,b,c=this;try{b=m.getRepeatIndex(c),b>0&&(a=m.getXPath(c,"instance"),m.cloneRepeat(a,b-1,!0))}catch(a){console.log("Ignored error:",a)}}),l.find("*").filter(function(){var a=this,b=a.textContent;return 0===a.childNodes.length&&0===b.trim().length}).each(function(){var a=m.getXPath(this,"instance",!0);m.node(a,0).setVal("")}),c=new e({join:!1}),b=(new XMLSerializer).serializeToString(h),a=(new XMLSerializer).serializeToString(k),c.AddSource(b),c.AddSource(a),c.error.code)throw new Error(c.error.text);i=g.parseXML(c.Get(1)),this.xml.querySelector("instance").removeChild(h),h=d.navigator.userAgent.indexOf("Trident/")>=0?this.importNode(i.documentElement,!0):this.xml.adoptNode(i.documentElement,!0),f.appendChild(h),this.rootElement=h}},k.prototype.getXPath=function(a,b,c){var d,e=[],f="",g=a.nodeName,h=a.parentNode,i=h.nodeName;for(b=b||"#document",c=c||!1,c&&(d=this.getRepeatIndex(a),d>0&&(f="["+(d+1)+"]")),e.push(g+f);h&&i!==b&&"#document"!==i;)c&&(d=this.getRepeatIndex(h),f=d>0?"["+(d+1)+"]":""),e.push(i+f),h=h.parentNode,i=h.nodeName;return"/"+e.reverse().join("/")},k.prototype.getRepeatIndex=function(a){for(var b=0,c=a.nodeName,d=a.previousSibling;d;)d.nodeName&&d.nodeName===c&&b++,d=d.previousSibling;return b},k.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).get().each(function(){this.textContent=this.textContent.trim()})},k.prototype.setInstanceIdAndDeprecatedId=function(){var a,b,c,d,e;a=this.getMetaNode("instanceID"),b=a.get().get(0),e=a.getVal()[0],this.data.instanceStr&&this.data.submitted&&(c=this.getMetaNode("deprecatedID").get().get(0),b.textContent="",c||(c=g.parseXML("<deprecatedID/>").documentElement,this.xml.adoptNode(c),d=this.xml.querySelector("* > meta"),d.appendChild(c))),a.getVal()[0]||a.setVal(this.evaluate('concat("uuid:", uuid())',"string")),c&&this.getMetaNode("deprecatedID").setVal(e)},k.prototype.bindJsEvaluator=a("./xpath-evaluator-binding"),k.prototype.getInstanceID=function(){return this.getMetaNode("instanceID").getVal()[0]},k.prototype.getDeprecatedID=function(){return this.getMetaNode("deprecatedID").getVal()[0]||""},k.prototype.getInstanceName=function(){return this.getMetaNode("instanceName").getVal()[0]},k.prototype.getMetaNode=function(a){var b=this.getNamespacePrefix(this.OPENROSA_XFORMS_NS),c=this.node("/*/"+b+":meta/"+b+":"+a);return 0===c.get().length&&(c=this.node("/*/meta/"+a)),c},k.prototype.cloneRepeat=function(a,b,c){function d(){var a=o.getAttributeNS(s.ENKETO_XFORMS_NS,"last-used-ordinal")||0,b=Number(a)+1;return o.setAttributeNS(s.ENKETO_XFORMS_NS,t+":last-used-ordinal",b),b}function e(a){j.repeatOrdinals!==!0||a.getAttributeNS(s.ENKETO_XFORMS_NS,"ordinal")||a.setAttributeNS(s.ENKETO_XFORMS_NS,t+":ordinal",d())}function f(a){if(j.repeatOrdinals===!0){var b=Array.prototype.slice.call(a.querySelectorAll("[*|ordinal]"));b.push(a);for(var c=0;c<b.length;c++)b[c].removeAttributeNS(s.ENKETO_XFORMS_NS,"last-used-ordinal"),b[c].removeAttributeNS(s.ENKETO_XFORMS_NS,"ordinal")}}var h,i,k,l,m,n,o,p,q=!!this.templates[a],r=this.templates[a]||this.node(a,0).get(),s=this,t=this.getNamespacePrefix(s.ENKETO_XFORMS_NS);h=r.prop("nodeName").replace(/\./g,"\\."),l=this.node(a,b),i=l.get(),p=l.getRepeatSeries(),o=p[0],k=i.nextAll(h),c||p.forEach(function(a){e(a)}),r[0]&&1===i.length&&0===k.length?(n=r.clone().insertAfter(i),f(n[0]),c||e(n[0]),!c&&q||n.find("*").filter(function(){return 0===g(this).children().length}).text(""),c||(m=[r.prop("nodeName")],r.find("*").each(function(){m.push(g(this).prop("nodeName"))}),this.$events.trigger("dataupdate",{nodes:m,repeatPath:a,repeatIndex:s.node(a,b).determineIndex(n),cloned:!0}))):0===k.length&&console.error("Could not find template node and/or node to insert the clone after")},k.prototype.extractTemplates=function(){var a=this;this.getTemplateNodes().reverse().forEach(function(b){var c=a.getXPath(b,"instance");a.templates[c]=g(b).removeAttr("template").removeAttr("jr:template").remove()})},k.prototype.getTemplateNodes=function(){var a=this.getNamespacePrefix(this.JAVAROSA_XFORMS_NS);return this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@"+a+":template]","nodes",null,null,!1)},k.prototype.getTemplatePath=function(a){var b,c=this;return a.split("/").some(function(a,d,e){return b=e.slice(0,e.length-d).join("/"),c.templates[b]}),b||void 0},k.prototype.cloneAllTemplates=function(){var a=this.getNamespacePrefix(this.JAVAROSA_XFORMS_NS),b=this;this.getTemplateNodes().forEach(function(c){var d=c.nodeName,e=b.getXPath(c,"instance"),f=b.evaluate("ancestor::"+d+"[@template] | ancestor::"+d+"[@"+a+":template]","nodes",e,0,!0);0===f.length&&0===g(c).siblings(d.replace(/\./g,"\\.")).length&&g(c).clone().insertAfter(g(c)).find("*").addBack().removeAttr("template").removeAttr(a+":template").get(0).removeAttributeNS(b.JAVAROSA_XFORMS_NS,"template")})},k.prototype.get=function(){return this.$||null},k.prototype.getXML=function(){return this.xml||null},k.prototype.getStr=function(){var a=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return a=a.replace(/\s(data-)(xmlns\=("|')[^\s\>]+("|'))/g," $2"),navigator.userAgent.indexOf("Trident/")===-1&&(a=this.removeDuplicateEnketoNsDeclarations(a)),a},k.prototype.removeDuplicateEnketoNsDeclarations=function(a){var b=0,c=new RegExp("( xmlns:"+this.getNamespacePrefix(this.ENKETO_XFORMS_NS)+'="'+this.ENKETO_XFORMS_NS+'")',"g");return a.replace(c,function(a,c){return b++,b>1?"":a})},k.prototype.makeBugCompliant=function(a,b,c){var d,e,f,g,h,i,j,k;for(g=this.node(b,c).get(),k=g.parents().add(g),d=k.length-1;d>=0;d--)h=k.eq(d),i=h.prop("nodeName").replace(/\./g,"\\."),j=h.siblings(i).not("[template]"),"instance"!==i.toLowerCase()&&"model"!==i.toLowerCase()&&j.length>0&&(e=this.getXPath(h.get(0),"instance"),f=j.add(h).index(h),a=a.replace(new RegExp(e+"/","g"),e+"["+(f+1)+"]/"));return a},k.prototype.setNamespaces=function(){var a,b=this.hasInstance?"/model/instance[1]":"",c=this.evaluate(b+"/*","node",null,null,!0),d=this;if(c){if(c.hasAttributes())for(var e=0;e<c.attributes.length;e++){var f=c.attributes[e];0===f.name.indexOf("xmlns:")&&(this.namespaces[f.name.substring(6)]=f.value)}[["orx",this.OPENROSA_XFORMS_NS,!1],["jr",this.JAVAROSA_XFORMS_NS,!1],["enk",this.ENKETO_XFORMS_NS,j.repeatOrdinals===!0]].forEach(function(b){d.getNamespacePrefix(b[1])||(a=d.namespaces[b[0]]?"__"+b[0]:b[0],d.namespaces[a]=b[1],b[2]&&c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+a,b[1]))})}},k.prototype.getNamespacePrefix=function(a){var b;for(var c in this.namespaces)if(this.namespaces.hasOwnProperty(c)&&this.namespaces[c]===a){b=c;break}return b},k.prototype.getNsResolver=function(){var a="undefined"==typeof this.namespaces?{}:this.namespaces;return{lookupNamespaceURI:function(b){return a[b]||null}}},k.prototype.shiftRoot=function(a){var b=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(a=a.replace(b,function(a,b,c,d,e){var f="undefined"!=typeof b?encodeURIComponent(b):encodeURIComponent(d),g=c?c:e;return g+f+g}),a=a.replace(/^(\/(?!model\/)[^\/][^\/\s,"']*\/)/g,"/model/instance[1]$1"),a=a.replace(/([^a-zA-Z0-9\.\]\)\/\*_-])(\/(?!model\/)[^\/][^\/\s,"']*\/)/g,"$1/model/instance[1]$2"),a=a.replace(b,function(a,b,c,d,e){var f="undefined"!=typeof b?decodeURIComponent(b):decodeURIComponent(d),g=c?c:e;return g+f+g})),a},k.prototype.replaceInstanceFn=function(a){var b,c=this;return a.replace(this.INSTANCE,function(a,d){if(b='/model/instance[@id="'+d+'"]',c.evaluate(b,"nodes",null,null,!0).length)return b;throw new i('instance "'+d+'" does not exist in model')})},k.prototype.replaceCurrentFn=function(a,b){return a=a.replace("current()/.",b+"/."),a=a.replace("current()/","/")},k.prototype.replaceIndexedRepeatFn=function(a,b,c){var d=this,e=f.parseFunctionFromExpression(a,"indexed-repeat");return e.length?(e.forEach(function(e){var f,g,h,j=e[1];if(j.length%2!==1)throw new i("indexed repeat with incorrect number of parameters found: "+e[0]);for(g=j[0],f=j.length-1;f>1;f-=2)h=isNaN(j[f])?d.evaluate(j[f],"number",b,c,!0):j[f],g=g.replace(j[f-1],j[f-1]+"[position() = "+h+"]");a=a.replace(e[0],g)}),a):a},k.prototype.replacePullDataFn=function(a,b,c){var d,e=this,f=this.convertPullDataFn(a,b,c);for(var g in f)f.hasOwnProperty(g)&&(d=e.evaluate(f[g],"string",b,c,!0),a=a.replace(g,'"'+d+'"'));return a},k.prototype.convertPullDataFn=function(a,b,c){var d=this,e=f.parseFunctionFromExpression(a,"pulldata"),g={};return e.length?(e.forEach(function(a){var e,h,j=a[1];if(4!==j.length)throw new i("pulldata with incorrect number of parameters found: "+a[0]);j[1]=f.stripQuotes(j[1]),j[2]=f.stripQuotes(j[2]),e=d.evaluate(j[3],"string",b,c,!0),e=""===e||isNaN(e)?"'"+e+"'":e,h="instance("+j[0]+")/root/item["+j[2]+" = "+e+"]/"+j[1],g[a[0]]=h}),g):g},k.prototype.evaluate=function(a,b,c,d,e){var f,g,h,j,k,l,m,n,o,p,q,r;q=a,e=e||!1,b=b||"any",d=d||0,h=this.xml,o=null,c?(m=this.node(c).get(),o=m.length,g=m.eq(d)[0]):g=this.rootElement,p=[a,c,d,o].join("|"),a=this.replaceIndexedRepeatFn(a,c,d),
a=this.replacePullDataFn(a,c,d),r=q===a,this.convertedExpressions[p]?a=this.convertedExpressions[p]:(a=a,a=a.trim(),a=this.replaceInstanceFn(a),a=this.replaceCurrentFn(a,c),a=this.shiftRoot(a),o&&o>1&&(a=this.makeBugCompliant(a,c,d)),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&quot;/g,'"'),r&&(this.convertedExpressions[p]=a)),k={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]};for(j in k)if(k.hasOwnProperty(j)){if(j=Number(j),k[j][0]===b)break;j=0}if(e&&"undefined"!=typeof h.evaluate&&!this.OPENROSA.test(a))try{l=h.evaluate(a,g,this.getNsResolver(),j,null)}catch(b){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",a)}if(!l)try{"undefined"==typeof h.jsEvaluate&&this.bindJsEvaluator(),l=h.jsEvaluate(a,g,this.getNsResolver(),j,null)}catch(b){throw new i("Could not evaluate: "+a+", message: "+b.message)}if(l){if(0===j){for(j in k)if(k.hasOwnProperty(j)&&(j=Number(j),j===Number(l.resultType)&&j>0&&j<4)){n=l[k[j][2]];break}console.error("Expression: "+a+" did not return any boolean, string or number value as expected")}else if(7===j)for(n=[],f=0;f<l.snapshotLength;f++)n.push(l.snapshotItem(f));else n=l[k[j][2]];return n}},l=function(a,b,c,d){var e=d.hasInstance?"/model/instance[1]//*":"//*";this.model=d,this.originalSelector=a,this.selector="string"==typeof a&&a.length>0?a:e,c="undefined"!=typeof c&&null!==c?c:{},this.filter=c,this.filter.onlyLeaf="undefined"!=typeof c.onlyLeaf&&c.onlyLeaf,this.filter.noEmpty="undefined"!=typeof c.noEmpty&&c.noEmpty,this.index=b},l.prototype.get=function(){var a,b;return this.nodes||(this.nodes=this.model.evaluate(this.selector,"nodes",null,null,!0)),a=this.filter.noEmpty===!0?g(this.nodes).filter(function(){var a=g(this);return b=a.text(),0===a.children().length&&b.trim().length>0}):this.filter.onlyLeaf===!0?g(this.nodes).filter(function(){return 0===g(this).children().length}):g(this.nodes),"undefined"!=typeof this.index&&null!==this.index?a.eq(this.index):a},l.prototype.setIndex=function(a){this.index=a},l.prototype.setVal=function(a,b,c,d,e){var f,h,i,k,l;return h=this.getVal()[0],i="undefined"!=typeof a&&null!==a?Array.isArray(a)?a.join(" "):a.toString():"",i=this.convert(i,c),f=this.get(),1===f.length&&i.toString().trim()!==h.toString().trim()?(f.text(i.toString()),k=this.getClosestRepeat(),k.nodes=[f.prop("nodeName")],l=this.model.getUpdateEventData(f.get(0),c),k=l?g.extend({},k,l):k,this.model.$events.trigger("dataupdate",k),j.validateContinuously&&e!==!0&&this.validate(b,d,c),"binary"===c&&(i.length>0?f.attr("type","file"):f.removeAttr("type")),k):f.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):0===f.length?(console.log("Data node: "+this.selector+" with null-based index: "+this.index+" not found. Ignored."),null):null},l.prototype.getVal=function(){var a=[];return this.get().each(function(){a.push(g(this).text())}),a},l.prototype.determineIndex=function(a){var b,c,d,e=this;return a=a||this.get(),1===a.length?(b=a.prop("nodeName"),c=this.model.getXPath(a.get(0),"instance"),d=this.model.$.find(b.replace(/\./g,"\\.")).filter(function(){return c===e.model.getXPath(this,"instance")}),1===d.length?null:d.index(a)):(console.error("no node, or multiple nodes, provided to nodeset.determineIndex"),-1)},l.prototype.getClosestRepeat=function(){for(var a=this.get().get(0),b=a.nodeName;"instance"!==b&&(a.nextSibling&&a.nextSibling.nodeName!==b||a.previousSibling&&a.previousSibling.nodeName!==b);)a=a.parentNode,b=a.nodeName;return"instance"===b?{}:{repeatPath:this.model.getXPath(a,"instance"),repeatIndex:this.determineIndex(g(a))}},l.prototype.getRepeatSeries=function(){for(var a=this.get().get(0),b=a.previousSibling,c=a.nodeName,d=[];b;)b.nodeName&&b.nodeName===c&&(a=b),b=b.previousSibling;for(d.push(a),b=a.nextSibling;b;)b.nodeName&&b.nodeName===c&&d.push(b),b=b.nextSibling;return d},l.prototype.remove=function(){var a,b,c,d,e,f;a=this.get(),a.length>0?(b=[a.prop("nodeName")],a.find("*").each(function(){c=g(this),b.push(c.prop("nodeName"))}),d=this.model.getXPath(a.get(0),"instance"),e=this.determineIndex(a),f=this.model.getRemovalEventData(a.get(0)),a.remove(),this.nodes=null,this.model.$events.trigger("dataupdate",{nodes:b,repeatPath:d,repeatIndex:e}),this.model.$events.trigger("removed",f)):console.error("could not find node "+this.selector+" with index "+this.index+" to remove ")},l.prototype.convert=function(a,b){return""===a.toString()?a:"undefined"!=typeof b&&null!==b&&"undefined"!=typeof m[b.toLowerCase()]&&"undefined"!=typeof m[b.toLowerCase()].convert?m[b.toLowerCase()].convert(a):a},l.prototype.validate=function(a,b,c){var d=this,e={};return this.validateRequired(b).then(function(b){return e.requiredValid=b,b===!1?null:d.validateConstraintAndType(a,c)}).then(function(a){return e.constraintValid=a,e.requiredValid!==!1&&e.constraintValid!==!1&&d.model.$events.trigger("validated",d.model.getValidationEventData(d.get().get(0),c)),e})},l.prototype.validateConstraintAndType=function(a,b){var c,d=this;return b&&"undefined"!=typeof m[b.toLowerCase()]||(b="string"),a||"string"!==b&&"select"!==b&&"select1"!==b&&"binary"!==b?(c=d.getVal()[0],""===c.toString()?h.resolve(!0):h.resolve().then(function(){return m[b.toLowerCase()].validate(c)}).then(function(b){var c=!("undefined"!=typeof a&&null!==a&&a.length>0)||d.model.evaluate(a,"boolean",d.originalSelector,d.index);return b&&c})):h.resolve(!0)},l.prototype.validateRequired=function(a){var b=this;return!a||this.getVal()[0]?h.resolve(!0):h.resolve().then(function(){return!b.model.evaluate(a,"boolean",b.originalSelector,b.index)})},m={string:{validate:function(){return!0}},select:{validate:function(){return!0}},select1:{validate:function(){return!0}},decimal:{convert:function(a){var b=Number(a);return isNaN(b)||b===Number.POSITIVE_INFINITY||b===Number.NEGATIVE_INFINITY?"":b},validate:function(a){var b=Number(a);return!isNaN(b)&&b!==Number.POSITIVE_INFINITY&&b!==Number.NEGATIVE_INFINITY}},int:{convert:function(a){var b=Number(a);return isNaN(b)||b===Number.POSITIVE_INFINITY||b===Number.NEGATIVE_INFINITY?"":b>=0?Math.floor(b):-Math.floor(Math.abs(b))},validate:function(a){var b=Number(a);return!isNaN(b)&&b!==Number.POSITIVE_INFINITY&&b!==Number.NEGATIVE_INFINITY&&Math.round(b)===b}},date:{validate:function(a){var b=/([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/,c=b.exec(a);return!(!c||6!==c.length)&&"Invalid Date"!==new Date(Number(c[1]),Number(c[3])-1,Number(c[5])).toString()},convert:function(a){var b,c,d=/([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/;return f.isNumber(a)?c=new Date(24*a*60*60*1e3):(c=new Date(a),"Invalid Date"===c.toString()&&(b=d.exec(a),b&&Number(b[1])>0&&Number(b[3])>=0&&Number(b[3])<12&&Number(b[5])<32&&(c=new Date(Number(b[1]),Number(b[3])-1,Number(b[5]))))),"Invalid Date"===c.toString()?"":c.getUTCFullYear().toString().pad(4)+"-"+(c.getUTCMonth()+1).toString().pad(2)+"-"+c.getUTCDate().toString().pad(2)}},datetime:{validate:function(a){return"Invalid Date"!==new Date(a.toString()).toString()||"Invalid Date"!==new Date(this.convert(a.toString())).toString()},convert:function(a){var b,c=/([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2}):([0-9]{2})$/,d=/([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2})$/;if(f.isNumber(a))b=new Date(24*a*60*60*1e3);else{if("Invalid Date"!==new Date(a).toString()&&c.test(a))return a;if("Invalid Date"===new Date(a).toString()&&d.test(a))return a+":00";b=new Date(a)}return"Invalid Date"!==b.toString()?b.toISOLocalString():""}},time:{validate:function(a){var b=a.toString().split(":");return!(b.length<2)&&(b[2]=b[2]?Number(b[2].toString().split(".")[0]):0,b[0]<24&&b[0]>=0&&b[1]<60&&b[1]>=0&&b[2]<60&&b[2]>=0)},convert:function(a){var b,c=/^[0-9]{2}:[0-9]{2}(:[0-9.]*)?$/;return c.test(a)||(b=new Date(a),"Invalid Date"!==b.toString()&&(a=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds())),a=a.toString().split(":").map(function(a){return a.toString().pad(2)}).join(":"),this.validate(a)?a:""}},barcode:{validate:function(){return!0}},geopoint:{validate:function(a){var b=a.toString().trim().split(" ");return""!==b[0]&&b[0]>=-90&&b[0]<=90&&""!==b[1]&&b[1]>=-180&&b[1]<=180&&("undefined"==typeof b[2]||!isNaN(b[2]))&&("undefined"==typeof b[3]||!isNaN(b[3])&&b[3]>=0)},convert:function(a){return a.toString().trim()}},geotrace:{validate:function(a){var b=a.toString().split(";");return b.length>=2&&b.every(function(a){return m.geopoint.validate(a)})},convert:function(a){return a.toString().trim()}},geoshape:{validate:function(a){var b=a.toString().split(";");return b.length>=4&&b[0]===b[b.length-1]&&b.every(function(a){return m.geopoint.validate(a)})},convert:function(a){return a.toString().trim()}},binary:{validate:function(){return!0}}},k.prototype.getUpdateEventData=function(a,b){},k.prototype.getValidationEventData=function(a,b){},k.prototype.getRemovalEventData=function(a){},k.prototype.types=m,c.exports=k})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Form-logic-error":28,"./extend":32,"./plugins":35,"./utils":38,"./xpath-evaluator-binding":41,jquery:22,lie:24,"mergexml/mergexml":25,"text!enketo-config":1}],30:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){function d(a,b){n=g(a),this.$=n,this.$nonRepeats={},this.options="object"!=typeof b?{}:b,"undefined"==typeof this.options.clearIrrelevantImmediately&&(this.options.clearIrrelevantImmediately=!0)}var k,m,n,o,p,q,r=[];this.init=function(){return o=g(a).clone().appendTo("<original></original>"),k=new e(b),k.$events.on("dataupdate",function(b,c){g(a).trigger("dataupdate.enketo",c)}),k.$events.on("validated",function(b,c){g(a).trigger("validated.enketo",c)}),k.$events.on("removed",function(b,c){g(a).trigger("removed.enketo",c)}),r=r.concat(k.init()),m=new d(a,c),p=g(a).find(".or-repeat").length>0,r=r.concat(m.init()),document.querySelector("body").scrollIntoView(),r},this.ex=function(a,b,c,d,e){return k.evaluate(a,b,c,d,e)},this.getModel=function(){return k},this.getInstanceID=function(){return k.getInstanceID()},this.getDeprecatedID=function(){return k.getDeprecatedID()},this.getInstanceName=function(){return k.getInstanceName()},this.getView=function(){return m},this.getEncryptionKey=function(){return m.$.data("base64rsapublickey")},this.getAction=function(){return m.$.attr("action")},this.getMethod=function(){return m.$.attr("method")},this.getVersion=function(){return k.getVersion()},this.getDataStr=function(){return k.getStr()},this.getRecordName=function(){return m.recordName.get()},this.setRecordName=function(a){return m.recordName.set(a)},this.setEditStatus=function(a){return m.editStatus.set(a)},this.getEditStatus=function(){return m.editStatus.get()},this.getSurveyName=function(){return n.find("#form-title").text()},this.clearIrrelevant=function(){return m.clearIrrelevant()},this.resetView=function(){g("#form-languages").remove(),n.replaceWith(o)},this.resetHTML=this.resetView,this.validate=function(){return m.validateAll()},this.isValid=function(){return m.isValid()},q=function(a,b,c,d,e){var f,h,i,j="",l=a.match(/jr:choice-name\(([^,]+),\s?'(.*?)'\)/);return l?(f=k.evaluate(l[1],b,c,d,e),h=l[2].trim(),i=n.find('[name="'+h+'"]'),i.length>0&&"select"===i.prop("nodeName").toLowerCase()?j=i.find('[value="'+f+'"]').text():i.length>0&&"input"===i.prop("nodeName").toLowerCase()&&(j=i.filter(function(){return g(this).attr("value")===f}).siblings(".option-label.active").text()),a.replace(l[0],'"'+j+'"')):a},d.prototype.init=function(){var a=this;if("undefined"==typeof k||!(k instanceof e))return console.error("variable data needs to be defined as instance of FormModel");try{return this.preloads.init(this),n.data({instanceID:k.getInstanceID()}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calcUpdate(),this.langs.init(),this.repeat.init(this),this.itemsetUpdate(),this.setAllVals(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute,this.options.evaluate=k.evaluate.bind(k),this.options.formClasses=i.toArray(n.get(0).classList),f.init(null,this.options),this.branchUpdate(),this.pages.init(),this.outputUpdate(),this.setEventHandlers(),this.calcUpdate(),this.editStatus.set(!1),setTimeout(function(){a.progress.update()},0),[]}catch(a){return[a.name+": "+a.message]}},d.prototype.pages={active:!1,$current:[],$activePages:g(),init:function(){if(n.hasClass("pages")){var a=n.find(' .question:not([role="comment"]), .or-appearance-field-list').filter(function(){return 0===g(this).parent().closest(".or-appearance-field-list").length}).attr("role","page");a.length>1||a.eq(0).hasClass("or-repeat")?(this.$formFooter=g(".form-footer"),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.updateAllActive(a),this.toggleButtons(0),this.setButtonHandlers(),this.setRepeatHandlers(),this.setBranchHandlers(),this.setSwipeHandlers(),this.active=!0,this.flipToFirst()):n.removeClass("pages")}},setButtonHandlers:function(){var a=this;this.$btnFirst.off(".pagemode").on("click.pagemode",function(){return a.flipToFirst(),!1}),this.$btnPrev.off(".pagemode").on("click.pagemode",function(){return a.prev(),!1}),this.$btnNext.off(".pagemode").on("click.pagemode",function(){return a.next(),!1}),this.$btnLast.off(".pagemode").on("click.pagemode",function(){return a.flipToLast(),!1})},setSwipeHandlers:function(){var a=this,b=g(".main");b.swipe("destroy"),b.swipe({allowPageScroll:"vertical",threshold:150,swipeLeft:function(){a.next()},swipeRight:function(){a.prev()}})},setRepeatHandlers:function(){var a=this;n.off("addrepeat.pagemode").on("addrepeat.pagemode",function(b,c,d){a.updateAllActive(),g(b.target).removeClass("current contains-current").find(".current").removeClass("current"),d||a.flipToPageContaining(g(b.target))}).off("removerepeat.pagemode").on("removerepeat.pagemode",function(b){0===a.$current.closest("html").length&&(a.updateAllActive(),a.flipToPageContaining(g(b.target)))})},setBranchHandlers:function(){var a=this;n.off("changebranch.pagemode").on("changebranch.pagemode",function(){a.updateAllActive(),a.toggleButtons()})},getCurrent:function(){return this.$current},updateAllActive:function(a){a=a||g('.or [role="page"]'),this.$activePages=a.filter(function(){return 0===g(this).closest(".disabled").length})},getAllActive:function(){return this.$activePages},getPrev:function(a){return this.$activePages[a-1]},getNext:function(a){return this.$activePages[a+1]},getCurrentIndex:function(){return this.$activePages.index(this.$current)},next:function(){var a,b,c=this;return this.updateAllActive(),a=this.getCurrentIndex(),b=l.validatePage===!1?h.resolve(!0):m.validateContent(this.$current),b.then(function(b){var d,e;return!!b&&(d=c.getNext(a),!d||(e=a+1,c.flipTo(d,e),e))})},prev:function(){var a,b;this.updateAllActive(),b=this.getCurrentIndex(),a=this.getPrev(b),a&&this.flipTo(a,b-1)},setToCurrent:function(a){var b=g(a);b.addClass("current hidden"),this.$current=b.removeClass("hidden").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()},flipTo:function(a,b){this.$current.length>0&&1===this.$current.closest("html").length?this.$current[0]!==a&&(this.$current.removeClass("current fade-out").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),this.setToCurrent(a),this.focusOnFirstQuestion(a),this.toggleButtons(b),g(a).trigger("pageflip.enketo")):(this.setToCurrent(a),this.focusOnFirstQuestion(a),this.toggleButtons(b),g(a).trigger("pageflip.enketo"))},flipToFirst:function(){this.updateAllActive(),this.flipTo(this.$activePages[0])},flipToLast:function(){this.updateAllActive(),this.flipTo(this.$activePages.last()[0])},flipToPageContaining:function(a){var b;b=a.closest('[role="page"]'),b=0===b.length?a.find('[role="page"]'):b,this.flipTo(b[0])},focusOnFirstQuestion:function(a){g(a).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function(){return 0===g(this).parentsUntil(".or",".disabled").length}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),a.scrollIntoView()},toggleButtons:function(a){var b=a||this.getCurrentIndex(),c=this.getNext(b),d=this.getPrev(b);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!c),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!d),this.$formFooter.toggleClass("end",!c)}},d.prototype.input={getWrapNodes:function(a){var b=this.getInputType(a.eq(0));return"fieldset"===b?a:a.closest(".question")},getProps:function(a){return 1!==a.length?console.error("getProps(): no input node provided or multiple"):{path:this.getName(a),ind:this.getIndex(a),inputType:this.getInputType(a),xmlType:this.getXmlType(a),constraint:this.getConstraint(a),calculation:this.getCalculation(a),relevant:this.getRelevant(a),readonly:this.getReadonly(a),val:this.getVal(a),required:this.getRequired(a),enabled:this.isEnabled(a),multiple:this.isMultiple(a)}},getInputType:function(a){var b;return 1!==a.length?"":(b=a.prop("nodeName").toLowerCase(),"input"===b?a.attr("type").length>0?a.attr("type").toLowerCase():console.error("<input> node has no type"):"select"===b?"select":"textarea"===b?"textarea":"fieldset"===b||"section"===b?"fieldset":console.error("unexpected input node type provided"))},getConstraint:function(a){return a.attr("data-constraint")},getRequired:function(a){if(0===a.parentsUntil(".or",".or-appearance-label").length)return a.attr("data-required")},getRelevant:function(a){return a.attr("data-relevant")},getReadonly:function(a){return a.is("[readonly]")},getCalculation:function(a){return a.attr("data-calculate")},getXmlType:function(a){return 1!==a.length?console.error("getXMLType(): no input node provided or multiple"):a.attr("data-type-xml")},getName:function(a){var b;return 1!==a.length?console.error("getName(): no input node provided or multiple"):(b=a.attr("data-name")||a.attr("name"),b||console.error("input node has no name"))},getIndex:function(a){var b,c,d,e;return 1!==a.length?console.error("getIndex(): no input node provided or multiple"):(b=this.getInputType(a),c=this.getName(a),d=this.getWrapNodes(a),e="radio"===b&&c!==a.attr("name")?this.getWrapNodes(n.find('[data-name="'+c+'"]')):"fieldset"===b&&a.hasClass("or-repeat")?this.getWrapNodes(n.find('.or-repeat[name="'+c+'"]')):"fieldset"===b&&a.hasClass("or-group")?this.getWrapNodes(n.find('.or-group[name="'+c+'"]')):this.getWrapNodes(n.find('[name="'+c+'"]')),e.index(d))},isMultiple:function(a){return"checkbox"===this.getInputType(a)||void 0!==a.attr("multiple")},isEnabled:function(a){return!(a.prop("disabled")||a.parentsUntil(".or",".disabled").length>0)},getVal:function(a){var b,c,d=[];return 1!==a.length?console.error("getVal(): no inputNode provided or multiple"):(b=this.getInputType(a),c=this.getName(a),"radio"===b?this.getWrapNodes(a).find("input:checked").val()||"":"checkbox"===b?(this.getWrapNodes(a).find('input[name="'+c+'"]:checked').each(function(){d.push(g(this).val())}),d):a.val()?a.val():"")},setVal:function(a,b,c){var d,e;if(b=b||0,"radio"===this.getInputType(n.find('[data-name="'+a+'"]').eq(0)))e="radio",d=this.getWrapNodes(n.find('[data-name="'+a+'"]')).eq(b).find('[data-name="'+a+'"]');else{if(d=this.getWrapNodes(n.find('[name="'+a+'"]')).eq(b).find('[name="'+a+'"]'),e=this.getInputType(d.eq(0)),"file"===e)return d.eq(0).attr("data-loaded-file-name",c),!1;"date"!==e&&"datetime"!==e||(c=k.node(a,b).convert(c,e))}this.isMultiple(d.eq(0))===!0?c=c.split(" "):"radio"===e&&(c=[c]),d.is("[readonly]")&&d.toggleClass("has-value",!!c),d.val(c).trigger("inputupdate.enketo")},validate:function(a){return m.validateInput(a)}},d.prototype.setAllVals=function(a,b){var c,d,e,f=this,h=a&&a.attr("name")?a.attr("name"):null;b="undefined"!=typeof b?b:null,k.node(h,b).get().find("*").filter(function(){var a=g(this);return 0===a.children().length&&a.text()}).each(function(){var a=g(this);try{e=a.text(),d=k.getXPath(a.get(0),"instance"),c=k.node(d).get().index(this),f.input.setVal(d,c,e)}catch(a){console.error(a),r.push("Could not load input field value with name: "+d+" and value: "+e)}})},d.prototype.langs={init:function(){var a,b=this,c=g(".form-language-selector");this.$formLanguages=n.find("#form-languages"),this.currentLang=this.$formLanguages.attr("data-default-lang")||this.$formLanguages.find("option").eq(0).attr("value"),a=this.$formLanguages.find('[value="'+this.currentLang+'"]').attr("data-dir")||"ltr",this.$formLanguages.detach().appendTo(c).val(this.currentLang),n.attr("dir",a),this.$formLanguages.find("option").length<2||(c.removeClass("hide"),this.$formLanguages.change(function(a){a.preventDefault(),b.currentLang=g(this).val(),b.setAll(b.currentLang)}))},getCurrentLang:function(){return this.currentLang},getCurrentLangDesc:function(){return this.$formLanguages.find('[value="'+this.currentLang+'"]').text()},setAll:function(a){var b=this,c=this.$formLanguages.find('[value="'+a+'"]').attr("data-dir")||"ltr";n.attr("dir",c).find("[lang]").removeClass("active").filter('[lang="'+a+'"], [lang=""]').filter(function(){var a=g(this);return!a.hasClass("or-form-short")||a.hasClass("or-form-short")&&0===a.siblings(".or-form-long").length}).addClass("active"),n.find("select, datalist").each(function(){b.setSelect(g(this))}),n.trigger("changelanguage")},setSelect:function(a){var b,c,d;a.children("option").not('[value=""], [data-value=""]').each(function(){var a=g(this);c=a.text(),b=a.attr("value")||a[0].dataset.value,d=a.closest(".question").find(".or-option-translations").children('.active[data-option-value="'+b+'"]').text().trim(),d="undefined"!=typeof d&&d.length>0?d:c,a.text(d)})}},d.prototype.editStatus={set:function(a){a&&a!==n.data("edited")&&n.trigger("edited.enketo"),n.data("edited",a)},get:function(){return!!n.data("edited")}},d.prototype.recordName={set:function(a){n.attr("name",a)},get:function(){return n.attr("name")}},d.prototype.getNodesToUpdate=function(a,b,c){var d,e=null,f=[],h=this;return c=c||{},b=b||"",this.$nonRepeats[a]||(this.$nonRepeats[a]=n.find(b+"["+a+"]").parentsUntil(".or",".calculation, .question").filter(function(){return 0===g(this).closest(".or-repeat").length})),"undefined"!=typeof c.repeatPath&&c.repeatIndex>=0&&(e=n.find('.or-repeat[name="'+c.repeatPath+'"]').eq(c.repeatIndex)),d=e&&e.length?this.$nonRepeats[a].add(e):n,c.nodes&&0!==c.nodes.length?(c.nodes.forEach(function(c){f=f.concat(h.getQuerySelectorsForLogic(b,a,c))}),f=f.concat(h.getQuerySelectorsForLogic(b,a,"*"))):f=f.concat([b+"["+a+"]"]),d.find(f.join())},d.prototype.getQuerySelectorsForLogic=function(a,b,c){return[a+"["+b+'*="/'+c+' "]',a+"["+b+'*="/'+c+')"]',a+"["+b+'*="/'+c+',"]',a+"["+b+'$="/'+c+'"]',a+"["+b+'*="/'+c+']"]']},d.prototype.branchUpdate=function(a,b){function c(a,b,c){var d=k.evaluate(a,"boolean",b,c);return d}function d(a,b){b===!0?h(a):i(a)}function e(a){return!a.hasClass("disabled")&&!a.hasClass("pre-init")}function h(a){var b;e(a)||(w=!0,a.removeClass("disabled pre-init"),f.enable(a),b=a.prop("nodeName").toLowerCase(),"label"===b?a.children("input, select, textarea").prop("disabled",!1):"fieldset"===b||"section"===b?(a.prop("disabled",!1),a.find('*:not(.or-branch) input[type="file"]:not([data-relevant])').prop("disabled",!0).prop("disabled",!1)):a.find("fieldset, input, select, textarea").prop("disabled",!1))}function i(a){var c=a.prop("nodeName").toLowerCase(),d=a.hasClass("pre-init");(d||e(a)||b)&&(w=!0,a.addClass("disabled"),f.disable(a),d?a.removeClass("pre-init"):((x.options.clearIrrelevantImmediately||b)&&a.clearInputs("change"),a.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function(){x.setValid(g(this))})),"label"===c?a.children("input, select, textarea").prop("disabled",!0):"fieldset"===c||"section"===c?a.prop("disabled",!0):a.find("fieldset, input, select, textarea").prop("disabled",!0))}var j,l,m,o,q,r,s,t,u={},v=[],w=!1,x=this;s=this.getNodesToUpdate("data-relevant","",a),t=!!(p&&n.find(".or-repeat.clone").length>0),s.each(function(){var a=g(this);if(g.inArray(a.attr("name"),v)===-1){if(l=a.closest(".or-branch"),j={},r=null,j.relevant=x.input.getRelevant(a),j.path=x.input.getName(a),1!==l.length)return void(0===a.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",g(this)));o=!!(t&&l.parentsUntil(".or",".or-repeat").length>0),q=!!(t&&l.parentsUntil(".or",".or-repeat.clone").length>0),j.ind=q?x.input.getIndex(a):0,j.relevant.indexOf("..")===-1&&(r=o?j.relevant+"__"+j.path.substring(0,j.path.lastIndexOf("/"))+"__"+j.ind:j.relevant),r&&"undefined"!=typeof u[r]?m=u[r]:(m=c(j.relevant,j.path,j.ind),u[r]=m),o||v.push(g(this).attr("name")),d(l,m)}}),w&&this.$.trigger("changebranch")},d.prototype.itemsetUpdate=function(a){var b,c,d,e,f=this,h={};e=this.getNodesToUpdate("data-items-path",".itemset-template",a),b=!!(p&&n.find(".or-repeat.clone").length>0),e.each(function(){var a,e,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(p=g(this),!p.parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length){if(q={},r=p.data(),s=p.prop("nodeName").toLowerCase(),z=p.parent("select, datalist"),"label"===s?t=p.children("input").eq(0):"select"===z.prop("nodeName").toLowerCase()?t=z:"datalist"===z.prop("nodeName").toLowerCase()&&(t=z.siblings("input:not(.widget)")),u=p.closest("label, select, datalist").siblings(".itemset-labels"),v=p.attr("data-items-path"),w=u.attr("data-label-type"),x=u.attr("data-label-ref"),y=u.attr("data-value-ref"),o=f.input.getName(t),c=!!(b&&t.parentsUntil(".or",".or-repeat").length>0),d=!!(b&&t.parentsUntil(".or",".or-repeat.clone").length>0),n=d?f.input.getIndex(t):0,"undefined"!=typeof h[v])m=h[v];else{var A=!0;m=g(k.evaluate(v,"nodes",o,n,A)),c||(h[v]=m)}q.length=m.length,q.text=m.text(),q.length===r.length&&q.text===r.text||(p.data(q),p.closest(".question").find(s).not(p).remove(),p.parent("select").siblings(".or-option-translations").empty(),m.each(function(){var b,c,d,h=g(this);switch(a=g("<root/>"),p.clone().appendTo(a).removeClass("itemset-template").addClass("itemset").removeAttr("data-items-path"),d=i.parseFunctionFromExpression(x,"translate"),c=d.length?d[0][1][0]:x+":eq(0)",b=h.children(c),"itext"!==w&&b.length>0&&(w="langs"),w){case"itext":e=u.find('[data-itext-id="'+b.eq(0).text()+'"]').clone();break;case"langs":e=g(),b.each(function(){var a=this.getAttribute("lang"),b=a?' lang="'+this.getAttribute("lang")+'"':"",c=a&&a!==f.langs.getCurrentLang()?"":" active",d='<span class="option-label'+c+'"'+b+">"+this.textContent+"</span>";e=e.add(d)});break;default:e=g('<span class="option-label active" lang="">'+b.eq(0).text()+"</span>")}j=h.children(y).text(),a.find("[value]").attr("value",j),"label"===s?(a.find("input").after(e),u.before(a.find(":first"))):"option"===s&&(a.find("option").text(e.filter(".active").eq(0).text()),e.attr("data-option-value",j).attr("data-itext-id","").appendTo(u.siblings(".or-option-translations")),p.siblings().addBack().last().after(a.find(":first")))}),l=k.node(o,n).getVal()[0],""!==l&&(f.input.setVal(o,n,l),t.trigger("change")),z.length>0&&t.trigger("changeoption"))}})},d.prototype.outputUpdate=function(a){var b,c,d,e,f,h,i,j,l,m={},o="",q=this;l=this.getNodesToUpdate("data-value",".or-output",a),c=p&&n.find(".or-repeat.clone").length>0,l.each(function(){h=g(this),h.closest(".or-branch").parent().closest(".disabled").length||(b=h.attr("data-value"),f=h.closest(".question, .note, .or-group").find("[name]").eq(0),i=f.length?q.input.getName(f):void 0,d=c&&h.parentsUntil(".or",".or-repeat").length>0,e=d&&h.parentsUntil(".or",".or-repeat.clone").length>0,j=e?q.input.getIndex(f):0,"undefined"!=typeof m[b]?o=m[b]:(o=k.evaluate(b,"string",i,j,!0),d||(m[b]=o)),h.text()!==o&&h.text(o))})},d.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){var a=n.find('[name$="instanceID"][data-calculate]');a.length>0&&a.removeAttr("data-calculate")},d.prototype.calcUpdate=function(a){var b,c=this;a=a||{},b=this.getNodesToUpdate("data-calculate","",a),b=b.add(this.getNodesToUpdate("data-relevant","[data-calculate]",a)),b.each(function(){function b(a){s=!r||k.evaluate(r,"boolean",j,a),n=q(m,"string",j,a),d=s&&n?k.evaluate(n,"string",j,a):"",e.setIndex(a),e.setVal(d,p,o),c.input.setVal(j,a,e.getVal()[0])}var d,e,f,h,i,j,l,m,n,o,p,r,s,t;t=g(this),j=c.input.getName(t),l=j.lastIndexOf("/")!==-1?j.substring(j.lastIndexOf("/")+1):j,m=c.input.getCalculation(t),o=c.input.getXmlType(t),p=c.input.getConstraint(t),r=c.input.getRelevant(t),e=k.node(j),f=e.get(),f.length>1&&a.repeatPath&&j.indexOf(a.repeatPath)!==-1?(h=k.node(a.repeatPath,a.repeatIndex).get().find(l),i=g(f).index(h),b(i)):1===f.length?(i=0,b(i)):f.each(function(a){b(a)})})},d.prototype.validationUpdate=function(a){var b,c=this;a=a||{},b=this.getNodesToUpdate("data-constraint","",a).add(this.getNodesToUpdate("data-required","",a)),b.each(function(){c.validateInput(g(this))})},d.prototype.preloads={init:function(a){var b,c,d,e,f,h,i,j=this;n.find("input[data-preload], select[data-preload], textarea[data-preload]").each(function(){i=g(this),h=a.input.getProps(i),b=i.attr("data-preload").toLowerCase(),c=i.attr("data-preload-params").toLowerCase(),"undefined"!=typeof j[b]?(f=k.node(h.path,h.index),d=f.getVal()[0],e=j[b]({param:c,curVal:d,dataNode:f}),f.setVal(e,null,h.xmlType)):console.log('Preload "'+b+'" not supported. May or may not be a big deal.')})},timestamp:function(a){var b;return"start"===a.param?a.curVal.length>0?a.curVal:k.evaluate("now()","string"):"end"===a.param?(n.on("beforesave",function(){b=k.evaluate("now()","string"),a.dataNode.setVal(b,null,"datetime")}),k.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(a){var b,c,d,e;return 0===a.curVal.length?(b=new Date(k.evaluate("today()","string")),c=b.getFullYear().toString().pad(4),d=(b.getMonth()+1).toString().pad(2),e=b.getDate().toString().pad(2),c+"-"+d+"-"+e):a.curVal},property:function(a){var b;return 0===a.curVal.length?(b=k.node('instance("__session")/session/context/'+a.param),b.get().length?b.getVal()[0]:"no "+a.param+" property in enketo"):a.curVal},context:function(a){return 0===a.curVal.length?"application"===a.param?"enketo":a.param+" not supported in enketo":a.curVal},patient:function(a){return 0===a.curVal.length?"patient preload item not supported in enketo":a.curVal},user:function(a){return 0===a.curVal.length?"user preload item not supported in enketo yet":a.curVal},uid:function(a){return 0===a.curVal.length?k.evaluate('concat("uuid:", uuid())',"string"):a.curVal},instance:function(a){return gLoadedInstanceID||(gLoadedInstanceID=a.curVal.length>0?a.curVal:k.evaluate("concat('uuid:', uuid())","string")),n.data({instanceID:gLoadedInstanceID}),gLoadedInstanceID}},d.prototype.repeat={init:function(a){var b=this,c=n.find(".or-repeat");this.formO=a,c.prepend('<span class="repeat-number"></span>'),c.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<div class="repeat-buttons"><button type="button" class="btn btn-default repeat"><i class="icon icon-plus"> </i></button><button type="button" disabled class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),c.filter("*:not([data-repeat-count])").each(function(){b.updateViewInstancesFromModel(g(this))}),n.on("click","button.repeat:enabled",function(){return b.clone(g(this).closest(".or-repeat")),!1}),n.on("click","button.remove:enabled",function(){return b.remove(g(this).closest(".or-repeat.clone")),
!1}),this.countUpdate()},updateViewInstancesFromModel:function(a){var b=this,c=a.attr("name"),d=n.find('.or-repeat[name="'+c+'"]').index(a),e=k.node(c,d).getRepeatSeries();e.length>1&&(this.clone(a,e.length-1),a.siblings(".or-repeat").addBack().children(".or-group, .or-group-data").children(".or-repeat:not([data-repeat-count])").each(function(){b.updateViewInstancesFromModel(g(this))}))},updateRepeatInstancesFromCount:function(a){var b,c=this,d=a.attr("data-repeat-count")||"",e=a.attr("name"),f=n.find('.or-repeat[name="'+e+'"]').index(a),h=d.length>0?k.evaluate(d,"number",e,f,!0):0,i=a.siblings('.or-repeat[name="'+e+'"]').length+1,j=h-i;if(j>0)b=a.siblings().addBack().last(),c.clone(b,j);else if(j<0)for(j=Math.abs(j)>i-1?-i+1:j;j<0;j++)b=a.siblings('.or-repeat[name="'+e+'"]').addBack().last(),this.remove(b,0);a.siblings(".or-repeat").addBack().children(".or-group, .or-group-data").children(".or-repeat[data-repeat-count]").each(function(){c.updateRepeatInstancesFromCount(g(this))})},countUpdate:function(a){var b,c=this;a=a||{},b=this.formO.getNodesToUpdate("data-repeat-count",".or-repeat:not(.clone)",a),b.each(function(){c.updateRepeatInstancesFromCount(g(this))})},clone:function(a,b){var c,d,e,h,i,j,l,m,o=this,p=!!b;if(b=b||1,1!==a.length)return console.error("Nothing to clone"),!1;for(c=a.siblings(".or-repeat"),d=a.hasClass("clone")?c.not(".clone").eq(0):a,e=d.clone(!0,!0),m=d.attr("name"),e.addClass("clone").find(".clone").remove(),e.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function(){o.formO.setValid(g(this))}),j=n.find('.or-repeat[name="'+m+'"]').index(a),e.clearInputs(""),l=b+j;j<l;j++)e.find(".option-wrapper").each(this.fixRadioNames),f.hasInitialized()&&f.destroy(e),e.insertAfter(a),m.length>0&&j>=0&&k.cloneRepeat(m,j),e.trigger("addrepeat",[j+1,p]),i=e.find('[type="radio"],[type="checkbox"]'),i.parent("label").removeAttr("data-checked"),i.filter(":checked").parent("label").attr("data-checked","true"),f.hasInitialized()?f.init(e):o.formO.calcUpdate({repeatPath:m,repeatIndex:j+1}),c=c.add(e),e=e.clone();return h=c.add(a).add(c.find(".or-repeat")),this.numberRepeats(h),this.toggleButtons(h),!0},remove:function(a,b){var c=this,d=a.prev(".or-repeat"),e=a.attr("name"),f=n.find('.or-repeat[name="'+e+'"]').index(a),g=a.siblings(".or-repeat");b="undefined"!=typeof b?b:600,a.hide(b,function(){a.remove(),c.numberRepeats(g),c.toggleButtons(g),d.trigger("removerepeat"),k.node(e,f).remove()})},fixRadioNames:function(a,b){g(b).find('input[type="radio"]').attr("name",Math.floor(1e7*Math.random()+1))},toggleButtons:function(a){var b,c;a=a&&0!==a.length?a:n,a.each(function(){b=g(this),c=b.siblings(".or-repeat").addBack(),c.children(".repeat-buttons").find("button.repeat, button.remove").prop("disabled",!0),c.last().children(".repeat-buttons").find("button.repeat").prop("disabled",!1),c.children(".repeat-buttons").find("button.remove").not(":first").prop("disabled",!1)})},numberRepeats:function(a){a.each(function(){var a,b,c,d=g(this);0===d.prev(".or-repeat").length&&(a=g(this).siblings(".or-repeat"),b=a.length+1,b>1?(d.find(".repeat-number").text("1"),c=2,a.each(function(){g(this).find(".repeat-number").eq(0).text(c),c++})):d.find(".repeat-number").eq(0).empty())})}},d.prototype.setEventHandlers=function(){var a=this;n.attr("onsubmit","return false;"),n.on("blur",'input:not([type="text"], [type="radio"], [type="checkbox"])',function(){var a=g(this);"undefined"!=typeof a.prop("validity").badInput&&a.prop("validity").badInput&&a.val("")}),n.on("change.file","input:not([readonly]):not(.ignore), select:not([readonly]):not(.ignore), textarea:not([readonly]):not(.ignore)",function(b){var c,d,e=g(this),f={path:a.input.getName(e),inputType:a.input.getInputType(e),xmlType:a.input.getXmlType(e),enabled:a.input.isEnabled(e),constraint:a.input.getConstraint(e),val:a.input.getVal(e),required:a.input.getRequired(e),index:a.input.getIndex(e)};f.enabled&&"hidden"!==f.inputType&&f.required&&(d=f.required),f.val.length>0&&"file"===f.inputType&&e[0].files[0]&&e[0].files[0].size>0&&(f.val=i.getFilename(e[0].files[0],e[0].dataset.filenamePostfix)),c=k.node(f.path,f.index).setVal(f.val,f.constraint,f.xmlType,d,!0),a.validateInput(e).then(function(a){e.trigger("valuechange.enketo",a)})}),n.on("focus fakefocus","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(b){a.progress.update(b.target)}),n.on("focus blur fakefocus fakeblur","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(b){var c=g(this),d={path:a.input.getName(c),val:a.input.getVal(c),required:a.input.getRequired(c),index:a.input.getIndex(c)},e=c.closest(".question"),f=e.find("legend").eq(0),h=e.hasClass("invalid-required")||e.hasClass("invalid-constraint"),i=c.parentsUntil(".or",".or-appearance-list-nolabel").length>0,l=e.find(".required-subtle"),m=j("form.required"),n=d.required?k.node(d.path,d.index).validateRequired(d.required):null;"focusin"===b.type||"fakefocus"===b.type?(e.addClass("focus"),n&&0===l.length&&!i&&(l=g('<span class="required-subtle" style="color: transparent;">'+m+"</span>"),n.then(function(a){a===!1&&(f.length>0?f.append(l):l.insertBefore(c),h||l.show(function(){g(this).removeAttr("style")}))}))):"focusout"!==b.type&&"fakeblur"!==b.type||(e.removeClass("focus"),n?n.then(function(a){a===!0&&l.remove()}):h||l.removeAttr("style"))}),k.$events.on("dataupdate",function(b,c){a.calcUpdate(c),a.repeat.countUpdate(c),a.branchUpdate(c),a.outputUpdate(c),a.itemsetUpdate(c),l.validateContinuously===!0&&a.validationUpdate(c),a.editStatus.set(!0)}),n.on("addrepeat",function(b,c){var d=g(b.target);a.setAllVals(d,c),a.calcUpdate({repeatPath:d.attr("name"),repeatIndex:c}),a.progress.update()}),n.on("removerepeat",function(){a.progress.update()}),n.on("changelanguage",function(){a.outputUpdate()})},d.prototype.setValid=function(a,b){var c=b?"invalid-"+b:"invalid-constraint invalid-required";this.input.getWrapNodes(a).removeClass(c).find(".required-subtle").remove()},d.prototype.setInvalid=function(a,b){b=b||"constraint",this.input.getWrapNodes(a).addClass("invalid-"+b).find(".required-subtle").attr("style","color: transparent;")},d.prototype.clearIrrelevant=function(){this.branchUpdate(null,!0)},d.prototype.validateAll=function(){return this.options.clearIrrelevantImmediately===!1&&this.clearIrrelevant(),this.validateContent(n).then(function(a){return n.trigger("validationcomplete.enketo"),a})},d.prototype.validateContent=function(a){var b,c=this;a.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){c.setValid(g(this))});var d=a.find(".question").addBack(".question").map(function(){var a=g(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return 0===a.length?h.resolve():c.validateInput(a.eq(0))}).toArray();return h.all(d).then(function(){return b=a.find(".invalid-required, .invalid-constraint").addBack(".invalid-required, .invalid-constraint").eq(0),b.length>0&&(c.pages.active&&c.pages.flipToPageContaining(b),b[0].scrollIntoView()),0===b.length}).catch(function(a){return!1})},d.prototype.progress={status:0,lastChanged:null,$all:null,updateTotal:function(){this.$all=n.find(".question").not(".disabled").filter(function(){return 0===g(this).parentsUntil(".or",".disabled").length})},update:function(a){var b;this.$all&&a||this.updateTotal(),this.lastChanged=a||this.lastChanged,b=Math.round(100*(this.$all.index(g(this.lastChanged).closest(".question"))+1)/this.$all.length),b>0&&b!==this.status&&(this.status=b,n.trigger("progressupdate.enketo",b))},get:function(){return this.status}},d.prototype.isValid=function(){return!(n.find(".invalid-required, .invalid-constraint").length>0)},d.prototype.addPageBreaks=function(){},d.prototype.pathToAbsolute=function(a,b){var c;return 0===a.indexOf("/")?a:(c=k.evaluate(a,"node",b,0,!0),k.getXPath(c,"instance",!1))},d.prototype.validateInput=function(a){var b,c=this,d={path:c.input.getName(a),inputType:c.input.getInputType(a),xmlType:c.input.getXmlType(a),enabled:c.input.isEnabled(a),constraint:c.input.getConstraint(a),calculation:c.input.getCalculation(a),required:c.input.getRequired(a),readonly:c.input.getReadonly(a),val:c.input.getVal(a)};return!d.readonly||d.val||d.required||d.constraint||d.calculation?(d.enabled&&"hidden"!==d.inputType?(d.ind=c.input.getIndex(a),b=k.node(d.path,d.ind).validate(d.constraint,d.required,d.xmlType)):b=h.resolve({requiredValid:!0,constraintValid:!0}),b.then(function(b){var e=!1,f=b.requiredValid!==!1&&b.constraintValid!==!1;return"hidden"!==d.inputType&&(d.$q=c.input.getWrapNodes(a),e=d.$q.hasClass("invalid-required")||d.$q.hasClass("invalid-constraint")),"hidden"!==d.inputType&&(b.requiredValid===!1?(c.setValid(a,"constraint"),c.setInvalid(a,"required")):b.constraintValid===!1?(c.setValid(a,"required"),c.setInvalid(a,"constraint")):(c.setValid(a,"constraint"),c.setValid(a,"required"))),f||e||a.trigger("invalidated.enketo"),f}).catch(function(b){throw console.error("validation error",b),c.setInvalid(a,"constraint"),b})):h.resolve()}}var e=a("./Form-model"),f=a("./widgets-controller"),g=a("jquery"),h=a("lie"),i=a("./utils"),j=a("./fake-translator").t,k=a("../../package"),l=a("text!enketo-config");a("./plugins"),a("./extend"),a("jquery-touchswipe"),d.getRequiredTransformerVersion=function(){return k.devDependencies?k.devDependencies["enketo-transformer"]:""},c.exports=d})},{"../../package":27,"./Form-model":29,"./extend":32,"./fake-translator":33,"./plugins":35,"./utils":38,"./widgets-controller":39,jquery:22,"jquery-touchswipe":21,lie:24,"text!enketo-config":1}],31:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d=a("jquery"),e=function(a,b,c){this.element=a,this.options=b||{},this.namespace=this.namespace||"somewidget",this.options.touch="undefined"!=typeof this.options.touch&&this.options.touch,this.event=c||null};e.prototype={destroy:function(a){d(a).removeData(this.namespace).off("."+this.namespace).show().next(".widget").remove()},disable:function(a){d(a).next(".widget").addClass("readonly")},enable:function(a){a.readOnly||d(a).next(".widget").removeClass("readonly")},update:function(){}},c.exports=e})},{jquery:22}],32:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a){String.prototype.pad=function(a){for(var b=this;b.length<a;)b="0"+b;return b},Date.prototype.toISOLocalString=function(){var a={},b=function(a){return a<10?"0"+a:a};return"Invalid Date"===this.toString()?this.toString():(a.minstotal=this.getTimezoneOffset(),a.direction=a.minstotal<0?"+":"-",a.hrspart=b(Math.abs(Math.floor(a.minstotal/60))),a.minspart=b(Math.abs(Math.floor(a.minstotal%60))),new Date(this.getTime()-60*a.minstotal*1e3).toISOString().replace("Z",a.direction+a.hrspart+":"+a.minspart))}})},{}],33:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};var e;d(function(a,b,c){"use strict";function d(a,b){var c="",d=e;return a.split(".").forEach(function(a){d=d?d[a]:"",c=d}),b=b||{},c=c.replace(/__([^_]+)__/,function(a,c){return b[c]})}c.exports={t:d}}),e={constraint:{invalid:"Value not allowed",required:"This field is required"},"esri-geopicker":{"coordinate-mgrs":"MGRS coordinate",decimal:"decimal",degrees:"degrees, minutes, seconds","latitude-degrees":"latitude (dÂ° mâ sâ N)","longitude-degrees":"longitude (dÂ° mâ sâ W)",mgrs:"MGRS",notavailable:"Not Available",utm:"UTM","utm-easting":"easting (m)","utm-hemisphere":"hemisphere","utm-north":"North","utm-northing":"northing (m)","utm-south":"South","utm-zone":"zone"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y Â°)",longitude:"longitude (x.y Â°)",points:"points",searchPlaceholder:"search for place or address"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},widget:{comment:{update:"Update"}}}},{}],34:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(){return n?j.resolve(!0):j.reject(new Error("FileReader not supported."))}function e(){return n}function f(){return!1}function g(a){return new j(function(b,c){var d,e;if(a)if("string"==typeof a){var f=window.gLoadedInstanceID,g={fileName:a};m.retrieveFile(f,g),b(g.dataUrl?g.dataUrl:location.origin+"/"+a)}else"object"==typeof a?i(a)?(d=new Error("File too large (max "+Math.round(100*_getMaxSize()/1048576)/100+" Mb)"),c(d)):(e=new FileReader,e.onload=function(a){b(a.target.result)},e.onerror=function(a){c(d)},e.readAsDataURL(a)):c(new Error("Unknown error occurred"));else b(null)})}function h(){var a,b,c,d,e=[];return k('form.or input[type="file"]').each(function(){c=k(this),d=c.parent().find(".file-preview").find("img"),a=this.files[0],a&&a.name&&(b=l.getFilename(a,this.dataset.filenamePostfix),a=new Blob([a],{type:a.type}),a.name=b,a.dataUrl=d.attr("src"),e.push(a))}),e}function i(a){return!1}var j=a("lie"),k=a("jquery"),l=a("./utils"),m=a("../../webform/file-storage"),n="undefined"!=typeof FileReader,o="";c.exports={isSupported:e,notSupportedAdvisoryMsg:o,isWaitingForPermissions:f,init:d,getFileUrl:g,getCurrentFiles:h}})},{"../../webform/file-storage":64,"./utils":38,jquery:22,lie:24}],35:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d=a("jquery");d.fn.clearInputs=function(a){return a=a||"edit",this.each(function(){d(this).find(".file-preview").remove(),d(this).find("input, select, textarea").not(".ignore").each(function(){var b=d(this),c=b.attr("type");switch("SELECT"===b.prop("nodeName").toUpperCase()&&(c="select"),"TEXTAREA"===b.prop("nodeName").toUpperCase()&&(c="textarea"),c){case"date":case"datetime":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"file":b.removeAttr("data-previous-file-name data-loaded-file-name");case"hidden":case"textarea":""!==b.val()&&b.val("").trigger(a);break;case"radio":case"checkbox":b.prop("checked")&&(b.prop("checked",!1),b.trigger(a));break;case"select":b[0].selectedIndex>0&&(b[0].selectedIndex=0,b.trigger(a));break;default:console.error("Unrecognized input type found when trying to reset",this)}})})},d.fn.reverse=[].reverse})},{jquery:22}],36:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(){var a={},b=document.body.appendChild(document.createElement("DIV"));b.style.width="1in",b.style.padding="0",a.v=b.offsetWidth,b.parentNode.removeChild(b),n=a.v}function e(){var a;for(var b in document.styleSheets)if(document.styleSheets.hasOwnProperty(b)&&(a=document.styleSheets[b],"print"===a.media.mediaText))return a;return null}function f(){return q('link[media="print"]:eq(0)')}function g(){o=o||e(),p=p||f(),o.media.mediaText="all",p.attr("media","all")}function h(){o.media.mediaText="print",p.attr("media","print"),q(".print-height-adjusted, .print-width-adjusted, .main").removeAttr("style").removeClass("print-height-adjusted print-width-adjusted"),q(".back-to-screen-view").off("click").remove()}function i(){return/theme-.*grid.*/.test(q("form.or").attr("class"))}function j(a){var b,c,d,e,f,g;q(".main").css("width",k(a)).addClass("print-width-adjusted"),setTimeout(function(){f=q("#form-title").outerWidth()-1,q(".question, .note, .trigger").not(".draft").each(function(){if(c=q(this),d=c.offset().top,e=e||0===e?e:d,b=b||c,d===e)b=b.add(c);else if(d>e){var a,h=[],i=0,j=0;b.each(function(){a=q(this).outerHeight(),j=a>j?a:j,h.push(Number(q(this).css("width").replace("px","")))}),b.addClass("print-height-adjusted").css("height",j+"px"),h.forEach(function(a){i+=a}),i<f&&(g=f-i,b.each(function(a){var b=h[a]+h[a]/i*g;q(this).css("width",Math.floor(100*b/f*100)/100+"%").addClass("print-width-adjusted")})),b=c,e=c.offset().top}else console.error("unexpected question top position: ",d,"for element:",c,"expected >=",e)}),q(".main").css("width","auto").removeClass("print-width-adjusted"),q(window).trigger("printviewready")},1e3)}function k(a){var b,c=.4,d={A4:{width:8.27,height:11.69},letter:{width:8.5,height:11}};return b="portrait"===a.orientation?d[a.format].width:d[a.format].height,(b-2*c)*n+"px"}function l(a){var b={dialog:"print",heading:"Select Print Settings"},c={posButton:"Prepare",posAction:function(a){j(a),q(window).one("printviewready",function(){window.print()})},negButton:"Close",negAction:function(){h()},afterAction:function(){setTimeout(function(){h()},1500)}};a(b,c)}function m(a){i()?(g(),q('<button class="btn back-to-screen-view">Back to Normal View</button>').prependTo(q("form.or")).on("click",function(){h()}),l(a)):window.print()}var n,o,p,q=a("jquery");q(document).ready(function(){d()}),c.exports=m})},{jquery:22}],37:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d={inputtypes:{}},e=["date","datetime","time"];e.forEach(function(a){var b=document.createElement("input");b.setAttribute("type",a),d.inputtypes[a]="text"!==b.type}),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(d.touch=!0,document.documentElement.classList.add("touch")):d.touch=!1,c.exports=d})},{}],38:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g,h,i=new RegExp(b+"\\s*\\(","g"),j=[];if(!a||!b)return j;for(;null!==(d=i.exec(a));){for(e=1,h=[],f=d.index,c=i.lastIndex,g=c;0!==e;)c++,"("===a[c]?e++:")"===a[c]?e--:","===a[c]&&1===e&&(h.push(a.substring(g,c).trim()),g=c+1);h.push(a.substring(g,c).trim()),j.push([a.substring(f,c+1),h])}return j}function e(a){return/^".+"$/.test(a)||/^'.+'$/.test(a)?a.substring(1,a.length-1):a}function f(a,b){var c;return"object"==typeof a&&a.name?(b=b||"",c=a.name.split("."),c.length>1?c[c.length-2]+=b:1===c.length&&(c[0]+=b),c.join(".")):""}function g(a){for(var b=[],c=a.length>>>0;c--;)b[c]=a[c];return b}function h(a){return!isNaN(parseFloat(a))&&isFinite(a)}function i(a){var b,c,d;if(j)return j[a];for(b=document.cookie.split("; "),j={},d=b.length-1;d>=0;d--)c=b[d].split("="),c[1]=decodeURIComponent(c[1]),"s:"===c[1].substr(0,2)&&(c[1]=c[1].slice(2),c[1]=c[1].slice(0,c[1].lastIndexOf("."))),j[c[0]]=decodeURIComponent(c[1]);return j[a]}var j;c.exports={parseFunctionFromExpression:d,stripQuotes:e,getFilename:f,toArray:g,isNumber:h,readCookie:i}})},{}],39:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p=!1,q=a("text!enketo-config"),r=a("./support"),s=a("jquery"),t=a("widgets").filter(function(a){return a.selector});"string"==typeof q&&(q=JSON.parse(q)),f=function(a,b){e=s("form.or"),a=a||e,d=d||b,t.forEach(function(b){l(b,a)}),p=!0},j=function(){return p},g=function(a){for(var b,c,d=0;d<t.length;d++)b=t[d],b.name&&(c=k(a,b.selector),c[b.name]("enable"))},h=function(a){for(var b,c,d=0;d<t.length;d++)b=t[d],b.name&&(c=k(a,b.selector),c[b.name]("disable"))},i=function(a){for(var b,c,d=0;d<t.length;d++)b=t[d],b.name&&(c=k(a,b.selector),c[b.name]("destroy"))},k=function(a,b){return b?"form"===b?e:a.find(b):s()},l=function(a,b){var c;return a.options=a.options||{},a.options.touch=r.touch,a.name?(a.helpersRequired&&a.helpersRequired.length>0&&(a.options.helpers={},a.helpersRequired.forEach(function(b){a.options.helpers[b]=d[b]})),c=k(b,a.selector),void(c.length&&(c[a.name](a.options),m(a,c),n(a,c),o(a,c)))):console.error("widget doesn't have a name")},m=function(a,b){b.length>0&&e.on("changelanguage",function(){b[a.name]("update")})},n=function(a,b){b.length>0&&a.list&&b.on("changeoption",function(){s(this)[a.name]("update")})},o=function(a,b){var c=b.prop("nodeName").toLowerCase();b.length>0&&("input"===c||"select"===c||"textarea"===c)&&b.on("inputupdate.enketo",function(){s(this)[a.name]("update")})},c.exports={init:f,enable:g,disable:h,destroy:i,hasInitialized:j}})},{"./support":37,jquery:22,"text!enketo-config":1,widgets:40}],40:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){var d=[a("../widget/note/notewidget"),a("../widget/select-desktop/selectpicker"),a("../widget/select-mobile/selectpicker"),a("../widget/select-autocomplete/autocomplete"),a("../widget/geo/geopicker"),a("../widget/textarea/textarea"),a("../widget/table/tablewidget"),a("../widget/radio/radiopicker"),a("../widget/date/datepicker-extended"),a("../widget/time/timepicker-extended"),a("../widget/datetime/datetimepicker-extended"),a("../widget/compact/compactpicker"),a("../widget/file/filepicker"),a("../widget/select-likert/likertitem"),a("../widget/distress/distresspicker"),a("../widget/horizontal-choices/horizontalchoices"),a("../widget/analog-scale/analog-scalepicker"),a("../widget/big-image/image-viewer"),a("../widget/comment/commentwidget")];c.exports=d})},{"../widget/analog-scale/analog-scalepicker":42,"../widget/big-image/image-viewer":43,"../widget/comment/commentwidget":44,"../widget/compact/compactpicker":45,"../widget/date/datepicker-extended":46,"../widget/datetime/datetimepicker-extended":47,"../widget/distress/distresspicker":48,"../widget/file/filepicker":49,"../widget/geo/geopicker":50,"../widget/horizontal-choices/horizontalchoices":51,"../widget/note/notewidget":52,"../widget/radio/radiopicker":53,"../widget/select-autocomplete/autocomplete":54,"../widget/select-desktop/selectpicker":56,"../widget/select-likert/likertitem":57,"../widget/select-mobile/selectpicker":58,"../widget/table/tablewidget":59,"../widget/textarea/textarea":60,"../widget/time/timepicker-extended":61}],41:[function(a,b,c){var d=a("enketo-xpathjs");b.exports=function(){var a=new d.XPathEvaluator;d.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:function(){return a.createExpression.apply(a,arguments)},jsCreateNSResolver:function(){return a.createNSResolver.apply(a,arguments)},jsEvaluate:function(){return a.evaluate.apply(a,arguments)}}})}},{"enketo-xpathjs":19}],42:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery"),g="analogscalepicker";a("bootstrap-slider-basic"),d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=f(this.element).closest(".question"),b=f(this.element),c=Number(this.element.value)||-1;this.props=this._getProps(a),b.slider({reversed:"vertical"===this.props.orientation,min:0,max:100,orientation:this.props.orientation,step:this.props.step,value:c,enabled:!this.props.readonly}),this.$widget=b.next(".widget"),this.$slider=this.$widget.find(".slider"),this.$labelContent=f('<div class="label-content widget" />').prependTo(a),this.$originalLabels=a.find(".question-label, .or-hint, .or-required-msg, .or-constraint-msg"),this.$labelContent.append(this.$originalLabels),this._renderResetButton(),this._renderLabels(),this._renderScale(),this._setChangeListener(),this._setResizeListener(),b.trigger("programmaticChange"+this.namespace)},d.prototype._getProps=function(a){var b=a.attr("class").split(" ").map(function(a,b){return a.substring(14)}),c=this.element.attributes["data-type-xml"].value;return{touch:this.options.touch,readonly:this.element.readOnly,step:"decimal"===c?.1:1,orientation:b.indexOf("horizontal")!==-1?"horizontal":"vertical"}},d.prototype._renderLabels=function(){var a=this.$labelContent.find(".question-label.active"),b=a.html().split(/\|/).map(function(a){return a.trim()});this.$mainLabel=this.$mainLabel||f('<span class="question-label widget active" />').insertAfter(a),this.$mainLabel.empty().append(b[0]),this.$maxLabel=this.$maxLabel||f('<div class="max-label" />').prependTo(this.$widget),this.$maxLabel.empty().append(b[1]),this.$minLabel=this.$minLabel||f('<div class="min-label" />').appendTo(this.$widget),this.$minLabel.empty().append(b[2]),b[3]?(this.$showValue=this.$showValue||f('<div class="widget show-value" />').appendTo(this.$labelContent),this.$showValue.empty().append('<div class="show-value__box">'+b[3]+'<span class="show-value__value">'+this.element.value+"</span></div>")):this.$showValue&&(this.$showValue.remove(),this.$showValue=void 0)},d.prototype._renderScale=function(){var a,b=f('<div class="scale"></div>');if("vertical"===this.props.orientation)for(a=100;a>=0;a-=10)b.append(this._getNumberHtml(a));else for(a=0;a<=100;a+=10)b.append(this._getNumberHtml(a));this.$slider.prepend(b)},d.prototype._getNumberHtml=function(a){return'<div class="scale__number"><div class="scale__ticks"></div><div class="scale__value">'+a+"</div></div>"},d.prototype._renderResetButton=function(){var a=this;this.$resetBtn=f('<button class="btn-icon-only btn-reset"><i class="icon icon-refresh"></i></button>').appendTo(this.$widget).on("click",function(){return f(a.element).slider("setValue",0,!1),f(a.element).val("").trigger("programmaticChange"+a.namespace),!1}).prop("disabled",a.props.readonly)},d.prototype._updateCurrentValueShown=function(){this.$showValue&&this.$showValue.find(".show-value__value").text(this.element.value)},d.prototype._setChangeListener=function(){var a=this;f(this.element).on("slideStop."+this.namespace+" programmaticChange"+this.namespace,function(){var b=""===this.value;f(this).trigger("change"),a.$resetBtn.prop("disabled",b||a.props.readonly),a.$slider.toggleClass("slider--empty",b),a._updateCurrentValueShown()})},d.prototype._setResizeListener=function(){var a=f(this.element).closest(".question");a.hasClass("or-appearance-horizontal")||a.on("pageflip.enketo",this._stretchHeight)},d.prototype._stretchHeight=function(){var a=f(this).closest(".question").css("min-height","auto"),b=a.outerHeight(),c=a.closest(".or"),d=c.offset().top+c.height()-(a.offset().top+b)-10;d&&a.css("min-height",b+d+"px")},d.prototype.destroy=function(a){f(a).before(f(a).siblings(".label-content").find(".question-label:not(.widget), .or-hint, .or-required-msg, .or-constraint-msg")).removeData(this.namespace).off("."+this.namespace).show().siblings(".widget").remove()},d.prototype.disable=function(){var a=""!==this.element.value?Number(this.element.value):0;f(this.element).slider("disable").slider("setValue",a,!1)},d.prototype.enable=function(){f(this.element).slider("enable")},d.prototype.update=function(){var a=this,b=""!==this.element.value?Number(this.element.value):0,c=f(this.element),d=c.slider("getValue");b!==d&&f(this.element).slider("setValue",b,!1).trigger("programmaticChange"+a.namespace),this._renderLabels()},f.fn[g]=function(a,b){return this.each(function(){var c=f(this),e=f(this).data(g);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,new d(this,a,b))})},c.exports={name:g,selector:'.or-appearance-analog-scale input[type="number"]'}})},{"../../js/Widget":31,"bootstrap-slider-basic":4,jquery:22}],43:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery"),g="imageViewer";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){f(this.element).on("click",function(){var a=f(this),b=a.attr("href"),c=a.find("img"),d=c.attr("src");return a.attr("href",d),c.attr("src",b),a.toggleClass("open"),!1})},f.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=f(this),e=c.data(g);e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,new d(this,a,b))})},c.exports={name:g,selector:"a.or-big-image"}})},{"../../js/Widget":31,jquery:22}],44:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery"),g="comment",h=a("translator").t;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){this.$linkedQuestion=this._getLinkedQuestion(this.element),this.$commentQuestion=f(this.element).closest(".question"),1===this.$linkedQuestion.length&&(this.$commentQuestion.addClass("hide").attr("role","comment"),this.$commentButton=f('<a class="btn-icon-only btn-comment" type="button" href="#"><i class="icon"> </i></a>'),this._setCommentButtonState(this.element.value),this.$linkedQuestion.find(".question-label").last().after(this.$commentButton),this._setCommentButtonHandler(),this._setValidationHandler())},d.prototype._getLinkedQuestion=function(a){var b=f(a),c=this.options.helpers.input.getName(b),d=a.dataset.for.trim(),e=this.options.helpers.pathToAbsolute(d,c),g=f(a).closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNodes(g.find('[name="'+e+'"], [data-name="'+e+'"]')).eq(0)},d.prototype._commentHasError=function(){return this.$commentQuestion.hasClass("invalid-required")||this.$commentQuestion.hasClass("invalid-constraint")},d.prototype._setCommentButtonState=function(a,b){a="string"==typeof a?a.trim():a,this.$commentButton.toggleClass("empty",!a),this.$commentButton.toggleClass("invalid",!!b)},d.prototype._setCommentButtonHandler=function(){var a=this;this.$commentButton.click(function(){return a._isCommentModalShown(a.$linkedQuestion)?a._hideCommentModal(a.$linkedQuestion):a._showCommentModal(),!1})},d.prototype._setValidationHandler=function(){var a=this;f("form.or").on("validationcomplete.enketo",function(b){var c=a._commentHasError(),d=a.element.value;a._setCommentButtonState(d,c)})},d.prototype._isCommentModalShown=function(a){return 1===a.find(".or-comment-widget").length},d.prototype._showCommentModal=function(){var a,b,c,d,e=this,g=f(this.element).closest(".question").clone(!1),i=h("widget.comment.update")||"Update",j=f('<button class="btn btn-primary or-comment-widget__content__btn-update" type="button">'+i+"</button>"),k=f('<button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>');c=g.removeClass("hide").find("input, textarea").addClass("ignore").removeAttr("name data-for data-type-xml").removeData(),d=f('<div class="or-comment-widget__overlay"></div>'),b=f('<div class="or-comment-widget__content"></div>').append(g).append(k).append(j),a=f('<section class="widget or-comment-widget"></section>').append(d).append(b),this.$linkedQuestion.find(".or-comment-widget").remove().end().prepend(a).before(d.clone(!1)),c.focus(),a.get(0).scrollIntoView(!1),j.on("click",function(){var a,b=c.val();return f(e.element).val(b).trigger("change"),a=e._commentHasError(),e._setCommentButtonState(b,a),e._hideCommentModal(e.$linkedQuestion),e.options.helpers.input.validate(f(e.$linkedQuestion.get(0).querySelector("input, select, textarea"))),!1}),k.add(d).on("click",function(){return e._hideCommentModal(e.$linkedQuestion),!1})},d.prototype._hideCommentModal=function(a){a.find(".or-comment-widget").remove().end().prev(".or-comment-widget__overlay").remove()},d.prototype.destroy=function(a){var b=this._getLinkedQuestion(a),c=b.find(".btn-comment");this._hideCommentModal(b),c.remove(),f(a).removeData(this.namespace).off("."+this.namespace).closest(".question").removeClass("hide")},f.fn[g]=function(a,b){
return a=a||{},this.each(function(){var c=f(this),e=c.data(g);e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,new d(this,a,b))})},c.exports={name:g,selector:'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]',helpersRequired:["input","pathToAbsolute"]}})},{"../../js/Widget":31,jquery:22,translator:33}],45:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="compactpicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){e(this.element).find(".option-label").each(function(){var a=e(this);a.siblings("img, video, audio").length>0&&a.css("display","none")})},d.prototype.destroy=function(){},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(g,new d(this,a,b))})},c.exports={name:"compactpicker",selector:'.or-appearance-compact, .or-appearance-quickcompact, [class*="or-appearance-compact-"]'}})},{"../../js/Widget":31,jquery:22}],46:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("bootstrap-datepicker");var h="datepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this,b=g(this.element).parent("label"),c=b.hasClass("or-appearance-year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:b.hasClass("or-appearance-month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"day"},d=this._createFakeDateInput(c.format);this._setManualHandler(d),this._setFocusHandler(d),this._setResetHandler(d),d.datepicker({format:c.format,autoclose:!0,todayHighlight:!0,startView:c.startView,minViewMode:c.minViewMode}).on("changeDate",function(){var b=g(this).val();"decade"===c.startView&&4===b.length?b+="-01-01":"year"===c.startView&&b.length<8&&(b+="-01"),g(a.element).val(b).trigger("change").blur()})},d.prototype._createFakeDateInput=function(a){var b=g(this.element),c=g('<div class="widget date"><input class="ignore input-small" type="text" value="'+b.val()+'" placeholder="'+a+'" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),d=c.find("input");return b.hide().after(c),d},d.prototype._setManualHandler=function(a){},d.prototype._setResetHandler=function(a){a.next(".btn-reset").on("click",function(){a.val("").trigger("changeDate").datepicker("update")})},d.prototype._setFocusHandler=function(a){var b=this;a.on("focus blur",function(a){g(b.element).trigger("fake"+a.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h),i=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;e||"object"!=typeof a||a.touch&&f.inputtypes.date&&!i.test(navigator.userAgent)?e&&"string"==typeof a&&e[a](this):c.data(h,new d(this,a,b))})},c.exports={name:h,selector:'input[type="date"]:not([readonly])'}})},{"../../js/Widget":31,"../../js/support":37,"bootstrap-datepicker":3,jquery:22}],47:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("../../js/extend"),a("bootstrap-datepicker"),a("bootstrap-timepicker");var h="datetimepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){function a(){if(h.val().length>0&&i.val().length>0){var a=h.val().split("-"),c=i.val().split(":");b.val(new Date(a[0],a[1]-1,a[2],c[0],c[1]).toISOLocalString()).trigger("change").blur()}else b.val("").trigger("change").blur()}var b=g(this.element),c=b.val().length>0?new Date(b.val()).toISOLocalString():"",d=c.split("T"),e=d[0],f=d[1]&&d[1].length>4?d[1].substring(0,5):"",h=this._createFakeDateInput(e),i=this._createFakeTimeInput(f);b.hide().after('<div class="datetimepicker widget" />'),b.siblings(".datetimepicker").append(h.closest(".date")).append(i.closest(".bootstrap-timepicker")),h.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),i.timepicker({defaultTime:f.length>0?"value":"current",showMeridian:!1}).val(f).closest(".widget").find("input").addClass("ignore"),this._setManualHandler(h),this._setFocusHandler(h.add(i)),h.on("change changeDate",function(){return a(),!1}),i.on("change",function(){return a(),!1}),i.next(".btn-reset").on("click",function(){h.val("").trigger("change").datepicker("update"),i.val("").trigger("change")})},d.prototype._createFakeDateInput=function(a){var b=g('<div class="date"><input class="ignore input-small" type="text" value="'+a+'" placeholder="yyyy-mm-dd"/></div>'),c=b.find("input");return c},d.prototype._createFakeTimeInput=function(a){var b=g('<div class="bootstrap-timepicker"><input class="ignore timepicker-default input-small" type="text" value="'+a+'" placeholder="hh:mm"/><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),c=b.find("input");return c},d.prototype._setManualHandler=function(){},d.prototype._setFocusHandler=function(a){var b=this;a.on("focus blur",function(a){g(b.element).trigger("fake"+a.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h),i=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;e||"object"!=typeof a||a.touch&&f.inputtypes.datetime&&!i.test(navigator.userAgent)?e&&"string"==typeof a&&e[a](this):c.data(h,new d(this,a,b))})},c.exports={name:h,selector:'input[type="datetime"]:not([readonly])'}})},{"../../js/Widget":31,"../../js/extend":32,"../../js/support":37,"bootstrap-datepicker":3,"bootstrap-timepicker":5,jquery:22}],48:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery");a("bootstrap-slider-basic");var g="distresspicker";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=Number(this.element.value)||-1;this.props=this._getProps(),f(this.element).slider({reversed:!0,min:-1,max:10,orientation:"vertical",step:this.props.step,value:a,enabled:!this.props.readonly}),this.$widget=f(this.element).next(".widget"),this.$slider=this.$widget.find(".slider"),this._addBulb(),this._addScale(),this._setChangeListener()},d.prototype._getProps=function(){var a=this.element.attributes["data-type-xml"].value;return{touch:this.options.touch,readonly:this.element.readOnly,step:"decimal"===a?.1:1}},d.prototype._addBulb=function(){this.$slider.append('<div class="bulb"><div class="inner"></div></div>')},d.prototype._addScale=function(){for(var a=f('<div class="scale"></div>'),b=10;b>=-1;b--)a.append('<div class="number"><div class="value">'+b+"</div></div>");this.$slider.prepend(a)},d.prototype._setChangeListener=function(){f(this.element).on("slideStop."+this.namespace,function(a){Number(this.value)===-1&&(this.value=""),f(this).trigger("change")})},d.prototype.disable=function(){var a=""!==this.element.value?Number(this.element.value):-1;f(this.element).slider("disable").slider("setValue",a,!1)},d.prototype.enable=function(){f(this.element).slider("enable")},d.prototype.update=function(){var a=""!==this.element.value?Number(this.element.value):-1,b=f(this.element),c=b.slider("getValue");a!==c&&f(this.element).slider("setValue",a,!1)},f.fn[g]=function(a,b){return this.each(function(){var c=f(this),e=f(this).data(g);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,new d(this,a,b))})},c.exports={name:g,selector:'.or-appearance-distress input[type="number"]'}})},{"../../js/Widget":31,"bootstrap-slider-basic":4,jquery:22}],49:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){c&&(c.stopPropagation(),c.preventDefault()),this.namespace=i,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g=a("../../js/file-manager"),h=a("../../js/utils"),i="filepicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=e(this.element),b=a.attr("data-loaded-file-name"),c=this;if(this.props=this._getProps(),a.prop("disabled",!0).addClass("transparent").parent().addClass("with-media clearfix"),this.$widget=e('<div class="widget file-picker"><input class="ignore fake-file-input" type="button"/><div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(a),this.$feedback=this.$widget.find(".file-feedback"),this.$preview=this.$widget.find(".file-preview"),this.$fakeInput=this.$widget.find(".fake-file-input"),b&&this._showFileName(b,this.props.mediaType),!g||!g.isSupported()){var d=g.notSupportedAdvisoryMsg?g.notSupportedAdvisoryMsg:"";return void this._showFeedback("Media questions are not supported in this browser. "+d,"warning")}g.isWaitingForPermissions()&&this._showFeedback("Waiting for user permissions.","warning"),g.init().then(function(){c._showFeedback(),c._changeListener(),a.prop("disabled",!1),b&&g.getFileUrl(b).then(function(a){c._showPreview(a,c.props.mediaType)}).catch(function(){c._showFeedback('File "'+b+'" could not be found (leave unchanged if already submitted and you want to preserve it).',"error")})}).catch(function(a){c._showFeedback(a.message,"error")})},d.prototype._getProps=function(){return{mediaType:this.element.getAttribute("accept"),touch:this.options.touch,readonly:this.element.readOnly}},d.prototype._getMaxSubmissionSize=function(){var a=e(document).data("maxSubmissionSize");return a||5242880},d.prototype._changeListener=function(){var a=this;e(this.element).on("click",function(b){if(a.props.readonly)return b.stopImmediatePropagation(),!1}).on("change.propagate."+this.namespace,function(b){var c,d,f,i=e(this),j=i.attr("data-loaded-file-name"),k=new Date;return"propagate"===b.namespace?(i.trigger("change.file"),!1):(b.stopImmediatePropagation(),c=this.files[0],f="-"+k.getHours()+"_"+k.getMinutes()+"_"+k.getSeconds(),this.dataset.filenamePostfix=f,d=h.getFilename(c,f),void g.getFileUrl(c,d).then(function(b){a._showPreview(b,a.props.mediaType),a._showFeedback(""),a._showFileName(d),j&&j!==d&&i.removeAttr("data-loaded-file-name"),i.trigger("change.propagate")}).catch(function(b){i.val("").trigger("change.propagate"),a._showFileName(""),a._showPreview(null),a._showFeedback(b.message,"error")}))}),this.$fakeInput.on("click",function(b){b.preventDefault(),e(a.element).click()})},d.prototype._showFileName=function(a){this.$fakeInput.val(a)},d.prototype._showFeedback=function(a,b){a=a||"",b=b||"",this.$feedback.text(a).attr("class","file-feedback "+b)},d.prototype._showPreview=function(a,b){var c;switch(this.$widget.find(".file-preview").empty(),b){case"image/*":c=e("<img />");break;case"audio/*":c=e('<audio controls="controls"/>');break;case"video/*":c=e('<video controls="controls"/>');break;default:c=e("<span>No preview for this mediatype</span>")}a&&this.$preview.append(c.attr("src",a))},e.fn[i]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(i);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(i,new d(this,a,b))})},c.exports={name:i,selector:'input[type="file"]'}})},{"../../js/Widget":31,"../../js/file-manager":34,"../../js/utils":38,jquery:22}],50:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=m,h.call(this,a,b),this._init()}var e,f,g=a("jquery"),h=a("../../js/Widget"),i=a("text!enketo-config"),j=a("leaflet"),k=a("lie"),l=a("translator").t,m="geopicker",n=15,o=i&&i.maps&&i.maps.length>0?i.maps:[{name:"streets",maxzoom:24,tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}],p="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}";f="undefined"==typeof smapConfig?g("#googleApiKey").text():smapConfig.googleApiKey;var q=f||i.googleApiKey||i.google_api_key,r=j.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),s=j.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),t=j.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=g(this.element).val().trim(),b=this;this.$form=g(this.element).closest("form.or"),this.$question=g(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this.props=this._getProps(),this._addDomElements(),this.currentIndex=0,this.points=[],a&&g(this.element).val().trim().split(";").forEach(function(a,c){b.points[c]=a.trim().split(" "),b.points[c].forEach(function(a,b,c){c[b]=Number(a)})}),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",function(a){var c=b.$lat.val()?Number(b.$lat.val()):"",d=b.$lng.val()?Number(b.$lng.val()):"",e=b.$alt.val()?Number(b.$alt.val()):"",f=b.$acc.val()?Number(b.$acc.val()):"",g={lat:c,lng:d};a.stopImmediatePropagation(),"bymap"!==a.namespace&&"bysearch"!==a.namespace&&b.polyline&&!b.containsEmptyPoints(b.points,b.currentIndex)&&b.updatedPolylineWouldIntersect(g,b.currentIndex)?(b._showIntersectError(),b._updateInputs(b.points[b.currentIndex],"nochange")):(b._editPoint([c,d,e,f]),"bysearch"!==a.namespace&&b.$search&&b.$search.val(""))}),this.$kmlInput.on("change",function(a){var c=b.$points.find(".addpoint"),d=g(this).prev(".paste-progress").removeClass("hide"),e=a.target.value,f=b._convertKmlCoordinatesToLeafletCoordinates(e);a.target.value="",setTimeout(function(){f.forEach(function(a,d){b._updateInputs(a),d<f.length-1&&c.click()}),d.remove(),b._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",function(a){var c=b.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return b._switchInputType(c),!1}),g(this.element).on("change",function(){b.$kmlInput.prop("disabled",!!this.value)}),this.$points.on("click",".point",function(){return b._setCurrent(b.$points.find(".point").index(g(this))),b._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",function(){return b._addPoint(),!1}),this.$widget.find(".close-chain-btn").on("click",function(){return b._closePolygon(),!1}),this.$widget.find(".btn-remove").on("click",function(){b.points.length<2?b._updateInputs([]):window.confirm("This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?")&&b._removePoint()}),this.$map.find(".show-map-btn").on("click",function(){return b.$widget.find(".search-bar").removeClass("hide-search"),b.$widget.addClass("full-screen"),b._updateMap(),!1}),this.$form.on("pageflip.enketo.map"+this.mapId,function(a){b.map&&g.contains(a.target,b.element)&&(b.map.invalidateSize(),b.$form.off("pageflip.enketo.map"+b.mapId))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){b.$widget.toggleClass("hide-input"),g(this).toggleClass("open",b.$widget.hasClass("hide-input")),b.map&&b.map.invalidateSize(!1)}).toggleClass("open",b.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",function(){return b.$widget.find(".search-bar").addClass("hide-search"),b.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),b.map&&(b.map.remove(),b.map=null,b.polygon=null,b.polyline=null),!1}),this.$widget.on("focus blur","input",function(a){g(b.element).trigger(a.type)}),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(this.element),a?this.points.forEach(function(a,c){b._addPointBtn(c+1)}):this._addPoint(),a?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(function(a){b._updateMap([a.coords.latitude,a.coords.longitude],n)}))},d.prototype._switchInputType=function(a){"kml"===a?this.$inputGroup.addClass("kml-input-mode"):"points"===a&&this.$inputGroup.removeClass("kml-input-mode")},d.prototype._getProps=function(){var a=[],b=this.options.touch!==!0||this.options.touch===!0&&g(this.element).closest(".or-appearance-maps").length>0;return b&&(a=g(this.element).closest(".question").attr("class").split(" ").filter(function(a){return"or-appearance-maps"!==a&&/or-appearance-/.test(a)}),a.forEach(function(b,c){a[c]=b.substring(14)})),{detect:!!navigator.geolocation,map:b,search:b,appearances:a,type:this.element.attributes["data-type-xml"].value,touch:this.options.touch,wide:this.$question.width()/this.$question.closest("form.or").width()>.8,readonly:this.element.readOnly}},d.prototype._addPointBtn=function(a){this.$points.find(".addpoint").before('<a href="#" class="point"> </a>')},d.prototype._addDomElements=function(){var a='<div class="map-canvas-wrapper"><div class=map-canvas id="map'+this.mapId+'"></div></div>',b='<div class="points"><button type="button" class="addpoint">+</button></div>',c=l("geopicker.kmlpaste"),d=l("geopicker.kmlcoords"),e=l("geopicker.points"),f='<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">'+e+'</span></a><label class="geo kml">'+d+'<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="'+c+'"></textarea><span class="disabled-msg">remove all points to enable</span></label>',h=l("geopicker.closepolygon"),i='<button type="button" class="close-chain-btn btn btn-default btn-xs">'+h+"</button>",j='<button type="button" class="show-map-btn btn btn-default">Map</button>',k=l("geopicker.latitude"),m=l("geopicker.longitude"),n=l("geopicker.altitude"),o=l("geopicker.accuracy"),p=l("geopicker.searchPlaceholder");if(this.$widget=g('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="'+p+'" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">'+k+'<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">'+m+'<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">'+n+'<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">'+o+'<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove"><span class="icon icon-trash"> </span></button></div></div>'),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(a),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn"> </button>')):this.$map=g(),this.props.touch&&this.props.map&&this.$map.append(j),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=g(b),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(i);var q=g(f);this.$kmlInput=q.find('[name="kml"]'),this.$inputGroup.prepend(q)}else this.$points=g(),this.$kmlInput=g();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),g(this.element).hide().after(this.$widget).parent().addClass("clearfix")},d.prototype._updateValue=function(){var a=g(this.element).val(),b="",c=this;return this._markAsValid(),this.points.forEach(function(a,d,e){var f,g="number"==typeof a[0]?a[0]:"number"==typeof a.lat?a.lat:null,h="number"==typeof a[1]?a[1]:"number"==typeof a.lng?a.lng:null,i="number"==typeof a[2]?a[2]:0,j="number"==typeof a[3]?a[3]:0;f=g&&h?g+" "+h+" "+i+" "+j:"",c._isValidGeopoint(f)||""===f&&d===e.length-1||c._markAsInvalid(d),""!==f||d!==e.length-1?(b+=f,d!==e.length-1&&(b+=";")):b=b.substring(0,b.lastIndexOf(";"))}),a!==b&&(g(this.element).val(b).trigger("change"),!0)},d.prototype._isValidGeopoint=function(a){var b;return!!a&&(b=a.toString().split(" "),""!==b[0]&&b[0]>=-90&&b[0]<=90&&""!==b[1]&&b[1]>=-180&&b[1]<=180&&("undefined"==typeof b[2]||!isNaN(b[2]))&&("undefined"==typeof b[3]||!isNaN(b[3])&&b[3]>=0))},d.prototype._isValidLatLngList=function(a){var b=this;return a.every(function(a,c,d){return b._isValidLatLng(a)||""===a.join()&&c===d.length-1})},d.prototype._isValidLatLng=function(a){var b,c;return b="number"==typeof a[0]?a[0]:"number"==typeof a.lat?a.lat:null,c="number"==typeof a[1]?a[1]:"number"==typeof a.lng?a.lng:null,null!==b&&null!==c&&b>=-90&&b<=90&&c>=-180&&c<=180},d.prototype._markAsInvalid=function(a){this.$points.find(".point").eq(a).addClass("has-error")},d.prototype._markAsValid=function(){this.$points.find(".point").removeClass("has-error")},d.prototype._setCurrent=function(a){this.currentIndex=a,this.$points.find(".point").removeClass("active").eq(a).addClass("active"),this._updateInputs(this.points[a],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()},d.prototype._enableDetection=function(){var a=this,b={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(function(c){return c.preventDefault(),navigator.geolocation.getCurrentPosition(function(b){var c={lat:Math.round(1e6*b.coords.latitude)/1e6,lng:Math.round(1e6*b.coords.longitude)/1e6};a.polyline&&a.updatedPolylineWouldIntersect(c,a.currentIndex)?a._showIntersectError():(a._updateInputs([c.lat,c.lng,b.coords.altitude,b.coords.accuracy]),a.currentIndex===a.points.length-1&&"geopoint"!==a.props.type&&a._addPoint())},function(){console.error("error occurred trying to obtain position")},b),!1})},d.prototype._enableSearch=function(){var a=this;p=q?p.replace("{api_key}",q):p.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(b){var c=g(this).val();b.stopImmediatePropagation(),c&&(c=c.split(/\s+/).join("+"),g.get(p.replace("{address}",c),function(b){var d;b.results&&b.results.length>0&&b.results[0].geometry&&b.results[0].geometry.location?(d=b.results[0].geometry.location,a._updateMap([d.lat,d.lng],n),a.$search.closest(".input-group").removeClass("has-error")):(a.$search.closest(".input-group").addClass("has-error"),console.log('Location "'+c+'" not found'))},"json").fail(function(){a.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(function(){}))})},d.prototype._dynamicMapAvailable=function(){return!!this.map},d.prototype._inFullScreenMode=function(){return this.$widget.hasClass("full-screen")},d.prototype._updateMap=function(a,b){var c=this;this.props.map&&(b||(b=this.map?this.map.getZoom()||n:n),a&&(this.lastLatLng=a,this.lastZoom=b),this.props.touch&&!this._inFullScreenMode()||(this.map?c._updateDynamicMapView(a,b):this._addDynamicMap().then(function(){c._updateDynamicMapView(a,b)})))},d.prototype._addDynamicMap=function(){var a=this;return this._getLayers().then(function(b){var c={layers:a._getDefaultLayer(b)};a.map=j.map("map"+a.mapId,c).on("click",function(b){var c,d;return!a.props.readonly&&(c=b.latlng,d=a.$lat.val()&&a.$lng.val()?a.points.length:a.currentIndex,c.lat=Math.round(1e6*c.lat)/1e6,c.lng=Math.round(1e6*c.lng)/1e6,void("geopoint"!==a.props.type&&!a.containsEmptyPoints(a.points,d)&&a.updatedPolylineWouldIntersect(c,d)?a._showIntersectError():a.$lat.val()&&a.$lng.val()&&"geopoint"!==a.props.type?a.$lat.val()&&a.$lng.val()&&(a._addPoint(),a._updateInputs(c,"change.bymap")):a._updateInputs(c,"change.bymap")))}),a.map.attributionControl.setPrefix(""),b.length>1&&j.control.layers(a._getBaseLayers(b),null).addTo(a.map),a.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),a.map.on("baselayerchange",function(){a.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})},d.prototype._updateDynamicMapView=function(a,b){a?this.map.setView(a,b||n):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||n):this.map.setView(j.latLng(0,0),b||n)))},d.prototype._showIntersectError=function(){alert("Borders cannot intersect!")},d.prototype._getLayers=function(){var a=this,b=[];return o.forEach(function(c,d){"string"==typeof c.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(c.tiles)?b.push(a._getGoogleTileLayer(c,d)):c.tiles?b.push(a._getLeafletTileLayer(c,d)):console.error("Configuration error for map tiles. Not a valid tile layer: ",c)}),k.all(b)},d.prototype._getLeafletTileLayer=function(a,b){var c,d=this._getTileOptions(a,b);return a.tileIndex=void 0===a.tileIndex?Math.round(100*Math.random())%a.tiles.length:a.tileIndex,c=a.tiles[a.tileIndex],k.resolve(j.tileLayer(c,d))},d.prototype._getGoogleTileLayer=function(a,b){var c=this._getTileOptions(a,b),d=a.tiles.substring(7);return this._loadGoogleMapsScript().then(function(){return new j.Google(d,c)})},d.prototype._getTileOptions=function(a,b){var c=a.name||"map-"+(b+1);return{id:a.id||c,maxZoom:a.maxzoom||18,minZoom:a.minzoom||0,name:c,attribution:a.attribution||""}},d.prototype._loadGoogleMapsScript=function(){return e||(e=new k(function(a,b){var c,d;window.gmapsLoaded=function(){delete window.gmapsLoaded,a()},c=q?"&key="+q:"",d="https://maps.google.com/maps/api/js?v=3.exp"+c+"&libraries=places&callback=gmapsLoaded",g.getScript(d)})),e},d.prototype._getDefaultLayer=function(a){var b,c=this;return a.reverse().some(function(a){return b=a,c.props.appearances.some(function(b){return b===a.options.name})}),b},d.prototype._getBaseLayers=function(a){var b={};return a.forEach(function(a){b[a.options.name]=a}),b},d.prototype._updateMarkers=function(){var a=[],b=[],c=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach(function(d,e){var f="geopoint"===c.props.type?r:e===c.currentIndex?t:s;c._isValidLatLng(d)?(a.push(d),b.push(j.marker(d,{icon:f,clickable:!c.props.readonly,draggable:!c.props.readonly,alt:e,opacity:.9}).on("click",function(a){0===a.target.options.alt&&"geoshape"===c.props.type?c._closePolygon():c._setCurrent(a.target.options.alt)}).on("dragend",function(a){var b=a.target.getLatLng(),d=a.target.options.alt;b.lat=Math.round(1e6*b.lat)/1e6,b.lng=Math.round(1e6*b.lng)/1e6,c.polyline&&c.updatedPolylineWouldIntersect(b,d)?(c._showIntersectError(),c._updateMarkers()):(c._setCurrent(d),c._updateInputs(b,"change.bymap"),c._updateMap())}))):console.debug("this latLng was not considered valid",d)}),b.length>0&&(this.markerLayer=j.layerGroup(b).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(a[0],this.lastZoom||n)))},d.prototype._updatePolyline=function(){var a,b=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),a=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),this.polyline?this.polyline.setLatLngs(a):(this.polyline=j.polyline(a,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(function(){b.map.fitBounds(b.polyline.getBounds())},0)}},d.prototype._updatePolygon=function(){var a;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(a=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),this.polygon?this.polygon.setLatLngs(a):(this.polygon=j.polygon(a,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(a))},d.prototype._updateArea=function(a){var b,c;a.length>2?(b=j.GeometryUtil.geodesicArea(a),c=j.GeometryUtil.readableArea(b),j.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(c).openOn(this.map)):this.map.closePopup()},d.prototype._addPoint=function(){this._addPointBtn(this.points.length+1),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()},d.prototype._editPoint=function(a){var b;return this.points[this.currentIndex]=a,b=this._updateValue(),b&&this._updateMap(),b},d.prototype._removePoint=function(){var a=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),"undefined"==typeof this.points[this.currentIndex]&&(a=this.currentIndex-1),this._setCurrent(a),this._updateMap()},d.prototype._closePolygon=function(){var a=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(a)))return this._isValidLatLng(a)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex)?this._showIntersectError():void this._updateInputs(this.points[0])},d.prototype._updateInputs=function(a,b){var c=a[0]||a.lat||"",d=a[1]||a.lng||"",e=a[2]||a.alt||"",f=a[3]||a.acc||"";b="undefined"!=typeof b?b:"change",this.$lat.val(c||""),this.$lng.val(d||""),this.$alt.val(e||""),this.$acc.val(f||"").trigger(b)},d.prototype._convertKmlCoordinatesToLeafletCoordinates=function(a){var b=[],c=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/,d=c.test(a);return a=d?a.match(c)[1]:a,a.trim().split(/\s+/).forEach(function(a){var c=[];a.split(",").forEach(function(a,b){var d=Number(a);0===b?c[1]=d:1===b?c[0]=d:2===b&&(c[2]=d)}),b.push(c)}),b},d.prototype.updatedPolylineWouldIntersect=function(a,b){var c,d,e,f=[];return!(this.points<3)&&(g.extend(!0,f,this.points),f[b]=[a[0]||a.lat,a[1]||a.lng],c=""!==f[f.length-1].join("")?f:f.slice(0,f.length-1),c[0][0]===c[c.length-1][0]&&c[0][1]===c[c.length-1][1]&&(c=c.slice(0,c.length-1)),d=j.polyline(c,{color:"white"}),this.map.addLayer(d),e=d.intersects(),this.map.removeLayer(d),e)},d.prototype.containsEmptyPoints=function(a,b){return a.some(function(a,c){return!(c===b||a[0]&&a[1])})},d.prototype.disable=function(a){g(a).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0);
},d.prototype.enable=function(a){g(a).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()},d.prototype.update=function(a){this.destroy(a),g(a).data(m,new d(a,this.options,this.event))},g.fn[m]=function(a,b){return this.each(function(){try{var c=g(this),e=g(this).data(m);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(m,new d(this,a,b))}catch(a){console.log("Failed to initialise geopicker for "+this+": "+a)}})},j.GeometryUtil=j.extend(j.GeometryUtil||{},{geodesicArea:function(a){var b,c,d=6378100,e=a.length,f=0,g=j.LatLng.DEG_TO_RAD;if(e>2){for(var h=0;h<e;h++)b={lat:a[h][0],lng:a[h][1]},c={lat:a[(h+1)%e][0],lng:a[(h+1)%e][1]},f+=(c.lng-b.lng)*g*(2+Math.sin(b.lat*g)+Math.sin(c.lat*g));f=f*d*d/2}return Math.abs(f)},readableArea:function(a){var b;return b=a>=1e4?(1e-4*a).toFixed(2)+" ha":a.toFixed(0)+" m&sup2;"}}),j.Polyline.include({intersects:function(){var a,b,c,d=this._originalPoints,e=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=e-1;a>=3;a--)if(b=d[a-1],c=d[a],this._lineSegmentsIntersectsRange(b,c,a-2))return!0;return!1},_tooFewPointsForIntersection:function(a){var b=this._originalPoints,c=b?b.length:0;return c+=a||0,!this._originalPoints||c<=3},_lineSegmentsIntersectsRange:function(a,b,c,d){var e,f,g=this._originalPoints;d=d||0;for(var h=c;h>d;h--)if(e=g[h-1],f=g[h],j.LineUtil.segmentsIntersect(a,b,e,f))return!0;return!1}}),j.Util.extend(j.LineUtil,{segmentsIntersect:function(a,b,c,d){return this._checkCounterclockwise(a,c,d)!==this._checkCounterclockwise(b,c,d)&&this._checkCounterclockwise(a,b,c)!==this._checkCounterclockwise(a,b,d)},_checkCounterclockwise:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}}),j.Google=j.Class.extend({includes:j.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,mapOptions:{backgroundColor:"#dddddd"}},initialize:function(a,b){j.Util.setOptions(this,b),this._ready=void 0!==google.maps.Map,this._ready||j.Google.asyncWait.push(this),this._type=a||"SATELLITE"},onAdd:function(a,b){this._map=a,this._insertAtTheBottom=b,this._initContainer(),this._initMapObject(),a.on("viewreset",this._resetCallback,this),this._limitedUpdate=j.Util.limitExecByInterval(this._update,150,this),a.on("move",this._update,this),a.on("zoomanim",this._handleZoomAnim,this),a._controlCorners.bottomright.style.marginBottom="20px",this._reset(),this._update()},onRemove:function(a){a._container.removeChild(this._container),a.off("viewreset",this._resetCallback,this),a.off("move",this._update,this),a.off("zoomanim",this._handleZoomAnim,this),a._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(a){this.options.opacity=a,a<1&&j.DomUtil.setOpacity(this._container,a)},setElementSize:function(a,b){a.style.width=b.x+"px",a.style.height=b.y+"px"},_initContainer:function(){var a=this._map._container,b=a.firstChild;this._container||(this._container=j.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer_"+j.Util.stamp(this),this._container.style.zIndex="auto"),a.insertBefore(this._container,b),this.setOpacity(this.options.opacity),this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(this._ready){this._google_center=new google.maps.LatLng(0,0);var a=new google.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.mapOptions.styles,backgroundColor:this.options.mapOptions.backgroundColor}),b=this;this._reposition=google.maps.event.addListenerOnce(a,"center_changed",function(){b.onReposition()}),this._google=a,google.maps.event.addListenerOnce(a,"idle",function(){b._checkZoomLevels()}),this.fire("MapObjectInitialized",{mapObject:a})}},_checkZoomLevels:function(){this._google.getZoom()!==this._map.getZoom()&&this._map.setZoom(this._google.getZoom())},_resetCallback:function(a){this._reset(a.hard)},_reset:function(a){this._initContainer()},_update:function(a){if(this._google){this._resize();var b=this._map.getCenter(),c=new google.maps.LatLng(b.lat,b.lng);this._google.setCenter(c),this._google.setZoom(Math.round(this._map.getZoom())),this._checkZoomLevels()}},_resize:function(){var a=this._map.getSize();this._container.style.width===a.x&&this._container.style.height===a.y||(this.setElementSize(this._container,a),this.onReposition())},_handleZoomAnim:function(a){var b=a.center,c=new google.maps.LatLng(b.lat,b.lng);this._google.setCenter(c),this._google.setZoom(Math.round(a.zoom))},onReposition:function(){this._google&&google.maps.event.trigger(this._google,"resize")}}),j.Google.asyncWait=[],j.Google.asyncInitialize=function(){var a;for(a=0;a<j.Google.asyncWait.length;a++){var b=j.Google.asyncWait[a];b._ready=!0,b._container&&(b._initMapObject(),b._update())}j.Google.asyncWait=[]},c.exports={name:m,selector:'input[data-type-xml="geopoint"], input[data-type-xml="geotrace"], input[data-type-xml="geoshape"]'}})},{"../../js/Widget":31,jquery:22,leaflet:23,lie:24,"text!enketo-config":1,translator:33}],51:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="horizontalChoices";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){e(this.element).find(".option-wrapper").each(function(){var a=e(this),b=a.find("label");b.length%3===2&&a.append('<label class="filler"></label>')})},d.prototype.destroy=function(){},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(g,new d(this,a,b))})},c.exports={name:g,selector:".or-appearance-horizontal"}})},{"../../js/Widget":31,jquery:22}],52:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};var e="notewidget";d(function(a,b,c){c.exports={name:e}})},{}],53:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery");a("../../js/plugins");var g=null,h="radiopicker";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){this._setDelegatedHandlers()},d.prototype._setDelegatedHandlers=function(){var a,b,c=f(this.element);c.on("click",'input[type="radio"]:checked',function(a){f(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}),c.on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(a){return a.stopImmediatePropagation(),!1}),c.on("click",'input[type="checkbox"]',function(c){b=f(this),a=b.parent("label"),b.is(":checked")?a.attr("data-checked","true"):a.removeAttr("data-checked")}),c.on("click",'input[type="radio"], input[type="checkbox"]',function(a){g&&g.trigger("fakeblur"),g=f(this).trigger("fakefocus")}),c.on("focusin fakefocus",'input:not([type="radio"], [type="checkbox"]), textarea, select',function(a){g&&g.trigger("fakeblur"),g=null}),c.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked","true"),c.on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(a){f(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")})},d.prototype.destroy=function(a){},f.fn[h]=function(a,b){var c=f(this),e=c.data(h);return a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(h,new d(c[0],a,b)),this},c.exports={name:h,selector:"form"}})},{"../../js/Widget":31,"../../js/plugins":35,jquery:22}],54:[function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,f.call(this,a,b),c&&(c.stopPropagation(),c.preventDefault()),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g=(a("translator").t,"autocomplete"),h=!("list"in document.createElement("input")&&"options"in document.createElement("datalist")&&"undefined"!=typeof window.HTMLDataListElement);a("./jquery.relevant-dropdown"),d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=e(this.element),b=a.attr("list");this.props=this._getProps(),this.$options=a.closest(".question").find("datalist#"+b+" > option"),this.$options.each(function(a,b){var c=b.getAttribute("value");b.classList.contains("itemset-template")||void 0===c||null===c||(b.dataset.value=c,b.removeAttribute("value"))}),this.$fakeInput=e('<input type="text" class="ignore widget autocomplete" list="'+b+'" />'),this.props.readonly&&this.$fakeInput.attr("readonly","readonly"),this.props.disabled&&this.$fakeInput.attr("disabled","disabled"),a.hide().after(this.$fakeInput),h&&(console.debug("Polyfill required"),this.$fakeInput.relevantDropdown()),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()},d.prototype._getProps=function(){return{readonly:this.element.readOnly,disabled:this.element.disabled}},d.prototype._showCurrentLabel=function(){var a=this.element.value,b=this._findLabel(a);this.$fakeInput.val(b),a&&!b&&this.$fakeInput.trigger("input")},d.prototype._setFakeInputListener=function(){var a=this;this.$fakeInput.on("input."+this.namespace,function(b){var c=b.target,d=c.value.trim(),f=a._findValue(d)||"";e(a.element).val(f).trigger("change"),e(c).toggleClass("notfound",d&&!f)})},d.prototype._findValue=function(a){var b="";return a?(this.$options.each(function(c,d){if(d.innerText===a)return b=d.getAttribute("data-value"),!1}),b):""},d.prototype._findLabel=function(a){var b="";return a?(this.$options.each(function(c,d){if(d.dataset.value===a)return b=d.value,!1}),b):""},d.prototype._setFocusListener=function(){var a=this;this.$fakeInput.on("focus",function(){return e(a.element).trigger("fakefocus"),!0}).on("blur",function(){return e(a.element).trigger("fakeblur"),!0})},d.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},d.prototype.enable=function(){this.$picker.find("li").removeClass("disabled")},d.prototype.update=function(){e(this.element).siblings(".widget").remove(),this._init()},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(g,f=new d(this,a,b))})},b.exports={name:g,list:!0,selector:"input[list]"}},{"../../js/Widget":31,"./jquery.relevant-dropdown":55,jquery:22,translator:33}],55:[function(a,b,c){function d(a,b,c){this.namespace=f,this.element=a,this.options=e.extend({fadeOutSpeed:"normal",change:null},b),c&&(c.stopPropagation(),c.preventDefault()),this._init()}var e=a("jquery"),f="relevantDropdown";e.expr[":"].RD_contains=e.expr.createPseudo(function(a){return function(b){return e(b).text().toUpperCase().indexOf(a.toUpperCase())>=0}}),d.prototype._init=function(){var a=e(this.element);this.listId=a.attr("list"),this.$fakeDatalist=e("<ul />",{class:"datalist widget",id:this.listId}).appendTo(a.parent()),this._updateFakeDatalist(),this._setEventListeners()},d.prototype._updateFakeDatalist=function(){var a=e("#"+this.listId),b=document.createDocumentFragment();this.$fakeDatalist.empty(),a.find("option").each(function(){tempItem=e("<li />",{text:e(this).val()})[0],b.appendChild(tempItem)}),this.$fakeDatalist.append(b),this.$fakeDatalistItems=this.$fakeDatalist.find("li")},d.prototype._setEventListeners=function(){var a,b=this,c=e(this.element),d=0;c.on("focus",function(){b.$fakeDatalist.scrollTop(0),d=0}).on("blur",function(){setTimeout(function(){b.$fakeDatalist.fadeOut(b.options.fadeOutSpeed),b.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",function(d){a=c.position(),b.$fakeDatalist.show().css({top:a.top+e(this).outerHeight(),left:a.left,width:c.outerWidth()}),b.$fakeDatalistItems.hide(),b.$fakeDatalist.find('li:RD_contains("'+c.val()+'")').show()}),this.$fakeDatalist.on("mouseenter","li",function(){e(this).addClass("active").siblings().removeClass("active")}).on("mouseleave","li",function(){e(this).removeClass("active")}),e(window).resize(function(){a=c.position(),b.$fakeDatalist.css({top:a.top+e(this).outerHeight(),left:a.left,width:c.outerWidth()})}),c.on("keydown",function(a){var e=b.$fakeDatalist.find("li.active"),f=b.$fakeDatalist.outerHeight(),g=b.$fakeDatalistItems.outerHeight();if(38==a.keyCode&&e.length&&(prevAll=e.prevAll("li:visible"),prevAll.length>0&&(e.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&d>0&&b.$fakeDatalist.scrollTop(d-=g)),40==a.keyCode)if(e.length){var h=e.nextAll("li:visible");h.length>0&&(e.removeClass("active"),h.eq(0).addClass("active")),h.length&&h.position().top+g>=f&&b.$fakeDatalist.stop().animate({scrollTop:d+=g},200)}else b.$fakeDatalistItems.removeClass("active"),b.$fakeDatalist.find("li:visible:first").addClass("active");13!=a.keyCode&&9!=a.keyCode||(e.length&&c.val(e.text()).trigger("input"),b.$fakeDatalist.fadeOut(b.options.fadeOutSpeed),b.$fakeDatalistItems.removeClass("active")),13!=a.keyCode&&38!=a.keyCode&&40!=a.keyCode&&(b.$fakeDatalistItems.removeClass("active"),b.$fakeDatalist.find("li:visible:first").addClass("active"),b.$fakeDatalist.scrollTop(0),d=0)}),this.$fakeDatalist.on("click","li",function(){var a=e("li.active");a.length&&c.val(e(this).text()).trigger("input"),b.$fakeDatalist.fadeOut(b.options.fadeOutSpeed),b.$fakeDatalistItems.removeClass("active")})},d.prototype.update=function(){this._updateFakeDatalist()},e.fn[f]=function(a,b){return a=a||{},this.each(function(){var c=e(this),g=c.data(f);g||"object"!=typeof a?g&&"string"==typeof a&&g[a](this):c.data(f,g=new d(this,a,b))})}},{jquery:22}],56:[function(a,b,c){"use strict";function d(a,b,c){this.namespace=j,h.call(this,a,b),c&&(c.stopPropagation(),c.preventDefault()),this.$picker=null,this.noneSelectedText=i("selectpicker.noneselected"),this.multiple="undefined"!=typeof g(a).attr("multiple")&&g(a).attr("multiple")!==!1,this._init()}function e(a){g(k).remove(),g(l).each(function(){var b=f(g(this)),c={relatedTarget:this};b.hasClass("open")&&(b.trigger(a=g.Event("hide.bs.dropdown",c)),a.isDefaultPrevented()||b.removeClass("open").trigger("hidden.bs.dropdown",c))})}function f(a){var b=a.attr("data-target");b||(b=a.attr("href"),b=b&&/#[A-Za-z]/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));var c=b&&g(b);return c&&c.length?c:a.parent()}var g=a("jquery"),h=a("../../js/Widget"),i=a("translator").t,j="desktopSelectpicker";d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this._getTemplate(),b=g(this.element);this.readonly=!!b.attr("readonly"),b.css("display","none"),a=this._createLi(a),this.$picker=a.insertAfter(b),this.$picker.find("> a").addClass(this.selectClass),this._clickListener(),this._focusListener()},d.prototype._getTemplate=function(){var a='<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>';return a},d.prototype._createLi=function(a){var b,c,d=[],e="",f=this.multiple?'type="checkbox"':'type="radio" name="'+1e5*Math.random()+'"',h=this,i=this.readonly?' readonly="readonly"':"",j=this.readonly?' disabled="disabled"':"",k=this.readonly?' class="disabled"':"";if(g(this.element).find("option").each(function(){d.push({label:g(this).text(),selected:g(this).is(":selected"),value:g(this).attr("value")})}),d.length>0){a=a.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(var l=0;l<d.length;l++)d[l].value&&(b=d[l].selected?' checked="checked"':"",c=d[l].selected&&!h.multiple?'class="active"':"",e+="<li "+k+c+'><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" '+f+b+i+j+' value="'+d[l].value+'" /><span class="option-label">'+d[l].label+"</span></label></a></li>")}return a=a.replace("__ADD_LI",e),g(a)},d.prototype._createSelectedStr=function(){var a=[],b=g(this.element);return b.find("option:selected").each(function(){g(this).attr("value").length>0&&a.push(g(this).text())}),0===a.length?this.noneSelectedText:1===a.length?a[0]:i("selectpicker.numberselected",{number:a.length})},d.prototype._clickListener=function(){var a=this;this.$picker.on("click","li:not(.disabled)",function(b){b.preventDefault();var c=g(this),d=c.find("input"),e=g(a.element),f=e.find('option[value="'+d.val()+'"]'),h=f.is(":selected");a.multiple?b.stopPropagation():(a.$picker.find("li").removeClass("active"),f.siblings("option").prop("selected",!1),a.$picker.find("input").prop("checked",!1)),h?(c.removeClass("active"),d.prop("checked",!1),f.prop("selected",!1)):(a.multiple||c.addClass("active"),d.prop("checked",!0),f.prop("selected",!0)),a.$picker.find(".selected").html(a._createSelectedStr()),e.trigger("change")}).on("keydown","li:not(.disabled)",function(a){if(/(13|32)/.test(a.keyCode.toString(10))){/(32)/.test(a.keyCode.toString(10))||a.preventDefault();var b=g(":focus");b.click(),b.focus(),a.preventDefault()}}).on("click","li.disabled",function(a){return a.stopPropagation(),!1})},d.prototype._focusListener=function(){var a=this;this.$picker.on("shown.bs.dropdown",function(){return g(a.element).trigger("fakefocus"),!0}).on("hidden.bs.dropdown",function(){return g(a.element).trigger("fakeblur"),!0})},d.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},d.prototype.enable=function(){this.$picker.find("li").removeClass("disabled")},d.prototype.update=function(){this.$picker.remove(),this._init()},g.fn[j]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(j);e||"object"!=typeof a||a.touch?e&&"string"==typeof a&&e[a](this):c.data(j,e=new d(this,a,b))})};var k=".dropdown-backdrop",l="[data-toggle=dropdown]",m=function(a){g(a).on("click.bs.dropdown",this.toggle)};m.prototype.toggle=function(a){var b=g(this);if(!b.is(".disabled, :disabled")){var c=f(b),d=c.hasClass("open");if(e(),!d){"ontouchstart"in document.documentElement&&!c.closest(".navbar-nav").length&&g('<div class="dropdown-backdrop"/>').insertAfter(g(this)).on("click",e);var h={relatedTarget:this};if(c.trigger(a=g.Event("show.bs.dropdown",h)),a.isDefaultPrevented())return;c.toggleClass("open").trigger("shown.bs.dropdown",h),b.focus()}return!1}},m.prototype.keydown=function(a){if(/^(38|40|27)$/.test(a.keyCode)){var b=g(this);if(a.preventDefault(),a.stopPropagation(),!b.is(".disabled, :disabled")){var c=f(b),d=c.hasClass("open");if(!d||d&&27===a.keyCode)return 27===a.which&&c.find(l).focus(),b.click();var e=" li:not(.divider):visible a",h=c.find("[role=menu]"+e+", [role=listbox]"+e);if(h.length){var i=h.index(h.filter(":focus"));38===a.keyCode&&i>0&&i--,40===a.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var n=g.fn.dropdown;g.fn.dropdown=function(a){return this.each(function(){var b=g(this),c=b.data("bs.dropdown");c||b.data("bs.dropdown",new m(this)),"string"==typeof a&&c[a].call(b)})},g.fn.dropdown.Constructor=m,g.fn.dropdown.noConflict=function(){return g.fn.dropdown=n,this},g(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",l,m.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu], [role=listbox]",m.prototype.keydown),b.exports={name:j,list:!0,selector:"select:not(#form-languages)"}},{"../../js/Widget":31,jquery:22,translator:33}],57:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){c.exports={name:"likertitem"}})},{}],58:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="mobileSelectpicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this;e(this.element).on("change."+g,function(){return a._showSelectedValues(),!0}),this._showSelectedValues()},d.prototype._showSelectedValues=function(){var a,b=[],c='<span class="widget mobileselect"></span>',d=e(this.element),f=d.next(".widget").length>0?d.next(".widget"):e(c).insertAfter(d),g=e.isArray(d.val())?d.val():[d.val()];for(a=0;a<g.length;a++)b.push(e(this).find('option[value="'+g[a]+'"]').text());f.text(g.join(", "))},d.prototype.update=function(){this._showSelectedValues()},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);!f&&"object"==typeof a&&a.touch&&c.data(g,new d(this,a,b)),f&&"string"==typeof a&&f[a](this)})},c.exports={name:g,selector:"select[multiple]"}})},{"../../js/Widget":31,jquery:22}],59:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){c.exports={name:"tablewidget"}})},{}],60:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery"),g="textareaWidget";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){this._setDelegatedHandlers()},d.prototype._setDelegatedHandlers=function(){var a=f(this.element),b=a[0].querySelector("textarea"),c=b?b.clientHeight:20;a.on("input","textarea",function(a){this.scrollHeight>this.clientHeight&&this.scrollHeight>c&&(this.style["min-height"]=this.scrollHeight+"px")})},d.prototype.destroy=function(a){},f.fn[g]=function(a,b){var c=f(this),e=c.data(g);return a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,new d(c[0],a,b)),this},c.exports={name:g,selector:"form"}})},{"../../js/Widget":31,jquery:22}],61:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("bootstrap-timepicker");var h="timepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=g(this.element),b=g(this.element).val(),c=g('<div class="widget bootstrap-timepicker"><input class="ignore timepicker-default input-small" type="text" value="'+b+'" placeholder="hh:mm" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),d=c.find(".btn-reset"),e=c.find("input");a.next(".widget.bootstrap-timepicker-component").remove(),a.hide().after(c),e.timepicker({defaultTime:b.length>0?b:"current",showMeridian:!1}).val(b).closest(".widget").find("input").addClass("ignore"),e.on("change",function(){var b=this.value;return b=/^[0-9]:/.test(b)?"0"+b:b,b=/^[0-9]{2}:$/.test(b)?b+"00":b,a.val(b).trigger("change").blur(),!1}),d.on("click",function(){e.val("").trigger("change")}),e.on("focus blur",function(b){a.trigger("fake"+b.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h);e||"object"!=typeof a||a.touch&&f.inputtypes.time?e&&"string"==typeof a&&e[a](this):c.data(h,new d(this,a,b))})},c.exports={name:h,selector:'input[type="time"]:not([readonly])'}})},{"../../js/Widget":31,"../../js/support":37,"bootstrap-timepicker":5,jquery:22}],62:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){function d(a,b){a&&k(),w=b}function e(a){var b,c="";return a.accessKey&&(c="/key/"+a.accessKey),b=a.instanceStrToEditId?"/submission"+c+"/"+a.instanceStrToEditId:"/submission"+c}function f(a){a!==A&&(console.log("online status changed to: "+a+", triggering window.onlinestatuschange"),z(window).trigger("onlinestatuschange",a)),A=a}function g(a){z.ajax({url:"/surveyKPI/login/key?form=user",dataType:"json",cache:!1,success:function(b){if("iframe_record"==a.name)surveyData.key=b.key;else{var c=y.getRecord(a.name);c.accessKey=b.key,w.setRecord(a.name,c,!0,!0,c.key)}},error:function(a,b,c){removeHourglass(),0!=a.readyState&&0!=a.status&&alert("Error: Failed to get access key: "+c)}})}function h(a,b,c,d){var e,f,g;return b=b||!1,c=c||null,a.name&&a.instanceID&&a.formData&&a.batches&&"undefined"!=typeof a.batchIndex?(e=z.grep(F,function(b){return a.instanceID===b.instanceID&&a.batchIndex===b.batchIndex}),f=z.grep(D.win,function(b){return a.instanceID===b.instanceID&&a.batchIndex===b.batchIndex}),g=B===a.instanceID&&C===a.batchIndex,0!==e.length||0!==f.length||g?e.forced=b:(a.forced=b,F.push(a),B||(o(),E={},i(c,d))),!0):(console.log("record name, instanceID, formData, batches and/or batchIndex was not defined!"),setTimeout(function(){u._updateClass(u._getLi(a),"error")},200),!1)}function i(a,b){var c,d,h;if(a="undefined"!=typeof a&&a?a:{complete:function(a,d){z(document).trigger("submissioncomplete"),j(a.status,h={name:c.name,instanceID:c.instanceID,batches:c.batches,batchIndex:c.batchIndex,forced:c.forced});var e=b&&201==a.status;i(void 0,e)},error:function(a,b){},success:function(){}},a.complete=function(a,d){z(document).trigger("submissioncomplete"),j(a.status,h={name:c.name,instanceID:c.instanceID,batches:c.batches,batchIndex:c.batchIndex,forced:c.forced});var e=b&&201==a.status;i(void 0,e)},F.length>0){c=F.shift(),u.update(c,"ongoing",""),B=c.instanceID,C=c.batchIndex,d=c.formData,"function"==typeof d.append&&(d.append("Date",(new Date).toUTCString()),console.debug("prepared to send: ",d)),f(null),z(document).trigger("submissionstart");var k=e(c);z.ajax(k,{type:"POST",data:d,cache:!1,contentType:!1,processData:!1,timeout:8e5,complete:function(b,c){B=null,C=null,a.complete(b,c)},error:function(b,d){var e=c;401==b.status&&g(e),a.error()},success:a.success})}else b&&(x.alert("This form will now be closed!","Submission Successful!","success"),setTimeout(function(){window.open("","_self").close()},3500))}function j(a,b){var c,d,e,g,h,i=!1,j="",k=[],l="error",m="Contact "+settings.supportEmail+" please.",n="Contact the survey administrator please.",o="Sorry, the server is not available. Please try again later or contact your administrator.",p={0:{success:!1,msg:"Failed (offline?). The browser will retry to send when back online. Please do not close this page."},200:{success:!1,msg:"Data server did not accept data. "+m},201:{success:!0,msg:"Done!"},202:{success:!0,msg:"Done! (duplicate)"},"2xx":{success:!1,msg:"Unknown error occurred when submitting data. "+m},400:{success:!1,msg:"Data server did not accept data. "+n},401:{success:!1,msg:"Authorisation expired. Refresh your browser. "},403:{success:!1,msg:"Not allowed to post data to this data server. "+n},404:{success:!1,msg:"Submission service on data server not found."},"4xx":{success:!1,msg:"Unknown submission problem on data server."},413:{success:!1,msg:"Data is too large. Please contact "+settings.supportEmail+"."},500:{success:!1,msg:o},503:{success:!1,msg:o},"5xx":{success:!1,msg:o}};if(h=b.batches>1?" (batch #"+(b.batchIndex+1)+" out of "+b.batches+")":"",b.batchText=h,0===a&&f(!1),"undefined"!=typeof p[a])if(b.msg=p[a].msg,p[a].success===!0){if(l="success",b.batches>1)for("undefined"==typeof E[b.instanceID]&&(E[b.instanceID]=[]),E[b.instanceID].push(b.batchIndex),c=0;c<b.batches;c++)z.inArray(c,E[b.instanceID])===-1&&(i=!0);D.win.push(b)}else p[a].success===!1&&D.fail.push(b);else a>500?(console.error("Error during uploading, received unexpected statuscode: "+a),b.msg=p["5xx"].msg,D.fail.push(b)):a>400?(console.error("Error during uploading, received unexpected statuscode: "+a),b.msg=p["4xx"].msg,D.fail.push(b)):a>200&&(console.error("Error during uploading, received unexpected statuscode: "+a),b.msg=p["2xx"].msg,D.fail.push(b));if(u.update(b,l,b.msg),i||"success"!==l?"success"===l&&console.debug("not all batches for instanceID have been submitted, current queue:",F):z(document).trigger("submissionsuccess",[b.name,b.instanceID]),!(F.length>0)){if(console.debug("online: "+A,D),D.win.length>0){for(c=0;c<D.win.length;c++)e=D.win[c].name,z.inArray(e,k)===-1&&(k.push(e),j="undefined"!=typeof D.win[c].msg?j+D.win[c].msg+" ":"");d=k.length>1?" were":" was",g=k.join(", "),x.feedback(g.substring(0,g.length)+d+" successfully uploaded!"),f(!0)}if(D.fail.length>0&&(j="",A!==!1)){for(c=0;c<D.fail.length;c++)D.fail[c].forced&&(j+=D.fail[c].name+D.fail[c].batchText+": "+D.fail[c].msg+"<br />");j&&x.alert(j,"Failed data submission")}}}function k(){var a=y.getRecord("__maxSize"),b=10485760;"undefined"==typeof v&&(v=a||b,z(document).data({maxSubmissionSize:v}))}function l(){return v}function m(a){return/^(https?:\/\/)(([\da-z\.\-]+)\.([a-z\.]{2,6})(:[0-9]{2,4})?|(([0-9]{1,3}\.){3}[0-9]{1,3})(:[0-9]{2,4})?)([\/\w \.\-]*)*\/?[\/\w \.\-\=\&\?]*$/.test(a)}function n(a,b){return b=s(b),m(a)?void z.ajax("/forms/get_list",{type:"GET",data:{server_url:a},cache:!1,contentType:"json",timeout:6e4,success:b.success,error:b.error,complete:b.complete}):void b.error(null,"validationerror","not a valid URL")}function o(){D={win:[],fail:[]}}function p(){return D}function q(){return F}function r(){return B}function s(a){return a=a||{},a.error=a.error||function(a,b,c){console.error(b+" : "+c)},a.complete=a.complete||function(){},a.success=a.success||function(){console.log("success!")},a}var t,u,v,w,x=a("./gui"),y=a("./store"),z=a("jquery"),A=!0,B=null,C=null,D={win:[],fail:[]},E={},F=[];u={_getLi:function(a){var b=z(".record-list").find('[name="'+a.name+'"]');return b},_reset:function(a){var b=z(".record-list").find("li");b.first().attr("name")===a.name&&b.removeClass("ongoing success error").filter(function(){return!z(this).hasClass("record")}).remove()},_updateClass:function(a,b){a.removeClass("ongoing error").addClass(b)},_updateProgressBar:function(a){var b,c=F.length+D.win.length+D.fail.length,d=D.win.length+D.fail.length;c+="ongoing"==a?1:0,b=z(".upload-progress").attr({max:c,value:d}),d===c||1===c?b.css("visibility","hidden"):b.css("visibility","visible")},_getMsg:function(a,b,c){return a.batches>1&&c?"part "+(a.batchIndex+1)+" of "+a.batches+": "+c:"error"===b?c:""},update:function(a,b,c){var d,e=this._getLi(a),f=this._getMsg(a,b,c);this._reset(a),f&&(d=z('<li name="'+a.name+'" class="'+b+'">'+f+"</li>").insertAfter(e.last()),window.setTimeout(function(){d.hide(500)},3e3)),this._updateClass(e.first(),b),this._updateProgressBar(b),0===F.length&&"ongoing"!==b?z("button.upload-records").removeAttr("disabled"):z("button.upload-records").attr("disabled","disabled")}},t={fragToServerURL:function(a,b){var c,d="";if(!b)return console.log("nothing to do"),null;if(console.debug("frag: "+b),m(b))return b;switch(a){case"http":case"https":c=/^http(|s):\/\//.test(b)?"":a+"://",d=c+b;break;case"formhub_uni":case"formhub":d="https://formhub.org/"+b;break;case"appspot":d="https://"+b+".appspot.com"}return m(d)?(console.log("server_url: "+d),d):(console.error("not a valid url: "+d),null)}},c.exports={init:d,uploadRecords:h,getUploadQueue:q,getUploadOngoingID:r,getFormlist:n,isValidURL:m,getMaxSubmissionSize:l,oRosaHelper:t,_processOpenRosaResponse:j,_getUploadResult:p,_resetUploadResult:o,_setOnlineStatus:f}})},{"./gui":65,"./store":68,jquery:22}],63:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){var c,d,e;if(window.onbeforeunload=function(){
if(D())return"You have unsaved changes. Are you sure you want to leave?"},T={},T.modelStr=surveyData.modelStr,b=b||{},V=b.fileStore,U=b.recordStore||null,surveyData.instanceStrToEdit=surveyData.instanceStrToEdit||null,surveyData.instanceStr=surveyData.instanceStrToEdit||null,V.isSupported()){var e=U.getRecord("draft");if(e){var f=U.getRecord(e);surveyData.instanceStrToEdit=f.data,surveyData.instanceStr=f.data,surveyData.instanceStrToEditId=f.instanceStrToEditId,surveyData.assignmentId=f.assignmentId,surveyData.key=f.accessKey,surveyData.submitted=!1;var g=new K(f.data);g.init(),window.gLoadedInstanceID=g.getInstanceID(),U.removeRecord("draft")}else window.gLoadedInstanceID=void 0}M.init(!0,U),V.isSupported()&&(V.init(),U&&0!==U.getRecordList().length||V.deleteAllAttachments()),S="form.or:eq(0)",P=new J(S,surveyData);var c=P.init();e&&P.setRecordName(e),c.length>0&&(d=surveyData.instanceStr?"to edit data":"for data entry",L.showLoadErrors(c,"It is recommended <strong>not to use this form</strong> "+d+" until this is resolved.")),Q=P.getView().$,R=N(".form-progress"),s(),W=P.getDataStr(!0,!0),U&&(N(".side-slider").append('<h3>Queue</h3><p>Records are stored inside your browser until they have been uploaded (even if you turn off your computer or go offline).</p><progress class="upload-progress"></progress><ul class="record-list"></ul><div class="button-bar"><button class="btn btn-primary upload-records">Upload</button><button class="btn btn-default delete-records pull-right">Delete</button></div><p>Queued records, except those marked as <em>draft</em> ( <span class="glyphicon glyphicon-pencil"></span> ), are uploaded <strong>automatically</strong>, in the background, every 5 minutes when the web page is open and an Internet connection is available. To force an upload in between automatic attempts, click Upload.</p>'),Q.trigger("save",JSON.stringify(U.getRecordList()))),b.submitInterval&&(window.setInterval(function(){m()},b.submitInterval),window.setTimeout(function(){m()},5e3))}function e(a){var b,c;!a&&P.getEditStatus()?(b="There are unsaved changes, would you like to continue <strong>without</strong> saving those?",c={posAction:function(){e(!0)}},L.confirm(b,c)):(v(!1),u(null),P.resetView(),P=new J("form.or:eq(0)",T),P.init(),Q=P.getView().$,R=N(".form-progress"),N("button#delete-form").button("disable"),W=P.getDataStr(!0,!0))}function f(a,b){var c,d,e;!b&&P.getEditStatus()?(d={msg:"The current form has unsaved changes. Would you like to load a record <strong>without saving changes</strong> to the form you were working on?",heading:"Unsaved edits"},e={posButton:"Proceed without saving",posAction:function(){f(a,!0)}},L.confirm(d,e)):(c=U.getRecord(a),c&&c.data&&(U.setKey("draft",a),window.location.replace(c.form)))}function g(a,b,c,d){var e,f,i,j,k,l=0,m=O.getCurrentFiles(),n={};if(d=d||w(),console.log("saveRecord called with recordname:"+a,"confirmed:"+b,"error:"+c+"draft:"+d),Q.trigger("beforesave"),b="undefined"!=typeof b&&b,a=a||P.getRecordName()||P.getSurveyName()+" - "+U.getCounterValue(),!a)return void console.log("No record name could be created.");if(!d&&!P.validate())return void L.alert("Form contains errors <br/>(please see fields marked in red)");if(d&&!b)e={dialog:"save",msg:"",heading:"Save as a Draft",errorMsg:c},f={posButton:"Save & Close",negButton:"Cancel",posAction:function(a){P.getRecordName()&&P.getRecordName()!==a["record-name"]?L.confirm({msg:'Are you sure you want to rename "'+P.getRecordName()+'"" to "'+a["record-name"]+'"?'},{posAction:function(){g(a["record-name"],!0,c)}}):g(a["record-name"],!0,c)},negAction:function(){return!1}},L.confirm(e,f,{"record-name":a});else{var o=window.location.href.split("?");i={draft:d,form:o[0],data:P.getDataStr(!0,!0),instanceStrToEditId:surveyData.instanceStrToEditId,assignmentId:surveyData.assignmentId,accessKey:surveyData.key};var p="/"+P.getInstanceID();if(m.length>0)for(V.deleteDir(p),k=0;k<m.length;k++)V.saveFile(m[k],p),l++,l===m.length&&(j=h(a,i,d));else j=h(a,i,d)}return n.key=a,n}function h(a,b,c){var d=P.getRecordName()===a,f=U.setRecord(a,b,!0,d,P.getRecordName());console.log("saveResult: "+f),"success"===f?(e(!0),Q.trigger("save",JSON.stringify(U.getRecordList())),c?L.feedback("Record stored as draft.",3):(L.feedback("Record queued for submission.",3),l(a,b))):"require"===f||"existing"===f||"forbidden"===f?g(void 0,!1,'Record name "'+a+'" already exists (or is not allowed). The record was not saved.'):L.alert("Error trying to save data locally (message: "+f+")")}function i(a){var b,c;return Q.trigger("beforesave"),P.isValid()?(L.alert('<progress style="text-align: center;"/>',"Submitting...","info"),b={key:"iframe_record",data:P.getDataStr(!0,!0),instanceStrToEditId:surveyData.instanceStrToEditId,assignmentId:surveyData.assignmentId,accessKey:surveyData.key},c={error:function(){L.alert("Please try submitting again.","Submission Failed")},success:function(){e(!0),L.alert("Success","Submission Successful!","success")},complete:function(){}},void p(b,{success:function(a){M.uploadRecords(a,!0,c,j())},error:function(){L.alert("Something went wrong while trying to prepare the record(s) for uploading.","Record Error")}},!0)):void L.alert("Form contains errors <br/>(please see fields marked in red)")}function j(){return!!surveyData.assignmentId&&(console.log("Close after saving"),!0)}function k(){return!!V.isSupported()&&(console.log("Can Save record:"),!0)}function l(a,b){b.draft||p({key:a,data:b.data,assignmentId:b.assignmentId,instanceStrToEditId:b.instanceStrToEditId,accessKey:b.accessKey},{success:function(a){M.uploadRecords(a,!0,void 0,j())},error:function(){L.alert("Something went wrong while trying to prepare the record(s) for uploading.","Record Error")}},!1)}function m(){var a,b=U.getSurveyDataArr(!0),c=function(a){M.uploadRecords(a,!1,void 0,!1)},d=function(){console.log("Something went wrong while trying to prepare the record(s) for uploading.")};if(Q.trigger("save",JSON.stringify(U.getRecordList())),N(".record-list").find("li").removeClass("error"),!M.getUploadOngoingID()&&0===M.getUploadQueue().length)for(a=0;a<b.length;a++)p(b[a],{success:c,error:d},!1)}function n(){var a,b=U.getSurveyDataArr(!1);for(Q.trigger("save",JSON.stringify(U.getRecordList())),a=0;a<b.length;a++){var c,d=b[a],e=d.key,f=new K(d.data);f&&(f.init(),c=f.getInstanceID()),V.isSupported()&&V.deleteDir(c),U&&U.removeRecord(e)}V.deleteAllAttachments()}function o(){var a,b,c,d,e,f,g=[];return N('[type="file"]').each(function(){for(a=N(this),b=a.parent().find(".file-preview").find("img"),e=a.parent().find(".fake-file-input").text(),c=a[0],d=0;d<c.files.length;d++)f=c.files[d].name,g.push({name:e,file:c.files[d],dataUrl:b.attr("src")})}),console.log("Returning media"),console.log(g),g}function p(a,b,c){function d(b,c){return k?(l=new FormData,l.append("xml_submission_data",k),a.assignmentId&&l.append("assignment_id",a.assignmentId)):l=a.formData,{name:a.key,instanceID:m.getInstanceID(),formData:l,batches:b,batchIndex:c,assignmentId:a.assignmentId,instanceStrToEditId:a.instanceStrToEditId,accessKey:a.accessKey}}function e(){var a;if(w=o())for(a=0;a<w.length;a++)t++,u.push(w[a].file.size)}function f(a){n=V?m.$.find('[type="file"]').removeAttr("type"):[],n.length>0?n.each(function(){r={fileName:N(this).text()};var b=V.retrieveFile(a,r);t++,b&&(w.push(b),u.push(b.size)),t==n.length&&g()}):(s=d(1,0),b.success(s))}function g(){var a=M.getMaxSubmissionSize();if(w.length>0)for(v=x(u,a),console.log("splitting record into "+v.length+" batches to reduce submission size "),i=0;i<v.length;i++){for(s=d(v.length,i),j=0;j<v[i].length;j++){p=v[i][j];var c=h(w[p].dataUrl);s.formData.append(w[p].fileName,c,w[p].fileName)}b.success(s)}else s=d(1,0),b.success(s)}function h(a){for(var b=a.split(","),c=b[0].match(/:(.*?);/)[1],d=atob(b[1]),e=d.length,f=new Uint8Array(e);e--;)f[e]=d.charCodeAt(e);return new Blob([f],{type:c})}var i,j,k,l,m,n,p,r,s,t=0,u=[],v=[],w=[];a.data?(m=new K(a.data),m.init(),k=m.getStr(),k=q(k)):b.success(a),c?(e(),g()):m&&f(m.getInstanceID())}function q(a){var b,c=N.parseXML(a),d=0,e=0;return b=N(c),b.find('[type="file"]').each(function(){var a,b=N(this);a=b.text(),"image.jpg"===a&&(a="image_"+d+".jpg",b.text(a),d++),"capturedvideo.MOV"===a&&(a="capturedvideo_"+e+".MOV",b.text(a),e++)}),(new XMLSerializer).serializeToString(c)}function r(a,b){var c;c=new Blob([b],{type:"text/plain; charset=utf-8"}),saveAs(c,a)}function s(){N("button#reset-form").click(function(){e()}),N("button#submit-form").click(function(){var a=N(this);a.btnBusyState(!0),setTimeout(function(){return k()?g():w()?(v(!1),a.btnBusyState(!1),a.text("Submit"),L.alert("Your browser does not support saving media files")):(P.validate(),i(j())),a.btnBusyState(!1),!1},100)}),N("button#submit-form-single").click(function(){var a=N(this);a.btnBusyState(!0),setTimeout(function(){return P.validate(),i(!0),a.btnBusyState(!1),!1},100)}),N('.form-footer [name="draft"]').on("change",function(){var a=N(this).prop("checked")?"Save Draft":"Submit";N("#submit-form").text(a)}),N(document).on("click","button#validate-form:not(.disabled)",function(){if("undefined"!=typeof P){var a=N(this);a.btnBusyState(!0),setTimeout(function(){if(P.validate(),a.btnBusyState(!1),!P.isValid())return void L.alert("Form contains errors <br/>(please see fields marked in red)")},100)}}),N(document).on("click",".export-records",function(){var a,b,c,d=P.getSurveyName()+"_data_backup.xml";c=U.getExportStr(),c?(a=settings.serverURL||"",b=vkbeautify.xml('<export date="'+new Date+'" server="'+a+'">'+c+"</export>"),r(d,b)):L.alert("No records in queue. The records may have been successfully submitted already.")}),N(document).on("click",".upload-records:not(:disabled)",function(){m()}),N(document).on("click",".delete-records:not(:disabled)",function(){var a="Are you sure you want to delete all the unsent results?",b={posAction:function(){n()}};L.confirm(a,b)}),N(document).on("click",".record.error",function(){var a=N(this).attr("name"),b=N(this).siblings('[name="'+a+'"]');b.is(":visible")?b.hide(500):b.show(500)}),N(document).on("click",'.record-list [data-draft="true"]',function(){f(N(this).closest(".record").attr("name"),!1)}),N(document).on("save delete","form.or",function(a,b){t(JSON.parse(b))}),N(document).on("submissionsuccess",function(a,b,c){V.isSupported()&&V.deleteDir(c),U&&U.removeRecord(b),console.log("After submission success, attempted to remove record with key:"+b+"and files in folder:"+c)}),N(document).on("progressupdate","form.or",function(a,b){R.length>0&&R.css("width",b+"%")})}function t(a){var b,c,d,e=N(".side-slider .upload-records, .side-slider .export-records"),f=N(".side-slider .record-list");console.log("updating record list"),a=a||[],N(".queue-length").text(a.length),f.find(".record").each(function(){b=N(this).attr("name"),0===N.grep(a,function(a){return a.key==b}).length&&N(this).siblings('[name="'+b+'"]').addBack().hide(2e3,function(){N(this).remove()})}),e.attr("disabled","disabled"),a.length>0?(f.find(".no-records").remove(),N(".side-slider .export-records").removeAttr("disabled"),a.forEach(function(a){b=a.key,c=a.draft,c||e.removeAttr("disabled"),d=f.find('[name="'+b+'"]'),0===d.length&&(d=N('<li class="record"></li>'),d.text(b),d.attr("name",b),f.append(d)),d.attr("data-draft",c)})):0===f.find(".no-records").length&&f.append('<li class="no-records">no records queued</li>')}function u(a){var b=N(".side-slider .record-list");b.find("li").removeClass("active"),a&&b.find('li[name="'+a+'"]').addClass("active")}function v(a){a=a||!1,N('.form-footer [name="draft"]').prop("checked",a).trigger("change")}function w(){return N('.form-footer [name="draft"]').prop("checked")}function x(a,b){var c,d,e,f,g=[],h=[];for(c=0;c<a.length;c++)g.push({index:c,size:a[c]});for(;g.length>0;){if(e=[g[0].index],f=g[0].size,g[0].size<b)for(c=1;c<g.length;c++)f+g[c].size<b&&(e.push(g[c].index),f+=g[c].size);for(h.push(e),c=0;c<g.length;c++)for(d=0;d<e.length;d++)g[c].index===e[d]&&g.splice(c,1)}return h}function y(){var a=P.getView().$;a.trigger("beforesave"),N(":focus").trigger("blur"),P.validate()}function z(){return P.isValid()}function A(){return P.getDataStr(!0,!0)}function B(a,b){var c;window.gLoadedInstanceID=void 0,P=new J("form.or:eq(0)",surveyData),c=P.init(),a&&P.setRecordName(a),c.length>0&&alert(c.join(",")),Q=P.getView().$,R=N(".form-progress"),s(),W=b?"":P.getDataStr(!0,!0)}function C(){W=P.getDataStr(!0,!0)}function D(){if("undefined"!=typeof P){var a=P.getDataStr(!0,!0);return W!=a}return!1}function E(){return"undefined"!=typeof P?P.getInstanceName():"unknown"}function F(){var a={defLang:N("#form-languages").data("default-lang"),languages:[]};return N("#form-languages").find("option").each(function(b){var c=N(this);a.languages.push({value:c.val(),name:c.html()})}),a}function G(a){P.getView().langs.setAll(a)}function H(){P.getView().pages.next()}function I(){P.getView().pages.prev()}var J=a("../src/js/Form"),K=a("../src/js/Form-model"),L=a("./gui"),M=a("./connection"),N=a("jquery"),O=a("../src/js/file-manager");a("bootstrap");var P,Q,R,S,T,U,V,W;c.exports={init:d,saveRecord:g,validate:z,finalise:y,getXmlData:A,initialiseForm:B,getInstanceName:E,hasChanged:D,resetStartPoint:C,submitQueue:m,emptyQueue:n,getLanguages:F,setLanguage:G,nextPage:H,prevPage:I,divideIntoBatches:x}})},{"../src/js/Form":30,"../src/js/Form-model":29,"../src/js/file-manager":34,"./connection":62,"./gui":65,bootstrap:6,jquery:22}],64:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(){var a=n.defer();return s?a.resolve(!0):a.reject(new Error("FileReader not supported.")),a.promise}function e(){return s}function f(){return!1}function g(){var a,b=[];return o('form.or input[type="file"]').each(function(){a=this.files[0],a&&b.push(a)}),b}function h(){console.log("delete all local storage");for(var a in localStorage)a.startsWith(p)&&(console.log("Delete item: "+a),localStorage.removeItem(a))}function i(){return q}function j(){return r}function k(a){if("undefined"!=typeof a){console.log("delete directory: "+a);for(var b in localStorage)b.startsWith(p+"/"+a)&&(console.log("Delete item: "+b),localStorage.removeItem(b))}}function l(a,b){console.log("save file: "+a.name+" : "+b),localStorage.setItem(p+b+"/"+a.name,a.dataUrl)}function m(a,b){var c=p+"/"+a+"/"+b.fileName;return b.dataUrl=localStorage.getItem(c),b.dataUrl?b.size=b.dataUrl.length:b.size=0,b}var n=a("./q"),o=a("jquery"),p=(a("../src/js/utils"),"fs::"),q=null,r=null,s="undefined"!=typeof FileReader;c.exports={isSupported:e,isWaitingForPermissions:f,init:d,getCurrentFiles:g,deleteAllAttachments:h,deleteDir:k,getCurrentQuota:i,getCurrentQuotaUsed:j,saveFile:l,retrieveFile:m}})},{"../src/js/utils":38,"./q":67,jquery:22}],65:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(){n.setup(),o.init(),e(),r("footer").detach().appendTo("#container"),l(),settings.touch?(Modernizr.touch=!0,r("html").addClass("touch")):settings.touch===!1&&(Modernizr.touch=!1,r("html").removeClass("touch"))}function e(){r(document).on("click","#feedback-bar .close",function(a){return q.hide(),!1}),r(document).on("click",".touch #feedback-bar",function(a){q.hide()}),r(document).on("click","#page .close",function(a){return o.close(),!1}),r(document).on("click",".side-slider .close",function(a){r("body").removeClass("show-side-slider")}),r("button.print").on("click",function(){s()}),r(".side-slider-toggle").on("click",function(){var a=r("body");window.scrollTo(0,0),a.toggleClass("show-side-slider")}),r(".offline-enabled-icon").on("click",function(){var a="<p>This form can now be loaded and used without an Internet connection on this device. Bookmark it for easy offline access.<p>Records are automatically stored and queued on your computer until an Internet connection is available. When the app is online, records will be automatically submitted - one by one.</p><p>Only after a record has been succesfully submitted, it will be removed from the queue. You can safely close down your browser and computer with items in the queue. They will still be there next time you load the form.</p>";g(a,"Form works offline!","normal")}),r(document).on("click",'a[href^="#"]:not([href="#"]):not(nav ul li a)',function(a){var b=r(this).attr("href");console.log("captured click to nav page, href="+b),"#"!==b&&(a.preventDefault(),r('nav li a[href="'+b+'"]').click())}),r('nav ul li a[href^="#"]').click(function(a){a.preventDefault();var b=r(this).attr("href").substr(1);o.open(b),r(this).closest("li").addClass("active").siblings().removeClass("active")}),r(window).on("onlinestatuschange",function(a,b){p.connection(b)}),r(document).on("edit","form.jr",function(a,b){p.edit(b)}),r(document).on("browsersupport",function(a,b){p.support(b)}),r("#page, #feedback-bar").on("changepagebar",function(){l()}),r(document).on("xpatherror",function(a,b){var c=settings.supportEmail;g('A formula evaluation error occurred. Please contact <a href="mailto:'+c+"?subject=xpath errors for: "+location.href+"&body="+b+'" target="_blank" >'+c+'</a> with this error:<ul class="error-list"><li>'+b+"</li></ul>","Formula Error")}),r(".ad .close").on("click",function(){r(this).closest(".ad").remove()})}function f(a,b,c,d){c=c||"Information",Modernizr.touch?d?h({msg:a,heading:c},d,null,b):g(a,c,"info",b):q.show(a,b)}function g(a,b,c,d){var e,f,g=r("#dialog-alert");if(b=b||"Alert",c=c||"danger",e="normal"===c?"":"alert alert-"+c,g.find(".modal-header h3").text(b),g.find(".modal-body p").removeClass().addClass(e).html(a).capitalizeStart(),g.modal({keyboard:!0,show:!0}),g.on("hidden.bs.modal",function(){g.find(".modal-header h3, .modal-body p").html(""),clearInterval(f)}),"number"==typeof d){var h=d;g.find(".self-destruct-timer").text(h),f=setInterval(function(){h--,g.find(".self-destruct-timer").text(h)},1e3),setTimeout(function(){clearInterval(f),g.find(".close").click()},1e3*d)}}function h(a,b,c,d){function e(){console.log("confirm dialog reset called"),j.off("shown hidden hide"),r("body>.modal-backdrop").remove(),j.find("button.positive, button.negative").off("click"),j.find(".modal-body .msg, .modal-body .alert-danger, button").text("")}var f,g,h,i,j,k;if("string"==typeof a?f=a:"string"==typeof a.msg&&(f=a.msg),f=f||"Please confirm action",g=a.heading||"Are you sure?",h=a.errorMsg||"",i=a.dialog||"confirm",c=c||{},b=b||{},b.posButton=b.posButton||"Confirm",b.negButton=b.negButton||"Cancel",b.posAction=b.posAction||function(){},b.negAction=b.negAction||function(){},b.beforeAction=b.beforeAction||function(){},j=r("#dialog-"+i),j.find(".modal-header h3").text(g),j.find(".modal-body .msg").html(f).capitalizeStart(),j.find(".modal-body .alert-danger").html(h).show(),h||j.find(".modal-body .alert-danger").hide(),j.find("input, select, textarea").each(function(){var a=r(this).attr("name");r(this).val(c[a]||"")}),j.modal("show"),j.on("shown.bs.modal",function(){b.beforeAction.call()}),j.find("button.positive").on("click",function(){var a={};r(this).closest(".modal-dialog").find("input, select, textarea").each(function(){r(this).attr("name")&&(a[r(this).attr("name")]=r(this).val().trim())}),j.modal("hide"),e(),b.posAction.call(void 0,a)}).text(b.posButton),j.find("button.negative").on("click",function(){j.modal("hide"),e(),b.negAction.call()}).text(b.negButton),"number"==typeof d){var l=d.toString();j.find(".self-destruct-timer").text(l),k=setInterval(function(){l--,j.find(".self-destruct-timer").text(l)},1e3),setTimeout(function(){clearInterval(k),j.find(".close").click()},1e3*d)}}function i(a,b){var c='<ul class="error-list"><li>'+a.join("</li><li>")+"</li></ul>",d="* "+a.join("* "),e=a.length>1?"s":"",f=settings.supportEmail;b=b||"",g("<p>Error"+e+" occured during the loading of this form. "+b+'</p><br/><p>Please contact <a href="mailto:'+f+"?subject=loading errors for: "+location.href+"&body="+d+'" target="_blank" >'+f+"</a> with the link to this page and the error message"+e+" below:</p>"+c,"Loading Error"+e)}function j(){var a="Offline application launch is not supported by your browser. You can use the form without this feature or see options for resolving this",b={posButton:"Show options",negButton:"Use it",posAction:function(){window.location=settings.modernBrowsersURL}};h({msg:a,heading:"Application cannot launch offline"},b)}function k(a){var b=r(window).height(),c=r("header").outerHeight(!0),d=a.outerHeight()-a.height();return b-c-d}function l(){console.log("positionPageAndBar called");var a,b,c=r("header.navbar"),d=c.outerHeight()||0,e=r("#feedback-bar"),f=e.find("p").length>0,g=e.outerHeight(),h=r("#page"),i=o.isShowing(),j=h.outerHeight()||0;return h.css({position:c.css("position")}),c.length>0&&"fixed"!==c.css("position")?(f||e.hide(),i||h.hide(),!1):(a=f?d:0-g,b=i?f?a+g:d:0-j,void setTimeout(function(){e.css("top",a+"px"),h.css("top",b+"px")},100))}function m(a,b,c){var d,e="";if(console.log("list: ",a),r.isEmptyObject(a))b.addClass("empty"),c||(e='<p class="alert alert-danger">Error occurred during creation of form list or no forms found</p>');else{for(d=0;d<a.length;d++)e+='<li><a class="btn btn-block btn-info" id="'+a[d].form_id+'" title="'+a[d].title+'" href="'+a[d].url+'" data-server="'+a[d].server_url+'" >'+a[d].name+"</a></li>";b.removeClass("empty")}b.find("ul").empty().append(e)}var n,o,p,q,r=a("jquery"),s=(a("./plugin"),a("../src/js/print"));'<a href="mailto:'+settings.supportEmail+'">'+settings.supportEmail+"</a>";n={setup:function(){r("article.page").each(function(){var a,b,c,d="";b=r(this).attr("id"),a=r(this).attr("data-display-icon")?'<span class="glyphicon glyphicon-'+r(this).attr("data-display-icon")+'" > </span>':r(this).attr("data-display")?r(this).attr("data-display"):b,d=r(this).attr("data-title")?r(this).attr("data-title"):b,c=r(this).attr("data-ext-link")?r(this).attr("data-ext-link"):"#"+b,r('<li class=""><a href="'+c+'" title="'+d+'" >'+a+"</a></li>").appendTo(r(".navbar-right"))})},reset:function(){r("nav ul li").removeClass("active")}},o={init:function(){this.$pages=r("<pages></pages>"),r("article.page").detach().appendTo(this.$pages)},get:function(a){var b=this.$pages.find('article[id="'+a+'"]');return b=b.length>0?b:r('article[id="'+a+'"]')},isShowing:function(a){var b="undefined"!=typeof a?'[id="'+a+'"]':"";return r("#page article.page"+b).length>0},open:function(a){var b,c=(r("header"),this);if(!this.isShowing(a)){if(b=this.get(a),1!==b.length)return void console.error("page not found");this.isShowing()&&this.close(),r("#page .content").prepend(b.show()).trigger("changepagebar"),r("#page").show(),r(".main").css("opacity","0.3"),r(window).on("resize.pageEvents",function(){r("#page").trigger("changepagebar")}),setTimeout(function(){r(window).on("click.pageEvents",function(a){return 0===r(a.target).parents("#page").length&&c.close(),!0})},1e3)}},close:function(){var a=r("#page .page");a.length>0&&(this.$pages.append(a.detach()),r("#page").trigger("changepagebar"),r(".navbar-right li").removeClass("active"),r(window).off(".pageEvents")),r(".main").css("opacity","1")}},q={show:function(a,b){var c;b=b?1e3*b:1e4,r("#feedback-bar p").eq(1).remove(),r("#feedback-bar p").html()!==a&&(c=r("<p></p>"),c.append(a),r("#feedback-bar").prepend(c)),r("#feedback-bar").show().trigger("changepagebar"),setTimeout(function(){"undefined"!=typeof c&&c.remove(),r("#feedback-bar").trigger("changepagebar")},b)},hide:function(){r("#feedback-bar p").remove(),r("#feedback-bar").trigger("changepagebar")}},p={connection:function(a){},edit:function(a){a?r("header #status-editing").removeClass().addClass("ui-icon ui-icon-pencil").attr("title","Form is being edited."):r("header #status-editing").removeClass().attr("title","")},support:function(a){},offlineLaunch:function(a){a?r(".offline-enabled-icon.not-enabled").removeClass("not-enabled"):r(".offline-enabled-icon").addClass("not-enabled")}},d(),c.exports={alert:g,confirm:h,feedback:f,updateStatus:p,pages:o,fillHeight:k,showLoadErrors:i,showCacheUnsupported:j,parseFormlist:m}})},{"../src/js/print":36,"./plugin":66,jquery:22}],66:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){var d=a("jquery");d.fn.capitalizeStart=function(a){a||(a=1);var b=this.contents().filter(function(){return 3==this.nodeType}).first(),c=b.text(),d=c.split(" ",a).join(" ");b.length&&(b[0].nodeValue=c.slice(d.length),b.before('<span class="capitalize">'+d+"</span>"))},d.fn.btnBusyState=function(a){var b,c;return this.each(function(){b=d(this),c=b.data("btnContent"),a&&!c?(c=b.html(),b.data("btnContent",c),b.empty().append("<progress></progress>").attr("disabled",!0)):!a&&c&&(b.data("btnContent",null),b.empty().append(c).removeAttr("disabled"))})}})},{jquery:22}],67:[function(a,b,c){(function(a){!function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else Q=a()}(function(){"use strict";function b(a){return function(){return V.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===ba(a)||a instanceof R}function e(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&a.stack.indexOf(ca)===-1){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+ca+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return a.indexOf("(module.js:")!==-1||a.indexOf("(node.js:")!==-1}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===Q&&d>=S&&d<=ga}function j(){if(P)try{throw new Error}catch(d){var a=d.stack.split("\n"),b=a[0].indexOf("@")>0?a[1]:a[2],c=h(b);if(!c)return;return Q=c[0],c[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return s(a)?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,X(c,function(b,c){U(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=$(m.prototype),f=$(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=W(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):U(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(a){f.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||X(d,function(b,c){U(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(a){b.reject(a)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;d<e;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=$(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(a){g=A(a)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return c(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){da.length=0,ea.length=0,fa||(fa=!0)}function y(a,b){fa&&(ea.push(a),b&&"undefined"!=typeof b.stack?da.push(b.stack):da.push("(no stack) "+b))}function z(a){if(fa){var b=Y(ea,a);b!==-1&&(ea.splice(b,1),da.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},delete:function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return aa(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return U(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(a){b.reject(a)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(a){return A(a)}return g.done?g.value:q(g.value,e,f)}try{g=c[a](b)}catch(a){return d(a)?a.value:A(a)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new R(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return X(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){return q(a,function(a){return a=Z(a,l),q(K(Z(a,function(a){return q(a,T,T)})),function(){return a})})}function M(a){return l(a).allSettled()}function N(a,b){return l(a).then(void 0,void 0,b)}function O(a,b){return l(a).nodeify(b)}var P=!1;try{throw new Error}catch(a){P=!!a.stack}var Q,R,S=j(),T=function(){},U=function(){function b(){for(;c.next;){c=c.next;var a=c.task;c.task=void 0;var d=c.domain;d&&(c.domain=void 0,d.enter());try{a()}catch(a){if(g)throw d&&d.exit(),setTimeout(b,0),d&&d.enter(),a;setTimeout(function(){throw a},0)}d&&d.exit()}e=!1}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1;if(U=function(b){d=d.next={task:b,domain:g&&a.domain,next:null},e||(e=!0,f())},"undefined"!=typeof a&&a.nextTick)g=!0,f=function(){a.nextTick(b)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,b):function(){setImmediate(b)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=b,b()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(b,0),i()}}else f=function(){setTimeout(b,0)};return U}(),V=Function.call,W=b(Array.prototype.slice),X=b(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;c<d;c++)c in this&&(b=a(b,this[c],c));return b}),Y=b(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),Z=b(Array.prototype.map||function(a,b){var c=this,d=[];return X(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),$=Object.create||function(a){function b(){}return b.prototype=a,new b},_=b(Object.prototype.hasOwnProperty),aa=Object.keys||function(a){var b=[];for(var c in a)_(a,c)&&b.push(c);return b},ba=b(Object.prototype.toString);
R="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var ca="From previous event:";l.resolve=l,l.nextTick=U,l.longStackSupport=!1,l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(W(arguments,1)):a.resolve(c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(a){return A(a)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(a){return A(a)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return U(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(a){if(c=!0,!l.onerror)throw a;l.onerror(a)}c||i.notify(b)}]),i.promise},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var da=[],ea=[],fa=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return da.slice()},l.stopUnhandledRejectionTracking=function(){x(),fa=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l.return=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return U(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l.delete=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype.delete=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,W(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,W(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l.try=l.fcall=function(a){return l(a).dispatch("apply",[void 0,W(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},l.fbind=function(a){var b=l(a),c=W(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(W(arguments))])}},p.prototype.fbind=function(){var a=this,b=W(arguments);return function(){return a.dispatch("apply",[this,b.concat(W(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.allResolved=k(L,"allResolved","allSettled"),p.prototype.allResolved=function(){return L(this)},l.allSettled=M,p.prototype.allSettled=function(){return this.then(function(a){return K(Z(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l.catch=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype.catch=function(a){return this.then(void 0,a)},l.progress=N,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l.finally=function(a,b){return l(a).finally(b)},p.prototype.fin=p.prototype.finally=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(b,c,d){var f=function(a){U(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(f=a.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=W(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=W(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=W(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=W(arguments,1);return function(){var c=b.concat(W(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=W(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=W(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(W(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=W(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=W(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=W(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=W(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=O,p.prototype.nodeify=function(a){return a?void this.then(function(b){U(function(){a(null,b)})},function(b){U(function(){a(b)})}):this};var ga=j();return l})}).call(this,a("_process"))},{_process:26}],68:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){function d(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function e(){var a=g("__writetest","x",null,!0);return"success"===a&&(j("__writetest"),!0)}function f(){return u}function g(a,b,c,d,e){var f;if(!a||"string"!=typeof a||a.length<1)return"require";if(a=a.trim(),e="string"==typeof e?e.trim():null,d="undefined"!=typeof d&&d===!0,"string"==typeof b.data&&p(a))return"forbidden";if("string"==typeof b.data&&e!==a&&q(a)&&d!==!0||e===a&&d!==!0)return"existing";try{return"string"==typeof b.data&&(b.lastSaved=(new Date).getTime(),v.setItem("__counter",JSON.stringify({counter:r()}))),v.setItem(a,JSON.stringify(b)),null!==e&&""!==e&&e!==a&&c&&(console.log("going to remove old record with key:"+e),j(e)),"success"}catch(a){return a&&22===a.code?"full (or browser is set to not allow storage)":(console.log("error in store.setRecord:",a),f=a?JSON.stringify(a):"unknown","error: "+f)}}function h(a,b){v.setItem(a,JSON.stringify(b))}function i(a){var b;try{v.getItem(a);return b=JSON.parse(v.getItem(a))}catch(a){return console.error("error with loading data from store: "+a.message),null}}function j(a){try{return v.removeItem(a),p(a)||t("form.or").trigger("delete",JSON.stringify(l())),!0}catch(a){return console.log("error with removing data from store: "+a.message),!1}}function k(a){return"undefined"==typeof a?null:i("__server_"+a)}function l(){var a=[],b=m(!1);return b.forEach(function(b){a.push({key:b.key,draft:b.draft,lastSaved:b.lastSaved})}),a.sort(function(a,b){return a.lastSaved-b.lastSaved}),a}function m(a,b){var c,d,e=[],f={};for(a="undefined"!=typeof a&&a,b=b||null,c=0;c<v.length;c++)if(d=v.key(c),!p(d)&&!d.startsWith("fs::")){f=i(d);try{f.key=d,d===b||a&&f.draft||f.form&&e.push(f)}catch(a){console.log("record found that was probably not in the expected JSON format (e.g. Firebug settings or corrupt record) (error: "+a.message+"), record was ignored")}}return e}function n(a,b){return a="undefined"==typeof a||a,b=b||null,m(a,b)}function o(){var a="";return n(!1).forEach(function(b){a+='<record name="'+b.key+'" lastSaved="'+b.lastSaved+'"'+(b.draft?' draft="true()"':"")+">"+b.data+"</record>"}),a}function p(a){var b;for(b=0;b<u.length;b++)if(a===u[b])return!0;return!1}function q(a){return!!v.getItem(a)}function r(){var a=i("__counter"),b=a&&a.counter&&s(a.counter)?Number(a.counter):0,c=(b+1).toString().pad(4);return c}function s(a){return!isNaN(parseFloat(a))&&isFinite(a)}var t=a("jquery"),u=["user_locale","__settings","null","__history","Firebug","undefined","__bookmark","__counter","__current_server","__loadLog","__writetest","__maxSize"],v=window.localStorage;c.exports={isSupported:d,isWritable:e,getForbiddenKeys:f,getRecord:i,setRecord:g,removeRecord:j,getFormList:k,getRecordList:l,getExportStr:o,getSurveyRecords:m,getSurveyDataArr:n,getCounterValue:r,setKey:h}})},{jquery:22}]},{},[2]);